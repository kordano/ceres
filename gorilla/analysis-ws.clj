;; gorilla-repl.fileformat = 1

;; **
;;; # News Diffusion on Twitter
;; **

;; @@
(ns unsightly-reserve
  (:refer-clojure :exclude [find sort])
  (:require [gorilla-plot.core :as plot]
            [ceres.collector :refer :all]
            [ceres.curator :refer [random-tree build-tree-from-source compute-summary]]
            [ceres.analyzer :as analyzer :refer [short-metrics summary]]
            [monger.collection :as mc]
            [clojure.walk :as walk]
            [clojure.zip :as zip]
            [clj-time.core :as t]
            [clj-time.periodic :as p]
            [incanter.stats :refer [mean median quantile variance linear-model]]
            [monger.operators :refer :all]
            [gg4clj.core :as gg4clj]
            [monger.query :refer :all])
  (:import org.bson.types.ObjectId))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; Follwing news distributors are watched
;; **

;; @@
news-accounts
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-set'>#{</span>","close":"<span class='clj-set'>}</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;dpa&quot;</span>","value":"\"dpa\""},{"type":"html","content":"<span class='clj-string'>&quot;tazgezwitscher&quot;</span>","value":"\"tazgezwitscher\""},{"type":"html","content":"<span class='clj-string'>&quot;BILD&quot;</span>","value":"\"BILD\""},{"type":"html","content":"<span class='clj-string'>&quot;ZDFheute&quot;</span>","value":"\"ZDFheute\""},{"type":"html","content":"<span class='clj-string'>&quot;FAZ_NET&quot;</span>","value":"\"FAZ_NET\""},{"type":"html","content":"<span class='clj-string'>&quot;focusonline&quot;</span>","value":"\"focusonline\""},{"type":"html","content":"<span class='clj-string'>&quot;welt&quot;</span>","value":"\"welt\""},{"type":"html","content":"<span class='clj-string'>&quot;N24_de&quot;</span>","value":"\"N24_de\""},{"type":"html","content":"<span class='clj-string'>&quot;DerWesten&quot;</span>","value":"\"DerWesten\""},{"type":"html","content":"<span class='clj-string'>&quot;SPIEGELONLINE&quot;</span>","value":"\"SPIEGELONLINE\""},{"type":"html","content":"<span class='clj-string'>&quot;ntvde&quot;</span>","value":"\"ntvde\""},{"type":"html","content":"<span class='clj-string'>&quot;tagesschau&quot;</span>","value":"\"tagesschau\""},{"type":"html","content":"<span class='clj-string'>&quot;SZ&quot;</span>","value":"\"SZ\""},{"type":"html","content":"<span class='clj-string'>&quot;sternde&quot;</span>","value":"\"sternde\""}],"value":"#{\"dpa\" \"tazgezwitscher\" \"BILD\" \"ZDFheute\" \"FAZ_NET\" \"focusonline\" \"welt\" \"N24_de\" \"DerWesten\" \"SPIEGELONLINE\" \"ntvde\" \"tagesschau\" \"SZ\" \"sternde\"}"}
;; <=

;; **
;;; ## Average Tweets per Day
;; **

;; @@
(def start-date (t/date-time 2014 8 1))
(def end-date (t/date-time 2014 9 1))
(def days-running (t/in-days (t/interval start-date end-date)))
(def dates (take days-running (p/periodic-seq start-date (t/days 1))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/dates</span>","value":"#'unsightly-reserve/dates"}
;; <=

;; **
;;; ### Combined
;; **

;; @@
(let [tweet-count (map #(mc/count @db "tweets" {:created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
        days (range  2 (inc (inc days-running)))]
    (plot/list-plot tweet-count :joined true :plot-size 900))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"c6a82d22-4bd3-4c92-bb61-12d86b5494bd","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"c6a82d22-4bd3-4c92-bb61-12d86b5494bd","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"c6a82d22-4bd3-4c92-bb61-12d86b5494bd"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"c6a82d22-4bd3-4c92-bb61-12d86b5494bd","values":[{"x":0,"y":8774},{"x":1,"y":6783},{"x":2,"y":9144},{"x":3,"y":9718},{"x":4,"y":9909},{"x":5,"y":11237},{"x":6,"y":10819},{"x":7,"y":9143},{"x":8,"y":6782},{"x":9,"y":8274},{"x":10,"y":7935},{"x":11,"y":12168},{"x":12,"y":11173},{"x":13,"y":10445},{"x":14,"y":10248},{"x":15,"y":7808},{"x":16,"y":7729},{"x":17,"y":8024},{"x":18,"y":12345},{"x":19,"y":9617},{"x":20,"y":8439},{"x":21,"y":8807},{"x":22,"y":7077},{"x":23,"y":7140},{"x":24,"y":8550},{"x":25,"y":9374},{"x":26,"y":9221},{"x":27,"y":11006},{"x":28,"y":9324},{"x":29,"y":7472},{"x":30,"y":10782}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"c6a82d22-4bd3-4c92-bb61-12d86b5494bd\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"c6a82d22-4bd3-4c92-bb61-12d86b5494bd\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"c6a82d22-4bd3-4c92-bb61-12d86b5494bd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"c6a82d22-4bd3-4c92-bb61-12d86b5494bd\", :values ({:x 0, :y 8774} {:x 1, :y 6783} {:x 2, :y 9144} {:x 3, :y 9718} {:x 4, :y 9909} {:x 5, :y 11237} {:x 6, :y 10819} {:x 7, :y 9143} {:x 8, :y 6782} {:x 9, :y 8274} {:x 10, :y 7935} {:x 11, :y 12168} {:x 12, :y 11173} {:x 13, :y 10445} {:x 14, :y 10248} {:x 15, :y 7808} {:x 16, :y 7729} {:x 17, :y 8024} {:x 18, :y 12345} {:x 19, :y 9617} {:x 20, :y 8439} {:x 21, :y 8807} {:x 22, :y 7077} {:x 23, :y 7140} {:x 24, :y 8550} {:x 25, :y 9374} {:x 26, :y 9221} {:x 27, :y 11006} {:x 28, :y 9324} {:x 29, :y 7472} {:x 30, :y 10782})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ### Daily Newspapers 1
;;; Daily tweet counts of SZ, FAZ and Bild.
;; **

;; @@
(let [sz-counts (map #(mc/count @db "tweets" {:user.screen_name "SZ" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      faz-counts (map #(mc/count @db "tweets" {:user.screen_name "FAZ_NET" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
       bild-counts (map #(mc/count @db "tweets" {:user.screen_name "BILD" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)]
    (plot/compose
      (plot/list-plot sz-counts :joined true :color "red" :plot-size 900 :plot-range [[0 30] [0 140]])
      (plot/list-plot faz-counts :joined true :color "green")
      (plot/list-plot bild-counts :joined true :color "blue")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,30]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,140]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"51a97545-5b50-4307-a421-48f914663301","values":[{"x":0,"y":62},{"x":1,"y":40},{"x":2,"y":35},{"x":3,"y":53},{"x":4,"y":66},{"x":5,"y":76},{"x":6,"y":65},{"x":7,"y":78},{"x":8,"y":42},{"x":9,"y":40},{"x":10,"y":71},{"x":11,"y":63},{"x":12,"y":46},{"x":13,"y":55},{"x":14,"y":65},{"x":15,"y":36},{"x":16,"y":46},{"x":17,"y":34},{"x":18,"y":35},{"x":19,"y":58},{"x":20,"y":71},{"x":21,"y":58},{"x":22,"y":2},{"x":23,"y":0},{"x":24,"y":78},{"x":25,"y":73},{"x":26,"y":73},{"x":27,"y":72},{"x":28,"y":41},{"x":29,"y":46},{"x":30,"y":35}]},{"name":"c3cea8c6-01a5-452b-8299-d4c5fda02f5b","values":[{"x":0,"y":118},{"x":1,"y":61},{"x":2,"y":66},{"x":3,"y":95},{"x":4,"y":96},{"x":5,"y":97},{"x":6,"y":102},{"x":7,"y":93},{"x":8,"y":68},{"x":9,"y":67},{"x":10,"y":92},{"x":11,"y":110},{"x":12,"y":108},{"x":13,"y":110},{"x":14,"y":100},{"x":15,"y":69},{"x":16,"y":73},{"x":17,"y":89},{"x":18,"y":105},{"x":19,"y":104},{"x":20,"y":112},{"x":21,"y":108},{"x":22,"y":74},{"x":23,"y":70},{"x":24,"y":101},{"x":25,"y":113},{"x":26,"y":117},{"x":27,"y":122},{"x":28,"y":117},{"x":29,"y":78},{"x":30,"y":84}]},{"name":"68c05a40-e3aa-493c-8ded-812115c5d53b","values":[{"x":0,"y":50},{"x":1,"y":21},{"x":2,"y":30},{"x":3,"y":41},{"x":4,"y":49},{"x":5,"y":48},{"x":6,"y":45},{"x":7,"y":44},{"x":8,"y":38},{"x":9,"y":35},{"x":10,"y":42},{"x":11,"y":50},{"x":12,"y":55},{"x":13,"y":50},{"x":14,"y":35},{"x":15,"y":38},{"x":16,"y":23},{"x":17,"y":37},{"x":18,"y":50},{"x":19,"y":44},{"x":20,"y":48},{"x":21,"y":51},{"x":22,"y":44},{"x":23,"y":58},{"x":24,"y":45},{"x":25,"y":53},{"x":26,"y":49},{"x":27,"y":47},{"x":28,"y":37},{"x":29,"y":43},{"x":30,"y":27}]}],"marks":[{"type":"line","from":{"data":"51a97545-5b50-4307-a421-48f914663301"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"c3cea8c6-01a5-452b-8299-d4c5fda02f5b"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"68c05a40-e3aa-493c-8ded-812115c5d53b"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 30]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 140]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"51a97545-5b50-4307-a421-48f914663301\", :values ({:x 0, :y 62} {:x 1, :y 40} {:x 2, :y 35} {:x 3, :y 53} {:x 4, :y 66} {:x 5, :y 76} {:x 6, :y 65} {:x 7, :y 78} {:x 8, :y 42} {:x 9, :y 40} {:x 10, :y 71} {:x 11, :y 63} {:x 12, :y 46} {:x 13, :y 55} {:x 14, :y 65} {:x 15, :y 36} {:x 16, :y 46} {:x 17, :y 34} {:x 18, :y 35} {:x 19, :y 58} {:x 20, :y 71} {:x 21, :y 58} {:x 22, :y 2} {:x 23, :y 0} {:x 24, :y 78} {:x 25, :y 73} {:x 26, :y 73} {:x 27, :y 72} {:x 28, :y 41} {:x 29, :y 46} {:x 30, :y 35})} {:name \"c3cea8c6-01a5-452b-8299-d4c5fda02f5b\", :values ({:x 0, :y 118} {:x 1, :y 61} {:x 2, :y 66} {:x 3, :y 95} {:x 4, :y 96} {:x 5, :y 97} {:x 6, :y 102} {:x 7, :y 93} {:x 8, :y 68} {:x 9, :y 67} {:x 10, :y 92} {:x 11, :y 110} {:x 12, :y 108} {:x 13, :y 110} {:x 14, :y 100} {:x 15, :y 69} {:x 16, :y 73} {:x 17, :y 89} {:x 18, :y 105} {:x 19, :y 104} {:x 20, :y 112} {:x 21, :y 108} {:x 22, :y 74} {:x 23, :y 70} {:x 24, :y 101} {:x 25, :y 113} {:x 26, :y 117} {:x 27, :y 122} {:x 28, :y 117} {:x 29, :y 78} {:x 30, :y 84})} {:name \"68c05a40-e3aa-493c-8ded-812115c5d53b\", :values ({:x 0, :y 50} {:x 1, :y 21} {:x 2, :y 30} {:x 3, :y 41} {:x 4, :y 49} {:x 5, :y 48} {:x 6, :y 45} {:x 7, :y 44} {:x 8, :y 38} {:x 9, :y 35} {:x 10, :y 42} {:x 11, :y 50} {:x 12, :y 55} {:x 13, :y 50} {:x 14, :y 35} {:x 15, :y 38} {:x 16, :y 23} {:x 17, :y 37} {:x 18, :y 50} {:x 19, :y 44} {:x 20, :y 48} {:x 21, :y 51} {:x 22, :y 44} {:x 23, :y 58} {:x 24, :y 45} {:x 25, :y 53} {:x 26, :y 49} {:x 27, :y 47} {:x 28, :y 37} {:x 29, :y 43} {:x 30, :y 27})}), :marks ({:type \"line\", :from {:data \"51a97545-5b50-4307-a421-48f914663301\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c3cea8c6-01a5-452b-8299-d4c5fda02f5b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"68c05a40-e3aa-493c-8ded-812115c5d53b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ### Daily Newspaper 2
;;; Daily tweet counts of Welt, Westen and taz.
;; **

;; @@
(let [welt-counts (map #(mc/count @db "tweets" {:user.screen_name "welt" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      taz-counts (map #(mc/count @db "tweets" {:user.screen_name "tazgezwitscher" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      westen-counts (map #(mc/count @db "tweets" {:user.screen_name "DerWesten" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)]
  (plot/compose
      (plot/list-plot welt-counts :joined true :color "red" :plot-size 900 :plot-range [[0 30] [0 140]])
      (plot/list-plot taz-counts :joined true :color "green")
      (plot/list-plot westen-counts :joined true :color "blue")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,30]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,140]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"480cf0e2-11b1-42cd-a42e-8b9d23b8be32","values":[{"x":0,"y":52},{"x":1,"y":42},{"x":2,"y":57},{"x":3,"y":60},{"x":4,"y":66},{"x":5,"y":61},{"x":6,"y":77},{"x":7,"y":75},{"x":8,"y":56},{"x":9,"y":60},{"x":10,"y":51},{"x":11,"y":67},{"x":12,"y":73},{"x":13,"y":82},{"x":14,"y":68},{"x":15,"y":32},{"x":16,"y":59},{"x":17,"y":69},{"x":18,"y":92},{"x":19,"y":74},{"x":20,"y":73},{"x":21,"y":51},{"x":22,"y":68},{"x":23,"y":63},{"x":24,"y":69},{"x":25,"y":69},{"x":26,"y":63},{"x":27,"y":79},{"x":28,"y":68},{"x":29,"y":55},{"x":30,"y":59}]},{"name":"9b1a5002-100b-4a23-b57d-371d658575a7","values":[{"x":0,"y":22},{"x":1,"y":15},{"x":2,"y":12},{"x":3,"y":22},{"x":4,"y":22},{"x":5,"y":23},{"x":6,"y":30},{"x":7,"y":19},{"x":8,"y":15},{"x":9,"y":16},{"x":10,"y":17},{"x":11,"y":25},{"x":12,"y":21},{"x":13,"y":25},{"x":14,"y":31},{"x":15,"y":14},{"x":16,"y":15},{"x":17,"y":20},{"x":18,"y":32},{"x":19,"y":27},{"x":20,"y":40},{"x":21,"y":29},{"x":22,"y":16},{"x":23,"y":18},{"x":24,"y":24},{"x":25,"y":31},{"x":26,"y":27},{"x":27,"y":37},{"x":28,"y":25},{"x":29,"y":3},{"x":30,"y":27}]},{"name":"1fc1967c-bfdd-4890-9fcd-b33ba19dd159","values":[{"x":0,"y":41},{"x":1,"y":16},{"x":2,"y":21},{"x":3,"y":31},{"x":4,"y":34},{"x":5,"y":33},{"x":6,"y":31},{"x":7,"y":29},{"x":8,"y":12},{"x":9,"y":17},{"x":10,"y":32},{"x":11,"y":31},{"x":12,"y":32},{"x":13,"y":52},{"x":14,"y":37},{"x":15,"y":13},{"x":16,"y":17},{"x":17,"y":35},{"x":18,"y":31},{"x":19,"y":32},{"x":20,"y":36},{"x":21,"y":49},{"x":22,"y":26},{"x":23,"y":27},{"x":24,"y":31},{"x":25,"y":31},{"x":26,"y":29},{"x":27,"y":48},{"x":28,"y":48},{"x":29,"y":24},{"x":30,"y":21}]}],"marks":[{"type":"line","from":{"data":"480cf0e2-11b1-42cd-a42e-8b9d23b8be32"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"9b1a5002-100b-4a23-b57d-371d658575a7"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"1fc1967c-bfdd-4890-9fcd-b33ba19dd159"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 30]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 140]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"480cf0e2-11b1-42cd-a42e-8b9d23b8be32\", :values ({:x 0, :y 52} {:x 1, :y 42} {:x 2, :y 57} {:x 3, :y 60} {:x 4, :y 66} {:x 5, :y 61} {:x 6, :y 77} {:x 7, :y 75} {:x 8, :y 56} {:x 9, :y 60} {:x 10, :y 51} {:x 11, :y 67} {:x 12, :y 73} {:x 13, :y 82} {:x 14, :y 68} {:x 15, :y 32} {:x 16, :y 59} {:x 17, :y 69} {:x 18, :y 92} {:x 19, :y 74} {:x 20, :y 73} {:x 21, :y 51} {:x 22, :y 68} {:x 23, :y 63} {:x 24, :y 69} {:x 25, :y 69} {:x 26, :y 63} {:x 27, :y 79} {:x 28, :y 68} {:x 29, :y 55} {:x 30, :y 59})} {:name \"9b1a5002-100b-4a23-b57d-371d658575a7\", :values ({:x 0, :y 22} {:x 1, :y 15} {:x 2, :y 12} {:x 3, :y 22} {:x 4, :y 22} {:x 5, :y 23} {:x 6, :y 30} {:x 7, :y 19} {:x 8, :y 15} {:x 9, :y 16} {:x 10, :y 17} {:x 11, :y 25} {:x 12, :y 21} {:x 13, :y 25} {:x 14, :y 31} {:x 15, :y 14} {:x 16, :y 15} {:x 17, :y 20} {:x 18, :y 32} {:x 19, :y 27} {:x 20, :y 40} {:x 21, :y 29} {:x 22, :y 16} {:x 23, :y 18} {:x 24, :y 24} {:x 25, :y 31} {:x 26, :y 27} {:x 27, :y 37} {:x 28, :y 25} {:x 29, :y 3} {:x 30, :y 27})} {:name \"1fc1967c-bfdd-4890-9fcd-b33ba19dd159\", :values ({:x 0, :y 41} {:x 1, :y 16} {:x 2, :y 21} {:x 3, :y 31} {:x 4, :y 34} {:x 5, :y 33} {:x 6, :y 31} {:x 7, :y 29} {:x 8, :y 12} {:x 9, :y 17} {:x 10, :y 32} {:x 11, :y 31} {:x 12, :y 32} {:x 13, :y 52} {:x 14, :y 37} {:x 15, :y 13} {:x 16, :y 17} {:x 17, :y 35} {:x 18, :y 31} {:x 19, :y 32} {:x 20, :y 36} {:x 21, :y 49} {:x 22, :y 26} {:x 23, :y 27} {:x 24, :y 31} {:x 25, :y 31} {:x 26, :y 29} {:x 27, :y 48} {:x 28, :y 48} {:x 29, :y 24} {:x 30, :y 21})}), :marks ({:type \"line\", :from {:data \"480cf0e2-11b1-42cd-a42e-8b9d23b8be32\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"9b1a5002-100b-4a23-b57d-371d658575a7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"1fc1967c-bfdd-4890-9fcd-b33ba19dd159\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ### Weekly Newsmagazines
;;; Daily tweet counts of Spiegel, Stern and Focus.
;; **

;; @@
(let [spon-counts (map #(mc/count @db "tweets" {:user.screen_name "SPIEGELONLINE" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      stern-counts (map #(mc/count @db "tweets" {:user.screen_name "sternde" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      focus-counts (map #(mc/count @db "tweets" {:user.screen_name "focusonline" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)]
  (plot/compose
    (plot/list-plot spon-counts :joined true :color "red" :plot-size 900 :plot-range [[0 30] [0 130]])
    (plot/list-plot stern-counts :joined true :color "green")
    (plot/list-plot focus-counts :joined true :color "blue")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,30]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,130]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"35f84ed3-298e-4a3b-80ed-bbd7db499123","values":[{"x":0,"y":66},{"x":1,"y":43},{"x":2,"y":53},{"x":3,"y":61},{"x":4,"y":50},{"x":5,"y":69},{"x":6,"y":60},{"x":7,"y":50},{"x":8,"y":44},{"x":9,"y":37},{"x":10,"y":49},{"x":11,"y":62},{"x":12,"y":68},{"x":13,"y":58},{"x":14,"y":61},{"x":15,"y":53},{"x":16,"y":42},{"x":17,"y":54},{"x":18,"y":59},{"x":19,"y":42},{"x":20,"y":56},{"x":21,"y":55},{"x":22,"y":55},{"x":23,"y":56},{"x":24,"y":50},{"x":25,"y":62},{"x":26,"y":54},{"x":27,"y":60},{"x":28,"y":82},{"x":29,"y":70},{"x":30,"y":82}]},{"name":"6920f0c2-c886-423d-9a59-ef316027b1ba","values":[{"x":0,"y":24},{"x":1,"y":17},{"x":2,"y":30},{"x":3,"y":46},{"x":4,"y":39},{"x":5,"y":43},{"x":6,"y":46},{"x":7,"y":36},{"x":8,"y":20},{"x":9,"y":11},{"x":10,"y":32},{"x":11,"y":34},{"x":12,"y":36},{"x":13,"y":27},{"x":14,"y":28},{"x":15,"y":26},{"x":16,"y":23},{"x":17,"y":39},{"x":18,"y":42},{"x":19,"y":31},{"x":20,"y":26},{"x":21,"y":25},{"x":22,"y":17},{"x":23,"y":15},{"x":24,"y":40},{"x":25,"y":37},{"x":26,"y":41},{"x":27,"y":40},{"x":28,"y":32},{"x":29,"y":43},{"x":30,"y":36}]},{"name":"5bd3fe84-c67f-4660-a71f-44f0ba485cf5","values":[{"x":0,"y":8},{"x":1,"y":2},{"x":2,"y":6},{"x":3,"y":6},{"x":4,"y":8},{"x":5,"y":9},{"x":6,"y":9},{"x":7,"y":12},{"x":8,"y":4},{"x":9,"y":8},{"x":10,"y":7},{"x":11,"y":13},{"x":12,"y":9},{"x":13,"y":9},{"x":14,"y":9},{"x":15,"y":4},{"x":16,"y":10},{"x":17,"y":10},{"x":18,"y":15},{"x":19,"y":12},{"x":20,"y":8},{"x":21,"y":9},{"x":22,"y":8},{"x":23,"y":7},{"x":24,"y":17},{"x":25,"y":10},{"x":26,"y":9},{"x":27,"y":7},{"x":28,"y":6},{"x":29,"y":12},{"x":30,"y":8}]}],"marks":[{"type":"line","from":{"data":"35f84ed3-298e-4a3b-80ed-bbd7db499123"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"6920f0c2-c886-423d-9a59-ef316027b1ba"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"5bd3fe84-c67f-4660-a71f-44f0ba485cf5"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 30]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 130]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"35f84ed3-298e-4a3b-80ed-bbd7db499123\", :values ({:x 0, :y 66} {:x 1, :y 43} {:x 2, :y 53} {:x 3, :y 61} {:x 4, :y 50} {:x 5, :y 69} {:x 6, :y 60} {:x 7, :y 50} {:x 8, :y 44} {:x 9, :y 37} {:x 10, :y 49} {:x 11, :y 62} {:x 12, :y 68} {:x 13, :y 58} {:x 14, :y 61} {:x 15, :y 53} {:x 16, :y 42} {:x 17, :y 54} {:x 18, :y 59} {:x 19, :y 42} {:x 20, :y 56} {:x 21, :y 55} {:x 22, :y 55} {:x 23, :y 56} {:x 24, :y 50} {:x 25, :y 62} {:x 26, :y 54} {:x 27, :y 60} {:x 28, :y 82} {:x 29, :y 70} {:x 30, :y 82})} {:name \"6920f0c2-c886-423d-9a59-ef316027b1ba\", :values ({:x 0, :y 24} {:x 1, :y 17} {:x 2, :y 30} {:x 3, :y 46} {:x 4, :y 39} {:x 5, :y 43} {:x 6, :y 46} {:x 7, :y 36} {:x 8, :y 20} {:x 9, :y 11} {:x 10, :y 32} {:x 11, :y 34} {:x 12, :y 36} {:x 13, :y 27} {:x 14, :y 28} {:x 15, :y 26} {:x 16, :y 23} {:x 17, :y 39} {:x 18, :y 42} {:x 19, :y 31} {:x 20, :y 26} {:x 21, :y 25} {:x 22, :y 17} {:x 23, :y 15} {:x 24, :y 40} {:x 25, :y 37} {:x 26, :y 41} {:x 27, :y 40} {:x 28, :y 32} {:x 29, :y 43} {:x 30, :y 36})} {:name \"5bd3fe84-c67f-4660-a71f-44f0ba485cf5\", :values ({:x 0, :y 8} {:x 1, :y 2} {:x 2, :y 6} {:x 3, :y 6} {:x 4, :y 8} {:x 5, :y 9} {:x 6, :y 9} {:x 7, :y 12} {:x 8, :y 4} {:x 9, :y 8} {:x 10, :y 7} {:x 11, :y 13} {:x 12, :y 9} {:x 13, :y 9} {:x 14, :y 9} {:x 15, :y 4} {:x 16, :y 10} {:x 17, :y 10} {:x 18, :y 15} {:x 19, :y 12} {:x 20, :y 8} {:x 21, :y 9} {:x 22, :y 8} {:x 23, :y 7} {:x 24, :y 17} {:x 25, :y 10} {:x 26, :y 9} {:x 27, :y 7} {:x 28, :y 6} {:x 29, :y 12} {:x 30, :y 8})}), :marks ({:type \"line\", :from {:data \"35f84ed3-298e-4a3b-80ed-bbd7db499123\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"6920f0c2-c886-423d-9a59-ef316027b1ba\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"5bd3fe84-c67f-4660-a71f-44f0ba485cf5\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ### TV News
;; **

;; @@
(let [tagesschau-counts (map #(mc/count @db "tweets" {:user.screen_name "tagesschau" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      zdf-counts (map #(mc/count @db "tweets" {:user.screen_name "ZDFheute" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      n24-counts (map #(mc/count @db "tweets" {:user.screen_name "N24_de" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      ntv-counts (map #(mc/count @db "tweets" {:user.screen_name "ntvde" :created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)]
  (plot/compose
    (plot/list-plot tagesschau-counts :joined true :color "red" :plot-size 1000 :plot-range [[0 30] [0 210]])
    (plot/list-plot zdf-counts :joined true :color "green")
    (plot/list-plot n24-counts :joined true :color "orange")
    (plot/list-plot ntv-counts :joined true :color "blue")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":1000,"height":618.0469970703125,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,30]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,210]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"da5b4b29-4b01-4e60-bd31-af293dfd84ee","values":[{"x":0,"y":84},{"x":1,"y":32},{"x":2,"y":42},{"x":3,"y":52},{"x":4,"y":73},{"x":5,"y":66},{"x":6,"y":47},{"x":7,"y":66},{"x":8,"y":41},{"x":9,"y":42},{"x":10,"y":45},{"x":11,"y":56},{"x":12,"y":47},{"x":13,"y":61},{"x":14,"y":74},{"x":15,"y":39},{"x":16,"y":21},{"x":17,"y":59},{"x":18,"y":71},{"x":19,"y":65},{"x":20,"y":68},{"x":21,"y":53},{"x":22,"y":36},{"x":23,"y":28},{"x":24,"y":54},{"x":25,"y":66},{"x":26,"y":50},{"x":27,"y":91},{"x":28,"y":52},{"x":29,"y":32},{"x":30,"y":123}]},{"name":"d58a13c0-0b7a-4488-a2f0-8700e52c0802","values":[{"x":0,"y":33},{"x":1,"y":27},{"x":2,"y":24},{"x":3,"y":42},{"x":4,"y":32},{"x":5,"y":26},{"x":6,"y":28},{"x":7,"y":37},{"x":8,"y":21},{"x":9,"y":18},{"x":10,"y":30},{"x":11,"y":31},{"x":12,"y":45},{"x":13,"y":40},{"x":14,"y":28},{"x":15,"y":30},{"x":16,"y":31},{"x":17,"y":25},{"x":18,"y":45},{"x":19,"y":37},{"x":20,"y":29},{"x":21,"y":26},{"x":22,"y":17},{"x":23,"y":17},{"x":24,"y":26},{"x":25,"y":50},{"x":26,"y":27},{"x":27,"y":24},{"x":28,"y":33},{"x":29,"y":14},{"x":30,"y":56}]},{"name":"d0ee2b2c-e64b-47e0-8d90-40ea71dc5d1e","values":[{"x":0,"y":87},{"x":1,"y":50},{"x":2,"y":56},{"x":3,"y":75},{"x":4,"y":67},{"x":5,"y":83},{"x":6,"y":72},{"x":7,"y":58},{"x":8,"y":43},{"x":9,"y":53},{"x":10,"y":58},{"x":11,"y":65},{"x":12,"y":65},{"x":13,"y":61},{"x":14,"y":75},{"x":15,"y":53},{"x":16,"y":49},{"x":17,"y":60},{"x":18,"y":76},{"x":19,"y":74},{"x":20,"y":63},{"x":21,"y":77},{"x":22,"y":47},{"x":23,"y":46},{"x":24,"y":68},{"x":25,"y":73},{"x":26,"y":69},{"x":27,"y":73},{"x":28,"y":61},{"x":29,"y":48},{"x":30,"y":57}]},{"name":"bc53801a-623f-4018-8cc1-7ed595eaf593","values":[{"x":0,"y":49},{"x":1,"y":43},{"x":2,"y":43},{"x":3,"y":43},{"x":4,"y":50},{"x":5,"y":42},{"x":6,"y":44},{"x":7,"y":46},{"x":8,"y":34},{"x":9,"y":41},{"x":10,"y":47},{"x":11,"y":48},{"x":12,"y":68},{"x":13,"y":113},{"x":14,"y":114},{"x":15,"y":49},{"x":16,"y":28},{"x":17,"y":50},{"x":18,"y":62},{"x":19,"y":63},{"x":20,"y":61},{"x":21,"y":75},{"x":22,"y":70},{"x":23,"y":57},{"x":24,"y":72},{"x":25,"y":73},{"x":26,"y":66},{"x":27,"y":77},{"x":28,"y":67},{"x":29,"y":62},{"x":30,"y":59}]}],"marks":[{"type":"line","from":{"data":"da5b4b29-4b01-4e60-bd31-af293dfd84ee"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"d58a13c0-0b7a-4488-a2f0-8700e52c0802"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"d0ee2b2c-e64b-47e0-8d90-40ea71dc5d1e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"orange"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"bc53801a-623f-4018-8cc1-7ed595eaf593"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 30]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 210]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"da5b4b29-4b01-4e60-bd31-af293dfd84ee\", :values ({:x 0, :y 84} {:x 1, :y 32} {:x 2, :y 42} {:x 3, :y 52} {:x 4, :y 73} {:x 5, :y 66} {:x 6, :y 47} {:x 7, :y 66} {:x 8, :y 41} {:x 9, :y 42} {:x 10, :y 45} {:x 11, :y 56} {:x 12, :y 47} {:x 13, :y 61} {:x 14, :y 74} {:x 15, :y 39} {:x 16, :y 21} {:x 17, :y 59} {:x 18, :y 71} {:x 19, :y 65} {:x 20, :y 68} {:x 21, :y 53} {:x 22, :y 36} {:x 23, :y 28} {:x 24, :y 54} {:x 25, :y 66} {:x 26, :y 50} {:x 27, :y 91} {:x 28, :y 52} {:x 29, :y 32} {:x 30, :y 123})} {:name \"d58a13c0-0b7a-4488-a2f0-8700e52c0802\", :values ({:x 0, :y 33} {:x 1, :y 27} {:x 2, :y 24} {:x 3, :y 42} {:x 4, :y 32} {:x 5, :y 26} {:x 6, :y 28} {:x 7, :y 37} {:x 8, :y 21} {:x 9, :y 18} {:x 10, :y 30} {:x 11, :y 31} {:x 12, :y 45} {:x 13, :y 40} {:x 14, :y 28} {:x 15, :y 30} {:x 16, :y 31} {:x 17, :y 25} {:x 18, :y 45} {:x 19, :y 37} {:x 20, :y 29} {:x 21, :y 26} {:x 22, :y 17} {:x 23, :y 17} {:x 24, :y 26} {:x 25, :y 50} {:x 26, :y 27} {:x 27, :y 24} {:x 28, :y 33} {:x 29, :y 14} {:x 30, :y 56})} {:name \"d0ee2b2c-e64b-47e0-8d90-40ea71dc5d1e\", :values ({:x 0, :y 87} {:x 1, :y 50} {:x 2, :y 56} {:x 3, :y 75} {:x 4, :y 67} {:x 5, :y 83} {:x 6, :y 72} {:x 7, :y 58} {:x 8, :y 43} {:x 9, :y 53} {:x 10, :y 58} {:x 11, :y 65} {:x 12, :y 65} {:x 13, :y 61} {:x 14, :y 75} {:x 15, :y 53} {:x 16, :y 49} {:x 17, :y 60} {:x 18, :y 76} {:x 19, :y 74} {:x 20, :y 63} {:x 21, :y 77} {:x 22, :y 47} {:x 23, :y 46} {:x 24, :y 68} {:x 25, :y 73} {:x 26, :y 69} {:x 27, :y 73} {:x 28, :y 61} {:x 29, :y 48} {:x 30, :y 57})} {:name \"bc53801a-623f-4018-8cc1-7ed595eaf593\", :values ({:x 0, :y 49} {:x 1, :y 43} {:x 2, :y 43} {:x 3, :y 43} {:x 4, :y 50} {:x 5, :y 42} {:x 6, :y 44} {:x 7, :y 46} {:x 8, :y 34} {:x 9, :y 41} {:x 10, :y 47} {:x 11, :y 48} {:x 12, :y 68} {:x 13, :y 113} {:x 14, :y 114} {:x 15, :y 49} {:x 16, :y 28} {:x 17, :y 50} {:x 18, :y 62} {:x 19, :y 63} {:x 20, :y 61} {:x 21, :y 75} {:x 22, :y 70} {:x 23, :y 57} {:x 24, :y 72} {:x 25, :y 73} {:x 26, :y 66} {:x 27, :y 77} {:x 28, :y 67} {:x 29, :y 62} {:x 30, :y 59})}), :marks ({:type \"line\", :from {:data \"da5b4b29-4b01-4e60-bd31-af293dfd84ee\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"d58a13c0-0b7a-4488-a2f0-8700e52c0802\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"d0ee2b2c-e64b-47e0-8d90-40ea71dc5d1e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"orange\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"bc53801a-623f-4018-8cc1-7ed595eaf593\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ## Average Tweets per Hour
;; **

;; @@
(let [days-running (t/in-hours (t/interval start-date end-date))
        dates (take days-running (p/periodic-seq start-date (t/hours 1)))
        tweet-count (map #(mc/count @db "tweets" {:created_at {$gte % $lt (t/plus % (t/hours 1))}}) dates)
        times (range days-running)
        tweet-count-2 (loop [hours-list []
                             tweet-dist tweet-count]
                        (if (empty? tweet-dist)
                          hours-list
                          (recur (conj hours-list (vec (take 24 tweet-dist))) (drop 24 tweet-dist))))
        avg-tweets-per-hour (map (fn [hour] (/ (reduce + (map (fn [count] (get count hour)) tweet-count-2)) (count tweet-count-2))) (range 24))]
  (plot/list-plot avg-tweets-per-hour :joined true :plot-size 900))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a","values":[{"x":0,"y":77.16129032258065},{"x":1,"y":51.80645161290323},{"x":2,"y":49.19354838709677},{"x":3,"y":59.48387096774194},{"x":4,"y":108.258064516129},{"x":5,"y":236},{"x":6,"y":431.1290322580645},{"x":7,"y":554.0322580645161},{"x":8,"y":572.1290322580645},{"x":9,"y":597.9677419354839},{"x":10,"y":605.3870967741935},{"x":11,"y":592.0322580645161},{"x":12,"y":605.2258064516129},{"x":13,"y":565.4193548387098},{"x":14,"y":519.8064516129032},{"x":15,"y":546.1935483870968},{"x":16,"y":549.8064516129032},{"x":17,"y":513.2258064516129},{"x":18,"y":461.8387096774194},{"x":19,"y":444.741935483871},{"x":20,"y":425.8387096774194},{"x":21,"y":313.4193548387097},{"x":22,"y":202.2258064516129},{"x":23,"y":119.8387096774194}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"a6c39e1c-a4a5-4206-9c54-e5cbf7c45f0a\", :values ({:x 0, :y 2392/31} {:x 1, :y 1606/31} {:x 2, :y 1525/31} {:x 3, :y 1844/31} {:x 4, :y 3356/31} {:x 5, :y 236} {:x 6, :y 13365/31} {:x 7, :y 17175/31} {:x 8, :y 17736/31} {:x 9, :y 18537/31} {:x 10, :y 18767/31} {:x 11, :y 18353/31} {:x 12, :y 18762/31} {:x 13, :y 17528/31} {:x 14, :y 16114/31} {:x 15, :y 16932/31} {:x 16, :y 17044/31} {:x 17, :y 15910/31} {:x 18, :y 14317/31} {:x 19, :y 13787/31} {:x 20, :y 13201/31} {:x 21, :y 9716/31} {:x 22, :y 6269/31} {:x 23, :y 3715/31})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(let [news-tweets (mc/count @db "tweets" {:user.screen_name {$in news-accounts}
                                          :created_at {$gt start-date
                                                       $lt end-date}})
      overall (mc/count @db "tweets" {:created_at {$gt start-date
                                                       $lt end-date}})]
  (float (/ news-tweets overall)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>0.06834649</span>","value":"0.06834649"}
;; <=

;; **
;;; ## Graph Analysis
;;; In the following section the individual graphs and subgraphs are examined. First basic metrics such as degree, depth and average connectivity are computed.
;;; 
;;; An example of an individual tree is as follows:
;; **

;; @@
(def some-tree (build-tree-from-source (ObjectId. "53f33d9ee4b0c2a12eb4a339")))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/some-tree</span>","value":"#'unsightly-reserve/some-tree"}
;; <=

;; **
;;; Basic Analysis has following features
;; **

;; @@
(:title some-tree)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-string'>&quot;Ferguson : Der Tag, an dem die US-Polizei mein Feind wurde - Nachrichten Politik - Ausland - DIE WELT&quot;</span>","value":"\"Ferguson : Der Tag, an dem die US-Polizei mein Feind wurde - Nachrichten Politik - Ausland - DIE WELT\""}
;; <=

;; @@
(-> some-tree :analysis keys)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:size :height :users :pub-times :hashtags :delays)</span>","value":"(:size :height :users :pub-times :hashtags :delays)"}
;; <=

;; **
;;; ### Basic Tree Metrics
;; **

;; @@
(-> some-tree :analysis (dissoc :pub-times :hashtags :delays :users))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:size</span>","value":":size"},{"type":"html","content":"<span class='clj-long'>479</span>","value":"479"}],"value":"[:size 479]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:height</span>","value":":height"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"}],"value":"[:height 5]"}],"value":"{:size 479, :height 5}"}
;; <=

;; **
;;; ### Hashtag Distribution
;;; Top 10 hashtags.
;; **

;; @@
(let [hashtags (-> some-tree :analysis :hashtags)]
  (if (empty? hashtags)
    "No hashtags"
    (let [h-freq (->> hashtags frequencies (sort-by second >) (take 10))]
  [(into #{} hashtags)
   (plot/bar-chart (keys h-freq) (vals h-freq) :plot-size 800)])))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-set'>#{</span>","close":"<span class='clj-set'>}</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;pressefreiheit&quot;</span>","value":"\"pressefreiheit\""},{"type":"html","content":"<span class='clj-string'>&quot;us&quot;</span>","value":"\"us\""},{"type":"html","content":"<span class='clj-string'>&quot;imgeilstenlandderwelt&quot;</span>","value":"\"imgeilstenlandderwelt\""},{"type":"html","content":"<span class='clj-string'>&quot;polizei&quot;</span>","value":"\"polizei\""},{"type":"html","content":"<span class='clj-string'>&quot;springer&quot;</span>","value":"\"springer\""},{"type":"html","content":"<span class='clj-string'>&quot;furgeson&quot;</span>","value":"\"furgeson\""},{"type":"html","content":"<span class='clj-string'>&quot;usa&quot;</span>","value":"\"usa\""},{"type":"html","content":"<span class='clj-string'>&quot;s21&quot;</span>","value":"\"s21\""},{"type":"html","content":"<span class='clj-string'>&quot;graw&quot;</span>","value":"\"graw\""},{"type":"html","content":"<span class='clj-string'>&quot;medien&quot;</span>","value":"\"medien\""},{"type":"html","content":"<span class='clj-string'>&quot;missouri&quot;</span>","value":"\"missouri\""},{"type":"html","content":"<span class='clj-string'>&quot;schland&quot;</span>","value":"\"schland\""},{"type":"html","content":"<span class='clj-string'>&quot;policestate&quot;</span>","value":"\"policestate\""},{"type":"html","content":"<span class='clj-string'>&quot;arbeitsvertrag&quot;</span>","value":"\"arbeitsvertrag\""},{"type":"html","content":"<span class='clj-string'>&quot;firstamendment&quot;</span>","value":"\"firstamendment\""},{"type":"html","content":"<span class='clj-string'>&quot;ferguson&quot;</span>","value":"\"ferguson\""},{"type":"html","content":"<span class='clj-string'>&quot;afd&quot;</span>","value":"\"afd\""},{"type":"html","content":"<span class='clj-string'>&quot;atlantik&quot;</span>","value":"\"atlantik\""}],"value":"#{\"pressefreiheit\" \"us\" \"imgeilstenlandderwelt\" \"polizei\" \"springer\" \"furgeson\" \"usa\" \"s21\" \"graw\" \"medien\" \"missouri\" \"schland\" \"policestate\" \"arbeitsvertrag\" \"firstamendment\" \"ferguson\" \"afd\" \"atlantik\"}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"d4d74364-fe6f-421c-b8a1-4281749a341b","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"d4d74364-fe6f-421c-b8a1-4281749a341b","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"d4d74364-fe6f-421c-b8a1-4281749a341b"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"d4d74364-fe6f-421c-b8a1-4281749a341b","values":[{"x":"ferguson","y":124},{"x":"usa","y":5},{"x":"pressefreiheit","y":2},{"x":"us","y":2},{"x":"springer","y":2},{"x":"furgeson","y":2},{"x":"s21","y":2},{"x":"graw","y":2},{"x":"policestate","y":2},{"x":"arbeitsvertrag","y":2}]}],"width":800,"height":494.4375915527344,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :values ({:x \"ferguson\", :y 124} {:x \"usa\", :y 5} {:x \"pressefreiheit\", :y 2} {:x \"us\", :y 2} {:x \"springer\", :y 2} {:x \"furgeson\", :y 2} {:x \"s21\", :y 2} {:x \"graw\", :y 2} {:x \"policestate\", :y 2} {:x \"arbeitsvertrag\", :y 2})}], :width 800, :height 494.4376, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}],"value":"[#{\"pressefreiheit\" \"us\" \"imgeilstenlandderwelt\" \"polizei\" \"springer\" \"furgeson\" \"usa\" \"s21\" \"graw\" \"medien\" \"missouri\" \"schland\" \"policestate\" \"arbeitsvertrag\" \"firstamendment\" \"ferguson\" \"afd\" \"atlantik\"} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"d4d74364-fe6f-421c-b8a1-4281749a341b\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"d4d74364-fe6f-421c-b8a1-4281749a341b\", :values ({:x \"ferguson\", :y 124} {:x \"usa\", :y 5} {:x \"pressefreiheit\", :y 2} {:x \"us\", :y 2} {:x \"springer\", :y 2} {:x \"furgeson\", :y 2} {:x \"s21\", :y 2} {:x \"graw\", :y 2} {:x \"policestate\", :y 2} {:x \"arbeitsvertrag\", :y 2})}], :width 800, :height 494.4376, :padding {:bottom 20, :top 10, :right 10, :left 50}}}]"}
;; <=

;; **
;;; ### User Post Distribution
;;; Top 10 Users related to this article.
;; **

;; @@
(let [users (->> some-tree :analysis :users frequencies (sort-by second >) (take 10))]
  (plot/bar-chart (keys users) (vals users) :plot-size 800))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"8e0c572e-7575-4bd8-824a-5ed4636a2343","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"8e0c572e-7575-4bd8-824a-5ed4636a2343","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"8e0c572e-7575-4bd8-824a-5ed4636a2343"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"8e0c572e-7575-4bd8-824a-5ed4636a2343","values":[{"x":"welt","y":10},{"x":"AufstandS21","y":6},{"x":"olaf26","y":3},{"x":"Welatpiraz","y":3},{"x":"frisch_fish","y":3},{"x":"rapic2012","y":3},{"x":"jep_","y":3},{"x":"Ibicis","y":3},{"x":"thetruemoeckert","y":3},{"x":"LakehillSoccer","y":3}]}],"width":800,"height":494.4375915527344,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"8e0c572e-7575-4bd8-824a-5ed4636a2343\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"8e0c572e-7575-4bd8-824a-5ed4636a2343\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"8e0c572e-7575-4bd8-824a-5ed4636a2343\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"8e0c572e-7575-4bd8-824a-5ed4636a2343\", :values ({:x \"welt\", :y 10} {:x \"AufstandS21\", :y 6} {:x \"olaf26\", :y 3} {:x \"Welatpiraz\", :y 3} {:x \"frisch_fish\", :y 3} {:x \"rapic2012\", :y 3} {:x \"jep_\", :y 3} {:x \"Ibicis\", :y 3} {:x \"thetruemoeckert\", :y 3} {:x \"LakehillSoccer\", :y 3})}], :width 800, :height 494.4376, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ### Delay Distribution
;;; Reaction's delay of an article in minutes.
;; **

;; @@
(let [delays (->> some-tree :analysis :delays (map #(float (/ % 60))))]
  (plot/histogram delays :plot-size 900))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"a2e7b181-1f0c-44d0-912d-e03beb39afae","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"a2e7b181-1f0c-44d0-912d-e03beb39afae","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"a2e7b181-1f0c-44d0-912d-e03beb39afae"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"a2e7b181-1f0c-44d0-912d-e03beb39afae","values":[{"x":0.0,"y":0},{"x":1888.1066406250004,"y":461.0},{"x":3776.213281250001,"y":6.0},{"x":5664.3199218750015,"y":6.0},{"x":7552.426562500002,"y":3.0},{"x":9440.533203125002,"y":0.0},{"x":11328.639843750003,"y":0.0},{"x":13216.746484375004,"y":2.0},{"x":15104.853125000005,"y":0.0},{"x":16992.959765625004,"y":0.0},{"x":18881.066406250004,"y":1.0},{"x":20769.173046875003,"y":0}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"a2e7b181-1f0c-44d0-912d-e03beb39afae\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"a2e7b181-1f0c-44d0-912d-e03beb39afae\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"a2e7b181-1f0c-44d0-912d-e03beb39afae\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"a2e7b181-1f0c-44d0-912d-e03beb39afae\", :values ({:x 0.0, :y 0} {:x 1888.1066406250004, :y 461.0} {:x 3776.213281250001, :y 6.0} {:x 5664.3199218750015, :y 6.0} {:x 7552.426562500002, :y 3.0} {:x 9440.533203125002, :y 0.0} {:x 11328.639843750003, :y 0.0} {:x 13216.746484375004, :y 2.0} {:x 15104.853125000005, :y 0.0} {:x 16992.959765625004, :y 0.0} {:x 18881.066406250004, :y 1.0} {:x 20769.173046875003, :y 0})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ### Example Summary
;; **

;; @@
(def dpa-summary (compute-summary "dpa"))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/dpa-summary</span>","value":"#'unsightly-reserve/dpa-summary"}
;; <=

;; @@
(keys dpa-summary)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:source :article-count :analytics :total-impact :avg-impact :no-reactions :avg-height)</span>","value":"(:source :article-count :analytics :total-impact :avg-impact :no-reactions :avg-height)"}
;; <=

;; @@
(dissoc dpa-summary :analytics :pub-times)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-string'>&quot;dpa&quot;</span>","value":"\"dpa\""}],"value":"[:source \"dpa\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:article-count</span>","value":":article-count"},{"type":"html","content":"<span class='clj-unkown'>965</span>","value":"965"}],"value":"[:article-count 965]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:total-impact</span>","value":":total-impact"},{"type":"html","content":"<span class='clj-long'>4811</span>","value":"4811"}],"value":"[:total-impact 4811]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:avg-impact</span>","value":":avg-impact"},{"type":"html","content":"<span class='clj-unkown'>4.985492</span>","value":"4.985492"}],"value":"[:avg-impact 4.985492]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:no-reactions</span>","value":":no-reactions"},{"type":"html","content":"<span class='clj-unkown'>0.19170985</span>","value":"0.19170985"}],"value":"[:no-reactions 0.19170985]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:avg-height</span>","value":":avg-height"},{"type":"html","content":"<span class='clj-unkown'>0.98031086</span>","value":"0.98031086"}],"value":"[:avg-height 0.98031086]"}],"value":"{:source \"dpa\", :article-count 965, :total-impact 4811, :avg-impact 4.985492, :no-reactions 0.19170985, :avg-height 0.98031086}"}
;; <=

;; @@
(-> dpa-summary :analytics first keys)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:size :height :users :pub-times :hashtags :delays)</span>","value":"(:size :height :users :pub-times :hashtags :delays)"}
;; <=

;; @@
(let [sizes (->> dpa-summary :analytics (map :size))]
  (plot/histogram sizes :plot-size 900 :bins 100))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"69d6f730-97cd-462b-8ec5-6e1cabd31353","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"69d6f730-97cd-462b-8ec5-6e1cabd31353","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"69d6f730-97cd-462b-8ec5-6e1cabd31353"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"69d6f730-97cd-462b-8ec5-6e1cabd31353","values":[{"x":1.0,"y":0},{"x":1.56,"y":185.0},{"x":2.12,"y":112.0},{"x":2.68,"y":0.0},{"x":3.24,"y":149.0},{"x":3.8000000000000003,"y":0.0},{"x":4.36,"y":112.0},{"x":4.92,"y":0.0},{"x":5.48,"y":101.0},{"x":6.040000000000001,"y":76.0},{"x":6.600000000000001,"y":0.0},{"x":7.160000000000002,"y":48.0},{"x":7.720000000000002,"y":0.0},{"x":8.280000000000003,"y":42.0},{"x":8.840000000000003,"y":0.0},{"x":9.400000000000004,"y":40.0},{"x":9.960000000000004,"y":0.0},{"x":10.520000000000005,"y":24.0},{"x":11.080000000000005,"y":20.0},{"x":11.640000000000006,"y":0.0},{"x":12.200000000000006,"y":7.0},{"x":12.760000000000007,"y":0.0},{"x":13.320000000000007,"y":3.0},{"x":13.880000000000008,"y":0.0},{"x":14.440000000000008,"y":9.0},{"x":15.000000000000009,"y":5.0},{"x":15.56000000000001,"y":0.0},{"x":16.120000000000008,"y":4.0},{"x":16.680000000000007,"y":0.0},{"x":17.240000000000006,"y":3.0},{"x":17.800000000000004,"y":0.0},{"x":18.360000000000003,"y":6.0},{"x":18.92,"y":0.0},{"x":19.48,"y":3.0},{"x":20.04,"y":1.0},{"x":20.599999999999998,"y":0.0},{"x":21.159999999999997,"y":2.0},{"x":21.719999999999995,"y":0.0},{"x":22.279999999999994,"y":2.0},{"x":22.839999999999993,"y":0.0},{"x":23.39999999999999,"y":6.0},{"x":23.95999999999999,"y":0.0},{"x":24.51999999999999,"y":0.0},{"x":25.079999999999988,"y":0.0},{"x":25.639999999999986,"y":0.0},{"x":26.199999999999985,"y":1.0},{"x":26.759999999999984,"y":0.0},{"x":27.319999999999983,"y":1.0},{"x":27.87999999999998,"y":0.0},{"x":28.43999999999998,"y":0.0},{"x":28.99999999999998,"y":0.0},{"x":29.559999999999977,"y":0.0},{"x":30.119999999999976,"y":0.0},{"x":30.679999999999975,"y":0.0},{"x":31.239999999999974,"y":0.0},{"x":31.799999999999972,"y":0.0},{"x":32.35999999999997,"y":0.0},{"x":32.91999999999997,"y":0.0},{"x":33.479999999999976,"y":0.0},{"x":34.03999999999998,"y":0.0},{"x":34.59999999999998,"y":0.0},{"x":35.15999999999998,"y":0.0},{"x":35.719999999999985,"y":0.0},{"x":36.27999999999999,"y":0.0},{"x":36.83999999999999,"y":0.0},{"x":37.39999999999999,"y":0.0},{"x":37.959999999999994,"y":0.0},{"x":38.519999999999996,"y":0.0},{"x":39.08,"y":0.0},{"x":39.64,"y":0.0},{"x":40.2,"y":1.0},{"x":40.760000000000005,"y":0.0},{"x":41.32000000000001,"y":0.0},{"x":41.88000000000001,"y":0.0},{"x":42.44000000000001,"y":0.0},{"x":43.000000000000014,"y":0.0},{"x":43.56000000000002,"y":0.0},{"x":44.12000000000002,"y":0.0},{"x":44.68000000000002,"y":0.0},{"x":45.24000000000002,"y":0.0},{"x":45.800000000000026,"y":0.0},{"x":46.36000000000003,"y":0.0},{"x":46.92000000000003,"y":0.0},{"x":47.48000000000003,"y":0.0},{"x":48.040000000000035,"y":0.0},{"x":48.60000000000004,"y":0.0},{"x":49.16000000000004,"y":0.0},{"x":49.72000000000004,"y":0.0},{"x":50.280000000000044,"y":0.0},{"x":50.840000000000046,"y":0.0},{"x":51.40000000000005,"y":0.0},{"x":51.96000000000005,"y":0.0},{"x":52.52000000000005,"y":0.0},{"x":53.080000000000055,"y":0.0},{"x":53.64000000000006,"y":0.0},{"x":54.20000000000006,"y":0.0},{"x":54.76000000000006,"y":0.0},{"x":55.320000000000064,"y":0.0},{"x":55.88000000000007,"y":0.0},{"x":56.44000000000007,"y":1.0},{"x":57.00000000000007,"y":1.0},{"x":57.56000000000007,"y":0}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"69d6f730-97cd-462b-8ec5-6e1cabd31353\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"69d6f730-97cd-462b-8ec5-6e1cabd31353\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"69d6f730-97cd-462b-8ec5-6e1cabd31353\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"69d6f730-97cd-462b-8ec5-6e1cabd31353\", :values ({:x 1.0, :y 0} {:x 1.56, :y 185.0} {:x 2.12, :y 112.0} {:x 2.68, :y 0.0} {:x 3.24, :y 149.0} {:x 3.8000000000000003, :y 0.0} {:x 4.36, :y 112.0} {:x 4.92, :y 0.0} {:x 5.48, :y 101.0} {:x 6.040000000000001, :y 76.0} {:x 6.600000000000001, :y 0.0} {:x 7.160000000000002, :y 48.0} {:x 7.720000000000002, :y 0.0} {:x 8.280000000000003, :y 42.0} {:x 8.840000000000003, :y 0.0} {:x 9.400000000000004, :y 40.0} {:x 9.960000000000004, :y 0.0} {:x 10.520000000000005, :y 24.0} {:x 11.080000000000005, :y 20.0} {:x 11.640000000000006, :y 0.0} {:x 12.200000000000006, :y 7.0} {:x 12.760000000000007, :y 0.0} {:x 13.320000000000007, :y 3.0} {:x 13.880000000000008, :y 0.0} {:x 14.440000000000008, :y 9.0} {:x 15.000000000000009, :y 5.0} {:x 15.56000000000001, :y 0.0} {:x 16.120000000000008, :y 4.0} {:x 16.680000000000007, :y 0.0} {:x 17.240000000000006, :y 3.0} {:x 17.800000000000004, :y 0.0} {:x 18.360000000000003, :y 6.0} {:x 18.92, :y 0.0} {:x 19.48, :y 3.0} {:x 20.04, :y 1.0} {:x 20.599999999999998, :y 0.0} {:x 21.159999999999997, :y 2.0} {:x 21.719999999999995, :y 0.0} {:x 22.279999999999994, :y 2.0} {:x 22.839999999999993, :y 0.0} {:x 23.39999999999999, :y 6.0} {:x 23.95999999999999, :y 0.0} {:x 24.51999999999999, :y 0.0} {:x 25.079999999999988, :y 0.0} {:x 25.639999999999986, :y 0.0} {:x 26.199999999999985, :y 1.0} {:x 26.759999999999984, :y 0.0} {:x 27.319999999999983, :y 1.0} {:x 27.87999999999998, :y 0.0} {:x 28.43999999999998, :y 0.0} {:x 28.99999999999998, :y 0.0} {:x 29.559999999999977, :y 0.0} {:x 30.119999999999976, :y 0.0} {:x 30.679999999999975, :y 0.0} {:x 31.239999999999974, :y 0.0} {:x 31.799999999999972, :y 0.0} {:x 32.35999999999997, :y 0.0} {:x 32.91999999999997, :y 0.0} {:x 33.479999999999976, :y 0.0} {:x 34.03999999999998, :y 0.0} {:x 34.59999999999998, :y 0.0} {:x 35.15999999999998, :y 0.0} {:x 35.719999999999985, :y 0.0} {:x 36.27999999999999, :y 0.0} {:x 36.83999999999999, :y 0.0} {:x 37.39999999999999, :y 0.0} {:x 37.959999999999994, :y 0.0} {:x 38.519999999999996, :y 0.0} {:x 39.08, :y 0.0} {:x 39.64, :y 0.0} {:x 40.2, :y 1.0} {:x 40.760000000000005, :y 0.0} {:x 41.32000000000001, :y 0.0} {:x 41.88000000000001, :y 0.0} {:x 42.44000000000001, :y 0.0} {:x 43.000000000000014, :y 0.0} {:x 43.56000000000002, :y 0.0} {:x 44.12000000000002, :y 0.0} {:x 44.68000000000002, :y 0.0} {:x 45.24000000000002, :y 0.0} {:x 45.800000000000026, :y 0.0} {:x 46.36000000000003, :y 0.0} {:x 46.92000000000003, :y 0.0} {:x 47.48000000000003, :y 0.0} {:x 48.040000000000035, :y 0.0} {:x 48.60000000000004, :y 0.0} {:x 49.16000000000004, :y 0.0} {:x 49.72000000000004, :y 0.0} {:x 50.280000000000044, :y 0.0} {:x 50.840000000000046, :y 0.0} {:x 51.40000000000005, :y 0.0} {:x 51.96000000000005, :y 0.0} {:x 52.52000000000005, :y 0.0} {:x 53.080000000000055, :y 0.0} {:x 53.64000000000006, :y 0.0} {:x 54.20000000000006, :y 0.0} {:x 54.76000000000006, :y 0.0} {:x 55.320000000000064, :y 0.0} {:x 55.88000000000007, :y 0.0} {:x 56.44000000000007, :y 1.0} {:x 57.00000000000007, :y 1.0} {:x 57.56000000000007, :y 0})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(let [delays (->> dpa-summary
                  :analytics
                  (map :delays)
                  (map (fn [ds] (/ (reduce + ds) (count ds) 60)))
                  (remove #(> % 1440)))]
  (plot/histogram delays :plot-size 900 :bins 100))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"12db4ced-ee32-4b85-8ae0-7ebe1c800da5","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"12db4ced-ee32-4b85-8ae0-7ebe1c800da5","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"12db4ced-ee32-4b85-8ae0-7ebe1c800da5"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"12db4ced-ee32-4b85-8ae0-7ebe1c800da5","values":[{"x":0.0,"y":0},{"x":13.507833333333332,"y":477.0},{"x":27.015666666666664,"y":119.0},{"x":40.5235,"y":80.0},{"x":54.03133333333333,"y":53.0},{"x":67.53916666666666,"y":35.0},{"x":81.047,"y":31.0},{"x":94.55483333333333,"y":25.0},{"x":108.06266666666667,"y":20.0},{"x":121.57050000000001,"y":15.0},{"x":135.07833333333335,"y":15.0},{"x":148.58616666666668,"y":7.0},{"x":162.09400000000002,"y":6.0},{"x":175.60183333333336,"y":7.0},{"x":189.1096666666667,"y":3.0},{"x":202.61750000000004,"y":8.0},{"x":216.12533333333337,"y":3.0},{"x":229.6331666666667,"y":4.0},{"x":243.14100000000005,"y":2.0},{"x":256.64883333333336,"y":3.0},{"x":270.1566666666667,"y":1.0},{"x":283.66450000000003,"y":2.0},{"x":297.17233333333337,"y":2.0},{"x":310.6801666666667,"y":2.0},{"x":324.18800000000005,"y":0.0},{"x":337.6958333333334,"y":1.0},{"x":351.2036666666667,"y":1.0},{"x":364.71150000000006,"y":0.0},{"x":378.2193333333334,"y":3.0},{"x":391.72716666666673,"y":0.0},{"x":405.23500000000007,"y":0.0},{"x":418.7428333333334,"y":4.0},{"x":432.25066666666675,"y":0.0},{"x":445.7585000000001,"y":0.0},{"x":459.2663333333334,"y":0.0},{"x":472.77416666666676,"y":1.0},{"x":486.2820000000001,"y":1.0},{"x":499.78983333333343,"y":1.0},{"x":513.2976666666667,"y":0.0},{"x":526.8055,"y":0.0},{"x":540.3133333333334,"y":2.0},{"x":553.8211666666667,"y":0.0},{"x":567.3290000000001,"y":1.0},{"x":580.8368333333334,"y":0.0},{"x":594.3446666666667,"y":0.0},{"x":607.8525000000001,"y":3.0},{"x":621.3603333333334,"y":0.0},{"x":634.8681666666668,"y":1.0},{"x":648.3760000000001,"y":0.0},{"x":661.8838333333334,"y":0.0},{"x":675.3916666666668,"y":1.0},{"x":688.8995000000001,"y":0.0},{"x":702.4073333333334,"y":1.0},{"x":715.9151666666668,"y":0.0},{"x":729.4230000000001,"y":0.0},{"x":742.9308333333335,"y":1.0},{"x":756.4386666666668,"y":0.0},{"x":769.9465000000001,"y":2.0},{"x":783.4543333333335,"y":0.0},{"x":796.9621666666668,"y":0.0},{"x":810.4700000000001,"y":0.0},{"x":823.9778333333335,"y":1.0},{"x":837.4856666666668,"y":0.0},{"x":850.9935000000002,"y":1.0},{"x":864.5013333333335,"y":0.0},{"x":878.0091666666668,"y":0.0},{"x":891.5170000000002,"y":0.0},{"x":905.0248333333335,"y":0.0},{"x":918.5326666666668,"y":0.0},{"x":932.0405000000002,"y":1.0},{"x":945.5483333333335,"y":0.0},{"x":959.0561666666669,"y":1.0},{"x":972.5640000000002,"y":0.0},{"x":986.0718333333335,"y":1.0},{"x":999.5796666666669,"y":1.0},{"x":1013.0875000000002,"y":0.0},{"x":1026.5953333333334,"y":2.0},{"x":1040.1031666666668,"y":0.0},{"x":1053.611,"y":0.0},{"x":1067.1188333333334,"y":0.0},{"x":1080.6266666666668,"y":0.0},{"x":1094.1345000000001,"y":0.0},{"x":1107.6423333333335,"y":0.0},{"x":1121.1501666666668,"y":0.0},{"x":1134.6580000000001,"y":0.0},{"x":1148.1658333333335,"y":0.0},{"x":1161.6736666666668,"y":1.0},{"x":1175.1815000000001,"y":0.0},{"x":1188.6893333333335,"y":1.0},{"x":1202.1971666666668,"y":0.0},{"x":1215.7050000000002,"y":1.0},{"x":1229.2128333333335,"y":0.0},{"x":1242.7206666666668,"y":0.0},{"x":1256.2285000000002,"y":0.0},{"x":1269.7363333333335,"y":0.0},{"x":1283.2441666666668,"y":0.0},{"x":1296.7520000000002,"y":0.0},{"x":1310.2598333333335,"y":0.0},{"x":1323.7676666666669,"y":0.0},{"x":1337.2755000000002,"y":0.0},{"x":1350.7833333333335,"y":1.0},{"x":1364.2911666666669,"y":0}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"12db4ced-ee32-4b85-8ae0-7ebe1c800da5\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"12db4ced-ee32-4b85-8ae0-7ebe1c800da5\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"12db4ced-ee32-4b85-8ae0-7ebe1c800da5\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"12db4ced-ee32-4b85-8ae0-7ebe1c800da5\", :values ({:x 0.0, :y 0} {:x 13.507833333333332, :y 477.0} {:x 27.015666666666664, :y 119.0} {:x 40.5235, :y 80.0} {:x 54.03133333333333, :y 53.0} {:x 67.53916666666666, :y 35.0} {:x 81.047, :y 31.0} {:x 94.55483333333333, :y 25.0} {:x 108.06266666666667, :y 20.0} {:x 121.57050000000001, :y 15.0} {:x 135.07833333333335, :y 15.0} {:x 148.58616666666668, :y 7.0} {:x 162.09400000000002, :y 6.0} {:x 175.60183333333336, :y 7.0} {:x 189.1096666666667, :y 3.0} {:x 202.61750000000004, :y 8.0} {:x 216.12533333333337, :y 3.0} {:x 229.6331666666667, :y 4.0} {:x 243.14100000000005, :y 2.0} {:x 256.64883333333336, :y 3.0} {:x 270.1566666666667, :y 1.0} {:x 283.66450000000003, :y 2.0} {:x 297.17233333333337, :y 2.0} {:x 310.6801666666667, :y 2.0} {:x 324.18800000000005, :y 0.0} {:x 337.6958333333334, :y 1.0} {:x 351.2036666666667, :y 1.0} {:x 364.71150000000006, :y 0.0} {:x 378.2193333333334, :y 3.0} {:x 391.72716666666673, :y 0.0} {:x 405.23500000000007, :y 0.0} {:x 418.7428333333334, :y 4.0} {:x 432.25066666666675, :y 0.0} {:x 445.7585000000001, :y 0.0} {:x 459.2663333333334, :y 0.0} {:x 472.77416666666676, :y 1.0} {:x 486.2820000000001, :y 1.0} {:x 499.78983333333343, :y 1.0} {:x 513.2976666666667, :y 0.0} {:x 526.8055, :y 0.0} {:x 540.3133333333334, :y 2.0} {:x 553.8211666666667, :y 0.0} {:x 567.3290000000001, :y 1.0} {:x 580.8368333333334, :y 0.0} {:x 594.3446666666667, :y 0.0} {:x 607.8525000000001, :y 3.0} {:x 621.3603333333334, :y 0.0} {:x 634.8681666666668, :y 1.0} {:x 648.3760000000001, :y 0.0} {:x 661.8838333333334, :y 0.0} {:x 675.3916666666668, :y 1.0} {:x 688.8995000000001, :y 0.0} {:x 702.4073333333334, :y 1.0} {:x 715.9151666666668, :y 0.0} {:x 729.4230000000001, :y 0.0} {:x 742.9308333333335, :y 1.0} {:x 756.4386666666668, :y 0.0} {:x 769.9465000000001, :y 2.0} {:x 783.4543333333335, :y 0.0} {:x 796.9621666666668, :y 0.0} {:x 810.4700000000001, :y 0.0} {:x 823.9778333333335, :y 1.0} {:x 837.4856666666668, :y 0.0} {:x 850.9935000000002, :y 1.0} {:x 864.5013333333335, :y 0.0} {:x 878.0091666666668, :y 0.0} {:x 891.5170000000002, :y 0.0} {:x 905.0248333333335, :y 0.0} {:x 918.5326666666668, :y 0.0} {:x 932.0405000000002, :y 1.0} {:x 945.5483333333335, :y 0.0} {:x 959.0561666666669, :y 1.0} {:x 972.5640000000002, :y 0.0} {:x 986.0718333333335, :y 1.0} {:x 999.5796666666669, :y 1.0} {:x 1013.0875000000002, :y 0.0} {:x 1026.5953333333334, :y 2.0} {:x 1040.1031666666668, :y 0.0} {:x 1053.611, :y 0.0} {:x 1067.1188333333334, :y 0.0} {:x 1080.6266666666668, :y 0.0} {:x 1094.1345000000001, :y 0.0} {:x 1107.6423333333335, :y 0.0} {:x 1121.1501666666668, :y 0.0} {:x 1134.6580000000001, :y 0.0} {:x 1148.1658333333335, :y 0.0} {:x 1161.6736666666668, :y 1.0} {:x 1175.1815000000001, :y 0.0} {:x 1188.6893333333335, :y 1.0} {:x 1202.1971666666668, :y 0.0} {:x 1215.7050000000002, :y 1.0} {:x 1229.2128333333335, :y 0.0} {:x 1242.7206666666668, :y 0.0} {:x 1256.2285000000002, :y 0.0} {:x 1269.7363333333335, :y 0.0} {:x 1283.2441666666668, :y 0.0} {:x 1296.7520000000002, :y 0.0} {:x 1310.2598333333335, :y 0.0} {:x 1323.7676666666669, :y 0.0} {:x 1337.2755000000002, :y 0.0} {:x 1350.7833333333335, :y 1.0} {:x 1364.2911666666669, :y 0})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(let [heights (->> dpa-summary :analytics (map :height))]
  (plot/histogram heights :plot-size 900 :bins 10))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e","values":[{"x":0.0,"y":0},{"x":0.7000000000000001,"y":185.0},{"x":1.4000000000000001,"y":661.0},{"x":2.1,"y":92.0},{"x":2.8000000000000003,"y":0.0},{"x":3.5000000000000004,"y":15.0},{"x":4.2,"y":8.0},{"x":4.9,"y":0.0},{"x":5.6000000000000005,"y":1.0},{"x":6.300000000000001,"y":2.0},{"x":7.000000000000001,"y":1.0},{"x":7.700000000000001,"y":0}]}],"width":900,"height":556.2422485351562,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"26d75bbd-1c8a-4322-8af8-d0cdeb515d2e\", :values ({:x 0.0, :y 0} {:x 0.7000000000000001, :y 185.0} {:x 1.4000000000000001, :y 661.0} {:x 2.1, :y 92.0} {:x 2.8000000000000003, :y 0.0} {:x 3.5000000000000004, :y 15.0} {:x 4.2, :y 8.0} {:x 4.9, :y 0.0} {:x 5.6000000000000005, :y 1.0} {:x 6.300000000000001, :y 2.0} {:x 7.000000000000001, :y 1.0} {:x 7.700000000000001, :y 0})}], :width 900, :height 556.24225, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(let [hashtags (->> dpa-summary
                  :analytics
                  (map :hashtags)
                  (apply concat)
                  (remove #{"dpa" "dpavolo"})
                  frequencies
                  (sort-by second >)
                  (take 20))]
  [(keys hashtags)
  (plot/bar-chart (keys hashtags) (vals hashtags) :plot-size 1000)])
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>(&quot;ebola&quot; &quot;is&quot; &quot;sltw14&quot; &quot;wowereit&quot; &quot;ferguson&quot; &quot;snowden&quot; &quot;hongkong&quot; &quot;nsu&quot; &quot;uber&quot; &quot;afd&quot; &quot;indyref&quot; &quot;mh17&quot; &quot;china&quot; &quot;icebucketchallenge&quot; &quot;apple&quot; &quot;nsa&quot; &quot;news&quot; &quot;n24&quot; &quot;piraten&quot; &quot;tohti&quot;)</span>","value":"(\"ebola\" \"is\" \"sltw14\" \"wowereit\" \"ferguson\" \"snowden\" \"hongkong\" \"nsu\" \"uber\" \"afd\" \"indyref\" \"mh17\" \"china\" \"icebucketchallenge\" \"apple\" \"nsa\" \"news\" \"n24\" \"piraten\" \"tohti\")"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"90c80f82-240c-4c0c-ab4c-a783e2a3b731","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"90c80f82-240c-4c0c-ab4c-a783e2a3b731","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"90c80f82-240c-4c0c-ab4c-a783e2a3b731"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"90c80f82-240c-4c0c-ab4c-a783e2a3b731","values":[{"x":"ebola","y":47},{"x":"is","y":45},{"x":"sltw14","y":34},{"x":"wowereit","y":33},{"x":"ferguson","y":30},{"x":"snowden","y":27},{"x":"hongkong","y":25},{"x":"nsu","y":22},{"x":"uber","y":20},{"x":"afd","y":19},{"x":"indyref","y":18},{"x":"mh17","y":17},{"x":"china","y":17},{"x":"icebucketchallenge","y":16},{"x":"apple","y":15},{"x":"nsa","y":15},{"x":"news","y":14},{"x":"n24","y":14},{"x":"piraten","y":14},{"x":"tohti","y":13}]}],"width":1000,"height":618.0469970703125,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :values ({:x \"ebola\", :y 47} {:x \"is\", :y 45} {:x \"sltw14\", :y 34} {:x \"wowereit\", :y 33} {:x \"ferguson\", :y 30} {:x \"snowden\", :y 27} {:x \"hongkong\", :y 25} {:x \"nsu\", :y 22} {:x \"uber\", :y 20} {:x \"afd\", :y 19} {:x \"indyref\", :y 18} {:x \"mh17\", :y 17} {:x \"china\", :y 17} {:x \"icebucketchallenge\", :y 16} {:x \"apple\", :y 15} {:x \"nsa\", :y 15} {:x \"news\", :y 14} {:x \"n24\", :y 14} {:x \"piraten\", :y 14} {:x \"tohti\", :y 13})}], :width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}],"value":"[(\"ebola\" \"is\" \"sltw14\" \"wowereit\" \"ferguson\" \"snowden\" \"hongkong\" \"nsu\" \"uber\" \"afd\" \"indyref\" \"mh17\" \"china\" \"icebucketchallenge\" \"apple\" \"nsa\" \"news\" \"n24\" \"piraten\" \"tohti\") #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"90c80f82-240c-4c0c-ab4c-a783e2a3b731\", :values ({:x \"ebola\", :y 47} {:x \"is\", :y 45} {:x \"sltw14\", :y 34} {:x \"wowereit\", :y 33} {:x \"ferguson\", :y 30} {:x \"snowden\", :y 27} {:x \"hongkong\", :y 25} {:x \"nsu\", :y 22} {:x \"uber\", :y 20} {:x \"afd\", :y 19} {:x \"indyref\", :y 18} {:x \"mh17\", :y 17} {:x \"china\", :y 17} {:x \"icebucketchallenge\", :y 16} {:x \"apple\", :y 15} {:x \"nsa\", :y 15} {:x \"news\", :y 14} {:x \"n24\", :y 14} {:x \"piraten\", :y 14} {:x \"tohti\", :y 13})}], :width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}}}]"}
;; <=

;; @@
(def dpa-users (->> dpa-summary
                  :analytics
                  (map :users)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/dpa-users</span>","value":"#'unsightly-reserve/dpa-users"}
;; <=

;; @@
(let [users (->> dpa-users
                 (apply concat)
                 (remove #{"dpa"})
                 frequencies
                 (sort-by second >)
                 (take 15))]
  [(keys users)
  (plot/bar-chart (keys users) (vals users) :plot-size 1000)])
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>(&quot;Dietmar_Bauer&quot; &quot;alanyanews_eu&quot; &quot;thesirenofangel&quot; &quot;grimneko&quot; &quot;2014FL&quot; &quot;BBattmer&quot; &quot;S_Tagblatt&quot; &quot;Klostifan1981&quot; &quot;ChrisBrey1&quot; &quot;DietrichOpal&quot; &quot;martinromanczyk&quot; &quot;Dennis_Snehotta&quot; &quot;Liane13&quot; &quot;andreaslandwehr&quot; &quot;WOLKEFN&quot;)</span>","value":"(\"Dietmar_Bauer\" \"alanyanews_eu\" \"thesirenofangel\" \"grimneko\" \"2014FL\" \"BBattmer\" \"S_Tagblatt\" \"Klostifan1981\" \"ChrisBrey1\" \"DietrichOpal\" \"martinromanczyk\" \"Dennis_Snehotta\" \"Liane13\" \"andreaslandwehr\" \"WOLKEFN\")"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"1a0f4889-685a-4e77-8947-83dcaa838d4b","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"1a0f4889-685a-4e77-8947-83dcaa838d4b","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"1a0f4889-685a-4e77-8947-83dcaa838d4b"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"1a0f4889-685a-4e77-8947-83dcaa838d4b","values":[{"x":"Dietmar_Bauer","y":120},{"x":"alanyanews_eu","y":55},{"x":"thesirenofangel","y":47},{"x":"grimneko","y":32},{"x":"2014FL","y":30},{"x":"BBattmer","y":30},{"x":"S_Tagblatt","y":29},{"x":"Klostifan1981","y":26},{"x":"ChrisBrey1","y":24},{"x":"DietrichOpal","y":23},{"x":"martinromanczyk","y":22},{"x":"Dennis_Snehotta","y":21},{"x":"Liane13","y":20},{"x":"andreaslandwehr","y":19},{"x":"WOLKEFN","y":19}]}],"width":1000,"height":618.0469970703125,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :values ({:x \"Dietmar_Bauer\", :y 120} {:x \"alanyanews_eu\", :y 55} {:x \"thesirenofangel\", :y 47} {:x \"grimneko\", :y 32} {:x \"2014FL\", :y 30} {:x \"BBattmer\", :y 30} {:x \"S_Tagblatt\", :y 29} {:x \"Klostifan1981\", :y 26} {:x \"ChrisBrey1\", :y 24} {:x \"DietrichOpal\", :y 23} {:x \"martinromanczyk\", :y 22} {:x \"Dennis_Snehotta\", :y 21} {:x \"Liane13\", :y 20} {:x \"andreaslandwehr\", :y 19} {:x \"WOLKEFN\", :y 19})}], :width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}],"value":"[(\"Dietmar_Bauer\" \"alanyanews_eu\" \"thesirenofangel\" \"grimneko\" \"2014FL\" \"BBattmer\" \"S_Tagblatt\" \"Klostifan1981\" \"ChrisBrey1\" \"DietrichOpal\" \"martinromanczyk\" \"Dennis_Snehotta\" \"Liane13\" \"andreaslandwehr\" \"WOLKEFN\") #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"1a0f4889-685a-4e77-8947-83dcaa838d4b\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"1a0f4889-685a-4e77-8947-83dcaa838d4b\", :values ({:x \"Dietmar_Bauer\", :y 120} {:x \"alanyanews_eu\", :y 55} {:x \"thesirenofangel\", :y 47} {:x \"grimneko\", :y 32} {:x \"2014FL\", :y 30} {:x \"BBattmer\", :y 30} {:x \"S_Tagblatt\", :y 29} {:x \"Klostifan1981\", :y 26} {:x \"ChrisBrey1\", :y 24} {:x \"DietrichOpal\", :y 23} {:x \"martinromanczyk\", :y 22} {:x \"Dennis_Snehotta\", :y 21} {:x \"Liane13\", :y 20} {:x \"andreaslandwehr\", :y 19} {:x \"WOLKEFN\", :y 19})}], :width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}}}]"}
;; <=

;; **
;;; ### Unique users
;; **

;; @@
(float (/ (->> dpa-users (apply concat) frequencies vals (remove #(> % 1)) count)
          (->> dpa-users (apply concat) (into #{}) count)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>0.6464471</span>","value":"0.6464471"}
;; <=

;; @@

;; @@

;; **
;;; # August Inspection
;; **

;; @@
(def source-tweet-counts (->> (mc/find-maps @db "users" {:screen_name {$in news-accounts}})
     			    	 (pmap (fn [{:keys [screen_name _id]}] [screen_name (mc/count @db "publications" {:user _id})]))
                         (into {})))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/source-tweet-counts</span>","value":"#'unsightly-reserve/source-tweet-counts"}
;; <=

;; @@
(def source-url-counts (->> (mc/find-maps @db "users" {:screen_name {$in news-accounts}})
                            (pmap (fn [{:keys [screen_name _id]}] [screen_name (mc/count @db "urls" {:user _id})]))
                            (into {})))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/source-url-counts</span>","value":"#'unsightly-reserve/source-url-counts"}
;; <=

;; @@
(plot/compose
  (plot/bar-chart (keys source-tweet-counts) (vals source-tweet-counts) :plot-size 1000  :colour "red")
  (plot/bar-chart (keys source-url-counts) (vals source-url-counts)))
;; @@
;; =>
;;; {"type":"vega","content":{"width":1000,"height":618.0469970703125,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"ff1c3d52-a88d-4701-a8ad-c057738d4b39","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"ff1c3d52-a88d-4701-a8ad-c057738d4b39","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"ff1c3d52-a88d-4701-a8ad-c057738d4b39","values":[{"x":"dpa","y":520},{"x":"tazgezwitscher","y":700},{"x":"BILD","y":1327},{"x":"ZDFheute","y":950},{"x":"FAZ_NET","y":2919},{"x":"focusonline","y":271},{"x":"welt","y":1992},{"x":"N24_de","y":1962},{"x":"DerWesten","y":947},{"x":"SPIEGELONLINE","y":1765},{"x":"ntvde","y":1816},{"x":"tagesschau","y":1738},{"x":"SZ","y":1617},{"x":"sternde","y":982}]},{"name":"f45e11e2-50b3-45f8-b49a-6b6b8907edf5","values":[{"x":"dpa","y":445},{"x":"tazgezwitscher","y":639},{"x":"BILD","y":983},{"x":"ZDFheute","y":530},{"x":"FAZ_NET","y":2187},{"x":"focusonline","y":266},{"x":"welt","y":1798},{"x":"N24_de","y":1940},{"x":"DerWesten","y":854},{"x":"SPIEGELONLINE","y":1643},{"x":"ntvde","y":1793},{"x":"tagesschau","y":1282},{"x":"SZ","y":1525},{"x":"sternde","y":895}]}],"marks":[{"type":"rect","from":{"data":"ff1c3d52-a88d-4701-a8ad-c057738d4b39"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"red"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}},{"type":"rect","from":{"data":"f45e11e2-50b3-45f8-b49a-6b6b8907edf5"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 1000, :height 618.047, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"ff1c3d52-a88d-4701-a8ad-c057738d4b39\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"ff1c3d52-a88d-4701-a8ad-c057738d4b39\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"ff1c3d52-a88d-4701-a8ad-c057738d4b39\", :values ({:x \"dpa\", :y 520} {:x \"tazgezwitscher\", :y 700} {:x \"BILD\", :y 1327} {:x \"ZDFheute\", :y 950} {:x \"FAZ_NET\", :y 2919} {:x \"focusonline\", :y 271} {:x \"welt\", :y 1992} {:x \"N24_de\", :y 1962} {:x \"DerWesten\", :y 947} {:x \"SPIEGELONLINE\", :y 1765} {:x \"ntvde\", :y 1816} {:x \"tagesschau\", :y 1738} {:x \"SZ\", :y 1617} {:x \"sternde\", :y 982})} {:name \"f45e11e2-50b3-45f8-b49a-6b6b8907edf5\", :values ({:x \"dpa\", :y 445} {:x \"tazgezwitscher\", :y 639} {:x \"BILD\", :y 983} {:x \"ZDFheute\", :y 530} {:x \"FAZ_NET\", :y 2187} {:x \"focusonline\", :y 266} {:x \"welt\", :y 1798} {:x \"N24_de\", :y 1940} {:x \"DerWesten\", :y 854} {:x \"SPIEGELONLINE\", :y 1643} {:x \"ntvde\", :y 1793} {:x \"tagesschau\", :y 1282} {:x \"SZ\", :y 1525} {:x \"sternde\", :y 895})}), :marks ({:type \"rect\", :from {:data \"ff1c3d52-a88d-4701-a8ad-c057738d4b39\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"red\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}} {:type \"rect\", :from {:data \"f45e11e2-50b3-45f8-b49a-6b6b8907edf5\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}})}}"}
;; <=

;; **
;;; # Overall Statistics
;; **

;; **
;;; ## Tree Size (Degree)
;; **

;; @@
(def short-summary
  (let [users (map :_id (mc/find-maps @db "users" {:screen_name {$in news-accounts}}))
        reaction-forest (pmap #(analyzer/reaction-tree (:_id %)) (mc/find-maps @db "publications" {:user {$in users}}))]
         (pmap summary reaction-forest)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/short-summary</span>","value":"#'unsightly-reserve/short-summary"}
;; <=

;; @@
(short-metrics (map :size short-summary))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>6.256382651491848</span>","value":"6.256382651491848"}],"value":"[:mean 6.256382651491848]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>9.295702839327964</span>","value":"9.295702839327964"}],"value":"[:std 9.295702839327964]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 3.0 8.0 207.0)</span>","value":"(1.0 1.0 3.0 8.0 207.0)"}],"value":"[:quantiles (1.0 1.0 3.0 8.0 207.0)]"}],"value":"{:mean 6.256382651491848, :std 9.295702839327964, :quantiles (1.0 1.0 3.0 8.0 207.0)}"}
;; <=

;; @@
(let [sizes (map :size short-summary)
      size-freq (frequencies sizes)
      counter (count sizes)
      freq-vec (->> (map vector (keys size-freq) (vals size-freq))
                    (map (fn [[k v]] [(Math/log10 k) (/ v counter)]))
                    (sort-by first >))]
  (plot/list-plot freq-vec :joined true))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"cf528214-6982-4aaa-9ef1-9167184fd8ba","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"cf528214-6982-4aaa-9ef1-9167184fd8ba","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"cf528214-6982-4aaa-9ef1-9167184fd8ba"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"cf528214-6982-4aaa-9ef1-9167184fd8ba","values":[{"x":2.315970345456918,"y":5.126627704296114E-5},{"x":2.307496037913213,"y":5.126627704296114E-5},{"x":2.3010299956639813,"y":5.126627704296114E-5},{"x":2.296665190261531,"y":5.126627704296114E-5},{"x":2.292256071356476,"y":5.126627704296114E-5},{"x":2.2671717284030137,"y":5.126627704296114E-5},{"x":2.2278867046136734,"y":5.126627704296114E-5},{"x":2.1903316981702914,"y":5.126627704296114E-5},{"x":2.1522883443830563,"y":5.126627704296114E-5},{"x":2.1335389083702174,"y":5.126627704296114E-5},{"x":2.100370545117563,"y":1.025325540859223E-4},{"x":2.093421685162235,"y":5.126627704296114E-5},{"x":2.089905111439398,"y":5.126627704296114E-5},{"x":2.0863598306747484,"y":5.126627704296114E-5},{"x":2.0827853703164503,"y":5.126627704296114E-5},{"x":2.041392685158225,"y":5.126627704296114E-5},{"x":2.0293837776852097,"y":5.126627704296114E-5},{"x":2.0170333392987803,"y":5.126627704296114E-5},{"x":2.0086001717619175,"y":5.126627704296114E-5},{"x":1.9912260756924949,"y":5.126627704296114E-5},{"x":1.9867717342662448,"y":5.126627704296114E-5},{"x":1.9822712330395684,"y":1.025325540859223E-4},{"x":1.9731278535996986,"y":5.126627704296114E-5},{"x":1.9590413923210936,"y":5.126627704296114E-5},{"x":1.954242509439325,"y":5.126627704296114E-5},{"x":1.9493900066449128,"y":1.025325540859223E-4},{"x":1.9344984512435677,"y":2.563313852148057E-4},{"x":1.9084850188786497,"y":1.025325540859223E-4},{"x":1.8976270912904414,"y":1.025325540859223E-4},{"x":1.8920946026904804,"y":1.025325540859223E-4},{"x":1.8864907251724818,"y":5.126627704296114E-5},{"x":1.8808135922807914,"y":1.025325540859223E-4},{"x":1.8750612633917,"y":5.126627704296114E-5},{"x":1.8692317197309762,"y":1.025325540859223E-4},{"x":1.8573324964312685,"y":1.025325540859223E-4},{"x":1.8512583487190752,"y":2.050651081718446E-4},{"x":1.845098040014257,"y":2.050651081718446E-4},{"x":1.8388490907372552,"y":1.537988311288834E-4},{"x":1.8325089127062364,"y":5.126627704296114E-5},{"x":1.8260748027008264,"y":1.025325540859223E-4},{"x":1.8195439355418688,"y":5.126627704296114E-5},{"x":1.8129133566428555,"y":1.025325540859223E-4},{"x":1.7993405494535817,"y":1.537988311288834E-4},{"x":1.792391689498254,"y":1.537988311288834E-4},{"x":1.7853298350107671,"y":2.563313852148057E-4},{"x":1.7781512503836436,"y":1.537988311288834E-4},{"x":1.7708520116421442,"y":3.58863939300728E-4},{"x":1.7634279935629373,"y":1.025325540859223E-4},{"x":1.7558748556724915,"y":5.126627704296114E-5},{"x":1.7481880270062005,"y":2.050651081718446E-4},{"x":1.7403626894942439,"y":2.563313852148057E-4},{"x":1.7323937598229686,"y":2.050651081718446E-4},{"x":1.724275869600789,"y":1.537988311288834E-4},{"x":1.7160033436347992,"y":1.537988311288834E-4},{"x":1.7075701760979363,"y":2.563313852148057E-4},{"x":1.6989700043360187,"y":6.664616015584948E-4},{"x":1.6901960800285136,"y":4.101302163436891E-4},{"x":1.6812412373755872,"y":2.563313852148057E-4},{"x":1.6720978579357175,"y":3.58863939300728E-4},{"x":1.662757831681574,"y":3.58863939300728E-4},{"x":1.6532125137753437,"y":3.075976622577668E-4},{"x":1.6434526764861874,"y":6.151953245155337E-4},{"x":1.6334684555795864,"y":4.613964933866503E-4},{"x":1.6232492903979006,"y":6.151953245155337E-4},{"x":1.6127838567197355,"y":5.126627704296114E-4},{"x":1.6020599913279623,"y":5.126627704296114E-4},{"x":1.591064607026499,"y":0.001025325540859223},{"x":1.5797835966168101,"y":7.689941556444171E-4},{"x":1.568201724066995,"y":7.689941556444171E-4},{"x":1.5563025007672873,"y":6.151953245155337E-4},{"x":1.5440680443502757,"y":0.001076591817902184},{"x":1.5314789170422551,"y":9.740592638162617E-4},{"x":1.5185139398778875,"y":0.001948118527632523},{"x":1.505149978319906,"y":0.001281656926074029},{"x":1.4913616938342726,"y":0.001486722034245873},{"x":1.4771212547196624,"y":0.001845585973546601},{"x":1.462397997898956,"y":0.001845585973546601},{"x":1.4471580313422192,"y":0.002153183635804368},{"x":1.4313637641589874,"y":0.002306982466933251},{"x":1.414973347970818,"y":0.002563313852148057},{"x":1.3979400086720377,"y":0.002665846406233979},{"x":1.380211241711606,"y":0.002358248743976212},{"x":1.3617278360175928,"y":0.003742438224136163},{"x":1.3424226808222062,"y":0.002922177791448785},{"x":1.3222192947339193,"y":0.004870296319081308},{"x":1.3010299956639813,"y":0.005741823028811648},{"x":1.2787536009528289,"y":0.007484876448272326},{"x":1.255272505103306,"y":0.008253870603916745},{"x":1.2304489213782739,"y":0.007997539218701938},{"x":1.2041199826559248,"y":0.008920332205475239},{"x":1.1760912590556813,"y":0.01132984722649441},{"x":1.146128035678238,"y":0.01317543320004101},{"x":1.1139433523068367,"y":0.01455962268020096},{"x":1.0791812460476249,"y":0.01737926791756383},{"x":1.0413926851582251,"y":0.02081410847944222},{"x":1.0,"y":0.02481287808879319},{"x":0.9542425094393249,"y":0.02993950579308931},{"x":0.9030899869919435,"y":0.03475853583512765},{"x":0.8450980400142568,"y":0.044857992412591},{"x":0.7781512503836436,"y":0.05265046652312109},{"x":0.6989700043360189,"y":0.06326258587101405},{"x":0.6020599913279624,"y":0.07766840972008612},{"x":0.47712125471966244,"y":0.09714959499641136},{"x":0.3010299956639812,"y":0.1209884138213883},{"x":0.0,"y":0.2901671280631601}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"cf528214-6982-4aaa-9ef1-9167184fd8ba\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"cf528214-6982-4aaa-9ef1-9167184fd8ba\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"cf528214-6982-4aaa-9ef1-9167184fd8ba\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"cf528214-6982-4aaa-9ef1-9167184fd8ba\", :values ({:x 2.315970345456918, :y 1/19506} {:x 2.307496037913213, :y 1/19506} {:x 2.3010299956639813, :y 1/19506} {:x 2.296665190261531, :y 1/19506} {:x 2.292256071356476, :y 1/19506} {:x 2.2671717284030137, :y 1/19506} {:x 2.2278867046136734, :y 1/19506} {:x 2.1903316981702914, :y 1/19506} {:x 2.1522883443830563, :y 1/19506} {:x 2.1335389083702174, :y 1/19506} {:x 2.100370545117563, :y 1/9753} {:x 2.093421685162235, :y 1/19506} {:x 2.089905111439398, :y 1/19506} {:x 2.0863598306747484, :y 1/19506} {:x 2.0827853703164503, :y 1/19506} {:x 2.041392685158225, :y 1/19506} {:x 2.0293837776852097, :y 1/19506} {:x 2.0170333392987803, :y 1/19506} {:x 2.0086001717619175, :y 1/19506} {:x 1.9912260756924949, :y 1/19506} {:x 1.9867717342662448, :y 1/19506} {:x 1.9822712330395684, :y 1/9753} {:x 1.9731278535996986, :y 1/19506} {:x 1.9590413923210936, :y 1/19506} {:x 1.954242509439325, :y 1/19506} {:x 1.9493900066449128, :y 1/9753} {:x 1.9344984512435677, :y 5/19506} {:x 1.9084850188786497, :y 1/9753} {:x 1.8976270912904414, :y 1/9753} {:x 1.8920946026904804, :y 1/9753} {:x 1.8864907251724818, :y 1/19506} {:x 1.8808135922807914, :y 1/9753} {:x 1.8750612633917, :y 1/19506} {:x 1.8692317197309762, :y 1/9753} {:x 1.8573324964312685, :y 1/9753} {:x 1.8512583487190752, :y 2/9753} {:x 1.845098040014257, :y 2/9753} {:x 1.8388490907372552, :y 1/6502} {:x 1.8325089127062364, :y 1/19506} {:x 1.8260748027008264, :y 1/9753} {:x 1.8195439355418688, :y 1/19506} {:x 1.8129133566428555, :y 1/9753} {:x 1.7993405494535817, :y 1/6502} {:x 1.792391689498254, :y 1/6502} {:x 1.7853298350107671, :y 5/19506} {:x 1.7781512503836436, :y 1/6502} {:x 1.7708520116421442, :y 7/19506} {:x 1.7634279935629373, :y 1/9753} {:x 1.7558748556724915, :y 1/19506} {:x 1.7481880270062005, :y 2/9753} {:x 1.7403626894942439, :y 5/19506} {:x 1.7323937598229686, :y 2/9753} {:x 1.724275869600789, :y 1/6502} {:x 1.7160033436347992, :y 1/6502} {:x 1.7075701760979363, :y 5/19506} {:x 1.6989700043360187, :y 13/19506} {:x 1.6901960800285136, :y 4/9753} {:x 1.6812412373755872, :y 5/19506} {:x 1.6720978579357175, :y 7/19506} {:x 1.662757831681574, :y 7/19506} {:x 1.6532125137753437, :y 1/3251} {:x 1.6434526764861874, :y 2/3251} {:x 1.6334684555795864, :y 3/6502} {:x 1.6232492903979006, :y 2/3251} {:x 1.6127838567197355, :y 5/9753} {:x 1.6020599913279623, :y 5/9753} {:x 1.591064607026499, :y 10/9753} {:x 1.5797835966168101, :y 5/6502} {:x 1.568201724066995, :y 5/6502} {:x 1.5563025007672873, :y 2/3251} {:x 1.5440680443502757, :y 7/6502} {:x 1.5314789170422551, :y 19/19506} {:x 1.5185139398778875, :y 19/9753} {:x 1.505149978319906, :y 25/19506} {:x 1.4913616938342726, :y 29/19506} {:x 1.4771212547196624, :y 6/3251} {:x 1.462397997898956, :y 6/3251} {:x 1.4471580313422192, :y 7/3251} {:x 1.4313637641589874, :y 15/6502} {:x 1.414973347970818, :y 25/9753} {:x 1.3979400086720377, :y 26/9753} {:x 1.380211241711606, :y 23/9753} {:x 1.3617278360175928, :y 73/19506} {:x 1.3424226808222062, :y 19/6502} {:x 1.3222192947339193, :y 95/19506} {:x 1.3010299956639813, :y 56/9753} {:x 1.2787536009528289, :y 73/9753} {:x 1.255272505103306, :y 161/19506} {:x 1.2304489213782739, :y 26/3251} {:x 1.2041199826559248, :y 29/3251} {:x 1.1760912590556813, :y 221/19506} {:x 1.146128035678238, :y 257/19506} {:x 1.1139433523068367, :y 142/9753} {:x 1.0791812460476249, :y 113/6502} {:x 1.0413926851582251, :y 203/9753} {:x 1.0, :y 242/9753} {:x 0.9542425094393249, :y 292/9753} {:x 0.9030899869919435, :y 113/3251} {:x 0.8450980400142568, :y 875/19506} {:x 0.7781512503836436, :y 1027/19506} {:x 0.6989700043360189, :y 617/9753} {:x 0.6020599913279624, :y 505/6502} {:x 0.47712125471966244, :y 1895/19506} {:x 0.3010299956639812, :y 1180/9753} {:x 0.0, :y 2830/9753})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ### Tree Height
;; **

;; @@
(short-metrics (map :height short-summary))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>0.9199220752588947</span>","value":"0.9199220752588947"}],"value":"[:mean 0.9199220752588947]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>1.2241883778207152</span>","value":"1.2241883778207152"}],"value":"[:std 1.2241883778207152]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(0.0 0.0 1.0 1.0 48.0)</span>","value":"(0.0 0.0 1.0 1.0 48.0)"}],"value":"[:quantiles (0.0 0.0 1.0 1.0 48.0)]"}],"value":"{:mean 0.9199220752588947, :std 1.2241883778207152, :quantiles (0.0 0.0 1.0 1.0 48.0)}"}
;; <=

;; @@
(let [sizes (map :height short-summary)
      size-freq (frequencies sizes)
      counter (count sizes)
      freq-vec (->> (map vector (keys size-freq) (vals size-freq))
                    (map (fn [[k v]] [k (/ v counter)]))
                    (sort-by first >))]
  (plot/list-plot freq-vec :joined true))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"414bce00-432d-485d-bd05-7bf05a90dc43","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"414bce00-432d-485d-bd05-7bf05a90dc43","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"414bce00-432d-485d-bd05-7bf05a90dc43"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"414bce00-432d-485d-bd05-7bf05a90dc43","values":[{"x":48,"y":5.126627704296114E-5},{"x":39,"y":5.126627704296114E-5},{"x":30,"y":1.025325540859223E-4},{"x":26,"y":5.126627704296114E-5},{"x":25,"y":5.126627704296114E-5},{"x":24,"y":1.025325540859223E-4},{"x":23,"y":1.025325540859223E-4},{"x":22,"y":5.126627704296114E-5},{"x":21,"y":5.126627704296114E-5},{"x":20,"y":5.126627704296114E-5},{"x":19,"y":5.126627704296114E-5},{"x":18,"y":5.126627704296114E-5},{"x":16,"y":1.537988311288834E-4},{"x":15,"y":1.025325540859223E-4},{"x":14,"y":5.126627704296114E-5},{"x":13,"y":3.075976622577668E-4},{"x":12,"y":3.58863939300728E-4},{"x":11,"y":1.537988311288834E-4},{"x":10,"y":5.126627704296114E-4},{"x":9,"y":5.639290474725725E-4},{"x":8,"y":0.001076591817902184},{"x":7,"y":0.001640520865374756},{"x":6,"y":0.003024710345534707},{"x":5,"y":0.003383574284835435},{"x":4,"y":0.006664616015584948},{"x":3,"y":0.01758433302573567},{"x":2,"y":0.06685122526402133},{"x":1,"y":0.6066338562493592},{"x":0,"y":0.2901671280631601}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"414bce00-432d-485d-bd05-7bf05a90dc43\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"414bce00-432d-485d-bd05-7bf05a90dc43\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"414bce00-432d-485d-bd05-7bf05a90dc43\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"414bce00-432d-485d-bd05-7bf05a90dc43\", :values ({:x 48, :y 1/19506} {:x 39, :y 1/19506} {:x 30, :y 1/9753} {:x 26, :y 1/19506} {:x 25, :y 1/19506} {:x 24, :y 1/9753} {:x 23, :y 1/9753} {:x 22, :y 1/19506} {:x 21, :y 1/19506} {:x 20, :y 1/19506} {:x 19, :y 1/19506} {:x 18, :y 1/19506} {:x 16, :y 1/6502} {:x 15, :y 1/9753} {:x 14, :y 1/19506} {:x 13, :y 1/3251} {:x 12, :y 7/19506} {:x 11, :y 1/6502} {:x 10, :y 5/9753} {:x 9, :y 11/19506} {:x 8, :y 7/6502} {:x 7, :y 16/9753} {:x 6, :y 59/19506} {:x 5, :y 11/3251} {:x 4, :y 65/9753} {:x 3, :y 343/19506} {:x 2, :y 652/9753} {:x 1, :y 11833/19506} {:x 0, :y 2830/9753})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ## User Posts
;; **

;; @@
(def user-posts
  (->> (mc/find-maps @db "publications")
       (map :user)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/user-posts</span>","value":"#'unsightly-reserve/user-posts"}
;; <=

;; @@
(-> user-posts frequencies vals (quantile :probs [0.0 0.05 0.25 0.5 0.75 0.95 1.0]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 1.0 1.0 2.0 12.0 2919.0)</span>","value":"(1.0 1.0 1.0 1.0 2.0 12.0 2919.0)"}
;; <=

;; @@
(short-metrics (vals (frequencies user-posts)))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>4.3545068996075456</span>","value":"4.3545068996075456"}],"value":"[:mean 4.3545068996075456]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>30.266754180296076</span>","value":"30.266754180296076"}],"value":"[:std 30.266754180296076]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 1.0 2.0 2919.0)</span>","value":"(1.0 1.0 1.0 2.0 2919.0)"}],"value":"[:quantiles (1.0 1.0 1.0 2.0 2919.0)]"}],"value":"{:mean 4.3545068996075456, :std 30.266754180296076, :quantiles (1.0 1.0 1.0 2.0 2919.0)}"}
;; <=

;; @@
(let [counter (count user-posts)
      user-post-freqs (frequencies (vals (frequencies user-posts)))
      freq-vec (->> (map vector (keys user-post-freqs) (vals user-post-freqs))
                    (sort-by second >))]
  (plot/list-plot freq-vec :joined true))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"25b6d613-b852-4d2b-932f-7e96606be51a","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"25b6d613-b852-4d2b-932f-7e96606be51a","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"25b6d613-b852-4d2b-932f-7e96606be51a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"25b6d613-b852-4d2b-932f-7e96606be51a","values":[{"x":1,"y":37814},{"x":2,"y":9598},{"x":3,"y":4355},{"x":4,"y":2582},{"x":5,"y":1599},{"x":6,"y":1117},{"x":7,"y":784},{"x":8,"y":660},{"x":9,"y":507},{"x":10,"y":405},{"x":11,"y":369},{"x":12,"y":290},{"x":14,"y":232},{"x":13,"y":226},{"x":16,"y":173},{"x":15,"y":167},{"x":17,"y":146},{"x":19,"y":131},{"x":18,"y":114},{"x":20,"y":105},{"x":22,"y":93},{"x":21,"y":92},{"x":23,"y":79},{"x":24,"y":71},{"x":25,"y":65},{"x":26,"y":61},{"x":27,"y":58},{"x":29,"y":50},{"x":28,"y":50},{"x":30,"y":47},{"x":31,"y":45},{"x":33,"y":44},{"x":32,"y":43},{"x":35,"y":39},{"x":37,"y":33},{"x":39,"y":30},{"x":44,"y":29},{"x":34,"y":29},{"x":36,"y":27},{"x":48,"y":26},{"x":40,"y":26},{"x":42,"y":24},{"x":46,"y":23},{"x":41,"y":21},{"x":38,"y":21},{"x":43,"y":19},{"x":45,"y":19},{"x":54,"y":18},{"x":56,"y":17},{"x":63,"y":17},{"x":51,"y":16},{"x":52,"y":15},{"x":58,"y":14},{"x":60,"y":14},{"x":47,"y":14},{"x":53,"y":14},{"x":49,"y":13},{"x":69,"y":12},{"x":50,"y":12},{"x":68,"y":12},{"x":64,"y":11},{"x":70,"y":10},{"x":55,"y":10},{"x":61,"y":10},{"x":59,"y":9},{"x":66,"y":9},{"x":57,"y":9},{"x":79,"y":9},{"x":62,"y":8},{"x":67,"y":8},{"x":71,"y":8},{"x":72,"y":7},{"x":101,"y":7},{"x":92,"y":7},{"x":80,"y":7},{"x":76,"y":6},{"x":83,"y":6},{"x":65,"y":5},{"x":86,"y":5},{"x":85,"y":5},{"x":88,"y":5},{"x":77,"y":5},{"x":91,"y":5},{"x":89,"y":5},{"x":100,"y":5},{"x":82,"y":5},{"x":78,"y":5},{"x":96,"y":5},{"x":105,"y":5},{"x":114,"y":5},{"x":94,"y":5},{"x":102,"y":4},{"x":149,"y":4},{"x":106,"y":4},{"x":75,"y":4},{"x":109,"y":4},{"x":103,"y":4},{"x":152,"y":4},{"x":107,"y":4},{"x":97,"y":4},{"x":112,"y":4},{"x":140,"y":4},{"x":81,"y":4},{"x":98,"y":4},{"x":73,"y":4},{"x":74,"y":3},{"x":154,"y":3},{"x":95,"y":3},{"x":93,"y":3},{"x":134,"y":3},{"x":342,"y":3},{"x":115,"y":3},{"x":145,"y":3},{"x":132,"y":3},{"x":87,"y":3},{"x":84,"y":3},{"x":357,"y":2},{"x":188,"y":2},{"x":130,"y":2},{"x":210,"y":2},{"x":135,"y":2},{"x":239,"y":2},{"x":260,"y":2},{"x":222,"y":2},{"x":144,"y":2},{"x":99,"y":2},{"x":182,"y":2},{"x":117,"y":2},{"x":108,"y":2},{"x":156,"y":2},{"x":365,"y":2},{"x":178,"y":2},{"x":118,"y":2},{"x":131,"y":2},{"x":170,"y":2},{"x":125,"y":2},{"x":148,"y":2},{"x":142,"y":2},{"x":158,"y":2},{"x":127,"y":2},{"x":277,"y":2},{"x":255,"y":2},{"x":179,"y":2},{"x":245,"y":2},{"x":123,"y":2},{"x":133,"y":2},{"x":173,"y":2},{"x":147,"y":2},{"x":177,"y":2},{"x":950,"y":1},{"x":164,"y":1},{"x":430,"y":1},{"x":240,"y":1},{"x":110,"y":1},{"x":982,"y":1},{"x":128,"y":1},{"x":229,"y":1},{"x":153,"y":1},{"x":213,"y":1},{"x":1327,"y":1},{"x":491,"y":1},{"x":355,"y":1},{"x":175,"y":1},{"x":385,"y":1},{"x":269,"y":1},{"x":206,"y":1},{"x":217,"y":1},{"x":157,"y":1},{"x":204,"y":1},{"x":755,"y":1},{"x":1617,"y":1},{"x":192,"y":1},{"x":361,"y":1},{"x":137,"y":1},{"x":116,"y":1},{"x":645,"y":1},{"x":113,"y":1},{"x":136,"y":1},{"x":208,"y":1},{"x":241,"y":1},{"x":262,"y":1},{"x":263,"y":1},{"x":1400,"y":1},{"x":294,"y":1},{"x":358,"y":1},{"x":649,"y":1},{"x":1201,"y":1},{"x":257,"y":1},{"x":947,"y":1},{"x":347,"y":1},{"x":792,"y":1},{"x":90,"y":1},{"x":292,"y":1},{"x":498,"y":1},{"x":143,"y":1},{"x":247,"y":1},{"x":187,"y":1},{"x":195,"y":1},{"x":366,"y":1},{"x":196,"y":1},{"x":1992,"y":1},{"x":184,"y":1},{"x":219,"y":1},{"x":122,"y":1},{"x":231,"y":1},{"x":408,"y":1},{"x":111,"y":1},{"x":280,"y":1},{"x":198,"y":1},{"x":295,"y":1},{"x":808,"y":1},{"x":248,"y":1},{"x":261,"y":1},{"x":166,"y":1},{"x":252,"y":1},{"x":907,"y":1},{"x":482,"y":1},{"x":312,"y":1},{"x":520,"y":1},{"x":484,"y":1},{"x":180,"y":1},{"x":1816,"y":1},{"x":202,"y":1},{"x":266,"y":1},{"x":2919,"y":1},{"x":283,"y":1},{"x":449,"y":1},{"x":203,"y":1},{"x":1765,"y":1},{"x":700,"y":1},{"x":268,"y":1},{"x":163,"y":1},{"x":120,"y":1},{"x":126,"y":1},{"x":422,"y":1},{"x":124,"y":1},{"x":171,"y":1},{"x":160,"y":1},{"x":1738,"y":1},{"x":270,"y":1},{"x":271,"y":1},{"x":395,"y":1},{"x":185,"y":1},{"x":1962,"y":1},{"x":655,"y":1},{"x":318,"y":1},{"x":183,"y":1},{"x":2215,"y":1},{"x":362,"y":1}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"25b6d613-b852-4d2b-932f-7e96606be51a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"25b6d613-b852-4d2b-932f-7e96606be51a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"25b6d613-b852-4d2b-932f-7e96606be51a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"25b6d613-b852-4d2b-932f-7e96606be51a\", :values ({:x 1, :y 37814} {:x 2, :y 9598} {:x 3, :y 4355} {:x 4, :y 2582} {:x 5, :y 1599} {:x 6, :y 1117} {:x 7, :y 784} {:x 8, :y 660} {:x 9, :y 507} {:x 10, :y 405} {:x 11, :y 369} {:x 12, :y 290} {:x 14, :y 232} {:x 13, :y 226} {:x 16, :y 173} {:x 15, :y 167} {:x 17, :y 146} {:x 19, :y 131} {:x 18, :y 114} {:x 20, :y 105} {:x 22, :y 93} {:x 21, :y 92} {:x 23, :y 79} {:x 24, :y 71} {:x 25, :y 65} {:x 26, :y 61} {:x 27, :y 58} {:x 29, :y 50} {:x 28, :y 50} {:x 30, :y 47} {:x 31, :y 45} {:x 33, :y 44} {:x 32, :y 43} {:x 35, :y 39} {:x 37, :y 33} {:x 39, :y 30} {:x 44, :y 29} {:x 34, :y 29} {:x 36, :y 27} {:x 48, :y 26} {:x 40, :y 26} {:x 42, :y 24} {:x 46, :y 23} {:x 41, :y 21} {:x 38, :y 21} {:x 43, :y 19} {:x 45, :y 19} {:x 54, :y 18} {:x 56, :y 17} {:x 63, :y 17} {:x 51, :y 16} {:x 52, :y 15} {:x 58, :y 14} {:x 60, :y 14} {:x 47, :y 14} {:x 53, :y 14} {:x 49, :y 13} {:x 69, :y 12} {:x 50, :y 12} {:x 68, :y 12} {:x 64, :y 11} {:x 70, :y 10} {:x 55, :y 10} {:x 61, :y 10} {:x 59, :y 9} {:x 66, :y 9} {:x 57, :y 9} {:x 79, :y 9} {:x 62, :y 8} {:x 67, :y 8} {:x 71, :y 8} {:x 72, :y 7} {:x 101, :y 7} {:x 92, :y 7} {:x 80, :y 7} {:x 76, :y 6} {:x 83, :y 6} {:x 65, :y 5} {:x 86, :y 5} {:x 85, :y 5} {:x 88, :y 5} {:x 77, :y 5} {:x 91, :y 5} {:x 89, :y 5} {:x 100, :y 5} {:x 82, :y 5} {:x 78, :y 5} {:x 96, :y 5} {:x 105, :y 5} {:x 114, :y 5} {:x 94, :y 5} {:x 102, :y 4} {:x 149, :y 4} {:x 106, :y 4} {:x 75, :y 4} {:x 109, :y 4} {:x 103, :y 4} {:x 152, :y 4} {:x 107, :y 4} {:x 97, :y 4} {:x 112, :y 4} {:x 140, :y 4} {:x 81, :y 4} {:x 98, :y 4} {:x 73, :y 4} {:x 74, :y 3} {:x 154, :y 3} {:x 95, :y 3} {:x 93, :y 3} {:x 134, :y 3} {:x 342, :y 3} {:x 115, :y 3} {:x 145, :y 3} {:x 132, :y 3} {:x 87, :y 3} {:x 84, :y 3} {:x 357, :y 2} {:x 188, :y 2} {:x 130, :y 2} {:x 210, :y 2} {:x 135, :y 2} {:x 239, :y 2} {:x 260, :y 2} {:x 222, :y 2} {:x 144, :y 2} {:x 99, :y 2} {:x 182, :y 2} {:x 117, :y 2} {:x 108, :y 2} {:x 156, :y 2} {:x 365, :y 2} {:x 178, :y 2} {:x 118, :y 2} {:x 131, :y 2} {:x 170, :y 2} {:x 125, :y 2} {:x 148, :y 2} {:x 142, :y 2} {:x 158, :y 2} {:x 127, :y 2} {:x 277, :y 2} {:x 255, :y 2} {:x 179, :y 2} {:x 245, :y 2} {:x 123, :y 2} {:x 133, :y 2} {:x 173, :y 2} {:x 147, :y 2} {:x 177, :y 2} {:x 950, :y 1} {:x 164, :y 1} {:x 430, :y 1} {:x 240, :y 1} {:x 110, :y 1} {:x 982, :y 1} {:x 128, :y 1} {:x 229, :y 1} {:x 153, :y 1} {:x 213, :y 1} {:x 1327, :y 1} {:x 491, :y 1} {:x 355, :y 1} {:x 175, :y 1} {:x 385, :y 1} {:x 269, :y 1} {:x 206, :y 1} {:x 217, :y 1} {:x 157, :y 1} {:x 204, :y 1} {:x 755, :y 1} {:x 1617, :y 1} {:x 192, :y 1} {:x 361, :y 1} {:x 137, :y 1} {:x 116, :y 1} {:x 645, :y 1} {:x 113, :y 1} {:x 136, :y 1} {:x 208, :y 1} {:x 241, :y 1} {:x 262, :y 1} {:x 263, :y 1} {:x 1400, :y 1} {:x 294, :y 1} {:x 358, :y 1} {:x 649, :y 1} {:x 1201, :y 1} {:x 257, :y 1} {:x 947, :y 1} {:x 347, :y 1} {:x 792, :y 1} {:x 90, :y 1} {:x 292, :y 1} {:x 498, :y 1} {:x 143, :y 1} {:x 247, :y 1} {:x 187, :y 1} {:x 195, :y 1} {:x 366, :y 1} {:x 196, :y 1} {:x 1992, :y 1} {:x 184, :y 1} {:x 219, :y 1} {:x 122, :y 1} {:x 231, :y 1} {:x 408, :y 1} {:x 111, :y 1} {:x 280, :y 1} {:x 198, :y 1} {:x 295, :y 1} {:x 808, :y 1} {:x 248, :y 1} {:x 261, :y 1} {:x 166, :y 1} {:x 252, :y 1} {:x 907, :y 1} {:x 482, :y 1} {:x 312, :y 1} {:x 520, :y 1} {:x 484, :y 1} {:x 180, :y 1} {:x 1816, :y 1} {:x 202, :y 1} {:x 266, :y 1} {:x 2919, :y 1} {:x 283, :y 1} {:x 449, :y 1} {:x 203, :y 1} {:x 1765, :y 1} {:x 700, :y 1} {:x 268, :y 1} {:x 163, :y 1} {:x 120, :y 1} {:x 126, :y 1} {:x 422, :y 1} {:x 124, :y 1} {:x 171, :y 1} {:x 160, :y 1} {:x 1738, :y 1} {:x 270, :y 1} {:x 271, :y 1} {:x 395, :y 1} {:x 185, :y 1} {:x 1962, :y 1} {:x 655, :y 1} {:x 318, :y 1} {:x 183, :y 1} {:x 2215, :y 1} {:x 362, :y 1})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ## User Mentions
;; **

;; @@
(def user-mention-frequencies
  (->> (mc/find-maps @db "mentions")
       (map :user)
       (remove nil?)
       frequencies))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/user-mention-frequencies</span>","value":"#'unsightly-reserve/user-mention-frequencies"}
;; <=

;; @@
(->> user-mention-frequencies
     (sort-by second >)
     (take 20)
     (pmap (fn [[k v]] [(:screen_name (mc/find-map-by-id @db "users" k)) v]))
     )
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;SPIEGELONLINE&quot;</span>","value":"\"SPIEGELONLINE\""},{"type":"html","content":"<span class='clj-long'>52035</span>","value":"52035"}],"value":"[\"SPIEGELONLINE\" 52035]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;welt&quot;</span>","value":"\"welt\""},{"type":"html","content":"<span class='clj-long'>49220</span>","value":"49220"}],"value":"[\"welt\" 49220]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;BILD&quot;</span>","value":"\"BILD\""},{"type":"html","content":"<span class='clj-long'>27485</span>","value":"27485"}],"value":"[\"BILD\" 27485]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;SZ&quot;</span>","value":"\"SZ\""},{"type":"html","content":"<span class='clj-long'>23743</span>","value":"23743"}],"value":"[\"SZ\" 23743]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;tagesschau&quot;</span>","value":"\"tagesschau\""},{"type":"html","content":"<span class='clj-long'>18731</span>","value":"18731"}],"value":"[\"tagesschau\" 18731]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;ntvde&quot;</span>","value":"\"ntvde\""},{"type":"html","content":"<span class='clj-long'>15505</span>","value":"15505"}],"value":"[\"ntvde\" 15505]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;FAZ_NET&quot;</span>","value":"\"FAZ_NET\""},{"type":"html","content":"<span class='clj-long'>14741</span>","value":"14741"}],"value":"[\"FAZ_NET\" 14741]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;sternde&quot;</span>","value":"\"sternde\""},{"type":"html","content":"<span class='clj-long'>10625</span>","value":"10625"}],"value":"[\"sternde\" 10625]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;focusonline&quot;</span>","value":"\"focusonline\""},{"type":"html","content":"<span class='clj-long'>9849</span>","value":"9849"}],"value":"[\"focusonline\" 9849]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;N24_de&quot;</span>","value":"\"N24_de\""},{"type":"html","content":"<span class='clj-long'>8718</span>","value":"8718"}],"value":"[\"N24_de\" 8718]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;ZDFheute&quot;</span>","value":"\"ZDFheute\""},{"type":"html","content":"<span class='clj-long'>7907</span>","value":"7907"}],"value":"[\"ZDFheute\" 7907]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;tazgezwitscher&quot;</span>","value":"\"tazgezwitscher\""},{"type":"html","content":"<span class='clj-long'>7250</span>","value":"7250"}],"value":"[\"tazgezwitscher\" 7250]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;DerWesten&quot;</span>","value":"\"DerWesten\""},{"type":"html","content":"<span class='clj-long'>3987</span>","value":"3987"}],"value":"[\"DerWesten\" 3987]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;dpa&quot;</span>","value":"\"dpa\""},{"type":"html","content":"<span class='clj-long'>3217</span>","value":"3217"}],"value":"[\"dpa\" 3217]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;bkalnoky&quot;</span>","value":"\"bkalnoky\""},{"type":"html","content":"<span class='clj-long'>2364</span>","value":"2364"}],"value":"[\"bkalnoky\" 2364]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;ZDF&quot;</span>","value":"\"ZDF\""},{"type":"html","content":"<span class='clj-long'>1586</span>","value":"1586"}],"value":"[\"ZDF\" 1586]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;DerSPIEGEL&quot;</span>","value":"\"DerSPIEGEL\""},{"type":"html","content":"<span class='clj-long'>1582</span>","value":"1582"}],"value":"[\"DerSPIEGEL\" 1582]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;BILD_Politik&quot;</span>","value":"\"BILD_Politik\""},{"type":"html","content":"<span class='clj-long'>1330</span>","value":"1330"}],"value":"[\"BILD_Politik\" 1330]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;ronzheimer&quot;</span>","value":"\"ronzheimer\""},{"type":"html","content":"<span class='clj-long'>1168</span>","value":"1168"}],"value":"[\"ronzheimer\" 1168]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;BILD_News&quot;</span>","value":"\"BILD_News\""},{"type":"html","content":"<span class='clj-long'>1121</span>","value":"1121"}],"value":"[\"BILD_News\" 1121]"}],"value":"([\"SPIEGELONLINE\" 52035] [\"welt\" 49220] [\"BILD\" 27485] [\"SZ\" 23743] [\"tagesschau\" 18731] [\"ntvde\" 15505] [\"FAZ_NET\" 14741] [\"sternde\" 10625] [\"focusonline\" 9849] [\"N24_de\" 8718] [\"ZDFheute\" 7907] [\"tazgezwitscher\" 7250] [\"DerWesten\" 3987] [\"dpa\" 3217] [\"bkalnoky\" 2364] [\"ZDF\" 1586] [\"DerSPIEGEL\" 1582] [\"BILD_Politik\" 1330] [\"ronzheimer\" 1168] [\"BILD_News\" 1121])"}
;; <=

;; @@
(short-metrics (vals user-mention-frequencies))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>35.81539447190188</span>","value":"35.81539447190188"}],"value":"[:mean 35.81539447190188]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>840.0887399269913</span>","value":"840.0887399269913"}],"value":"[:std 840.0887399269913]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 2.0 6.0 52035.0)</span>","value":"(1.0 1.0 2.0 6.0 52035.0)"}],"value":"[:quantiles (1.0 1.0 2.0 6.0 52035.0)]"}],"value":"{:mean 35.81539447190188, :std 840.0887399269913, :quantiles (1.0 1.0 2.0 6.0 52035.0)}"}
;; <=

;; **
;;; ## Hashtags
;; **

;; @@
(def hashtag-frequencies
  (->> (mc/find-maps @db "publications")
       (map :hashtags)
       (remove nil?)
       flatten
       frequencies))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/hashtag-frequencies</span>","value":"#'unsightly-reserve/hashtag-frequencies"}
;; <=

;; @@
(short-metrics (vals hashtag-frequencies))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>10.71760838553619</span>","value":"10.71760838553619"}],"value":"[:mean 10.71760838553619]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>103.53733078259982</span>","value":"103.53733078259982"}],"value":"[:std 103.53733078259982]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 2.0 4.0 6491.0)</span>","value":"(1.0 1.0 2.0 4.0 6491.0)"}],"value":"[:quantiles (1.0 1.0 2.0 4.0 6491.0)]"}],"value":"{:mean 10.71760838553619, :std 103.53733078259982, :quantiles (1.0 1.0 2.0 4.0 6491.0)}"}
;; <=

;; **
;;; ### Hashtags of one-time-users
;; **

;; @@
(def one-time-users
   (->> (mc/find-maps @db "publications")
        (map :user)
        frequencies
        (remove (fn [[k v]] (> v 1)))
        keys))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/one-time-users</span>","value":"#'unsightly-reserve/one-time-users"}
;; <=

;; @@
((comp float /) (count one-time-users) (mc/count @db "users"))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>0.57873553</span>","value":"0.57873553"}
;; <=

;; @@
(->> one-time-users
     (map #(mc/find-one-as-map @db "publications" {:user %}))
     (map :hashtags)
     flatten
         (remove nil?)
         frequencies
         (sort-by second >)
         (take 25)
         (map (fn [[k v]] [(:text (mc/find-map-by-id @db "hashtags" k))
                          v])))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Ferguson&quot;</span>","value":"\"Ferguson\""},{"type":"html","content":"<span class='clj-long'>506</span>","value":"506"}],"value":"[\"Ferguson\" 506]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Ukraine&quot;</span>","value":"\"Ukraine\""},{"type":"html","content":"<span class='clj-long'>445</span>","value":"445"}],"value":"[\"Ukraine\" 445]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;AFC&quot;</span>","value":"\"AFC\""},{"type":"html","content":"<span class='clj-long'>351</span>","value":"351"}],"value":"[\"AFC\" 351]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Kagawa&quot;</span>","value":"\"Kagawa\""},{"type":"html","content":"<span class='clj-long'>319</span>","value":"319"}],"value":"[\"Kagawa\" 319]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Gaza&quot;</span>","value":"\"Gaza\""},{"type":"html","content":"<span class='clj-long'>277</span>","value":"277"}],"value":"[\"Gaza\" 277]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;SOSCoveDolphins&quot;</span>","value":"\"SOSCoveDolphins\""},{"type":"html","content":"<span class='clj-long'>265</span>","value":"265"}],"value":"[\"SOSCoveDolphins\" 265]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;News&quot;</span>","value":"\"News\""},{"type":"html","content":"<span class='clj-long'>258</span>","value":"258"}],"value":"[\"News\" 258]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;BVB&quot;</span>","value":"\"BVB\""},{"type":"html","content":"<span class='clj-long'>255</span>","value":"255"}],"value":"[\"BVB\" 255]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;N24&quot;</span>","value":"\"N24\""},{"type":"html","content":"<span class='clj-long'>249</span>","value":"249"}],"value":"[\"N24\" 249]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Ebola&quot;</span>","value":"\"Ebola\""},{"type":"html","content":"<span class='clj-long'>226</span>","value":"226"}],"value":"[\"Ebola\" 226]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Israel&quot;</span>","value":"\"Israel\""},{"type":"html","content":"<span class='clj-long'>177</span>","value":"177"}],"value":"[\"Israel\" 177]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Germany&quot;</span>","value":"\"Germany\""},{"type":"html","content":"<span class='clj-long'>172</span>","value":"172"}],"value":"[\"Germany\" 172]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;ISIS&quot;</span>","value":"\"ISIS\""},{"type":"html","content":"<span class='clj-long'>172</span>","value":"172"}],"value":"[\"ISIS\" 172]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;RobinWilliams&quot;</span>","value":"\"RobinWilliams\""},{"type":"html","content":"<span class='clj-long'>165</span>","value":"165"}],"value":"[\"RobinWilliams\" 165]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;sltw14&quot;</span>","value":"\"sltw14\""},{"type":"html","content":"<span class='clj-long'>157</span>","value":"157"}],"value":"[\"sltw14\" 157]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Irak&quot;</span>","value":"\"Irak\""},{"type":"html","content":"<span class='clj-long'>156</span>","value":"156"}],"value":"[\"Irak\" 156]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;mufc&quot;</span>","value":"\"mufc\""},{"type":"html","content":"<span class='clj-long'>146</span>","value":"146"}],"value":"[\"mufc\" 146]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;IceBucketChallenge&quot;</span>","value":"\"IceBucketChallenge\""},{"type":"html","content":"<span class='clj-long'>139</span>","value":"139"}],"value":"[\"IceBucketChallenge\" 139]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;afc&quot;</span>","value":"\"afc\""},{"type":"html","content":"<span class='clj-long'>132</span>","value":"132"}],"value":"[\"afc\" 132]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;IS&quot;</span>","value":"\"IS\""},{"type":"html","content":"<span class='clj-long'>124</span>","value":"124"}],"value":"[\"IS\" 124]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;DalaiLama&quot;</span>","value":"\"DalaiLama\""},{"type":"html","content":"<span class='clj-long'>120</span>","value":"120"}],"value":"[\"DalaiLama\" 120]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Buddhist&quot;</span>","value":"\"Buddhist\""},{"type":"html","content":"<span class='clj-long'>119</span>","value":"119"}],"value":"[\"Buddhist\" 119]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Russland&quot;</span>","value":"\"Russland\""},{"type":"html","content":"<span class='clj-long'>117</span>","value":"117"}],"value":"[\"Russland\" 117]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;EU&quot;</span>","value":"\"EU\""},{"type":"html","content":"<span class='clj-long'>106</span>","value":"106"}],"value":"[\"EU\" 106]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;FCB&quot;</span>","value":"\"FCB\""},{"type":"html","content":"<span class='clj-long'>99</span>","value":"99"}],"value":"[\"FCB\" 99]"}],"value":"([\"Ferguson\" 506] [\"Ukraine\" 445] [\"AFC\" 351] [\"Kagawa\" 319] [\"Gaza\" 277] [\"SOSCoveDolphins\" 265] [\"News\" 258] [\"BVB\" 255] [\"N24\" 249] [\"Ebola\" 226] [\"Israel\" 177] [\"Germany\" 172] [\"ISIS\" 172] [\"RobinWilliams\" 165] [\"sltw14\" 157] [\"Irak\" 156] [\"mufc\" 146] [\"IceBucketChallenge\" 139] [\"afc\" 132] [\"IS\" 124] [\"DalaiLama\" 120] [\"Buddhist\" 119] [\"Russland\" 117] [\"EU\" 106] [\"FCB\" 99])"}
;; <=

;; **
;;; ## Post metrics
;; **

;; @@
(def source-uids (map :_id (mc/find-maps @db "users" {:screen_name {$in news-accounts}})))
(def source-publications (mc/find-maps @db "publications" {:user {$in source-uids}}))
(def user-publications (mc/find-maps @db "publications" {:user {$nin source-uids}}))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/user-publications</span>","value":"#'unsightly-reserve/user-publications"}
;; <=

;; @@
(let [user-pub-count (mc/count @db "publications" {:user {$nin source-uids}})
      source-pub-count (mc/count @db "publications" {:user {$in source-uids}})
      overall-pub-count (mc/count @db "publications")]
  [ ((comp float /) source-pub-count user-pub-count)
(plot/bar-chart ["user" "source"] [user-pub-count source-pub-count])])
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0.07629545</span>","value":"0.07629545"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d","values":[{"x":"user","y":255664},{"x":"source","y":19506}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :values ({:x \"user\", :y 255664} {:x \"source\", :y 19506})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}],"value":"[0.07629545 #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"3a2c0f5d-2dc3-429e-b623-dd6f8aba713d\", :values ({:x \"user\", :y 255664} {:x \"source\", :y 19506})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}]"}
;; <=

;; **
;;; ### Source User Ratio
;; **

;; @@
(let [user-count (mc/count @db "users" {:screen_name {$nin news-accounts}})
      source-count (mc/count @db "users" {:screen_name {$in news-accounts}})
      overall-count (mc/count @db "users")]
    ((comp float /) source-count user-count))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>2.1431306E-4</span>","value":"2.1431306E-4"}
;; <=

;; **
;;; ### Average Source Post-Rate
;; **

;; @@
 (->> (map (fn [uid] [uid (mc/count @db "publications" {:user uid})]) source-uids)
       (map second)
       short-metrics)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>1393.2857142857142</span>","value":"1393.2857142857142"}],"value":"[:mean 1393.2857142857142]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>710.7663717177644</span>","value":"710.7663717177644"}],"value":"[:std 710.7663717177644]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(271.0 947.75 1472.0 1803.25 2919.0)</span>","value":"(271.0 947.75 1472.0 1803.25 2919.0)"}],"value":"[:quantiles (271.0 947.75 1472.0 1803.25 2919.0)]"}],"value":"{:mean 1393.2857142857142, :std 710.7663717177644, :quantiles (271.0 947.75 1472.0 1803.25 2919.0)}"}
;; <=

;; **
;;; ### Average User Post-Rate
;; **

;; @@
(->> (mc/find-maps @db "publications" {:user {$nin source-uids}})
       (map :user)
       frequencies
       vals
       short-metrics)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>4.046725125834943</span>","value":"4.046725125834943"}],"value":"[:mean 4.046725125834943]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>19.614712500426073</span>","value":"19.614712500426073"}],"value":"[:std 19.614712500426073]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(1.0 1.0 1.0 2.0 2215.0)</span>","value":"(1.0 1.0 1.0 2.0 2215.0)"}],"value":"[:quantiles (1.0 1.0 1.0 2.0 2215.0)]"}],"value":"{:mean 4.046725125834943, :std 19.614712500426073, :quantiles (1.0 1.0 1.0 2.0 2215.0)}"}
;; <=

;; **
;;; ### Post-Hour vs Count
;; **

;; @@
(letfn [(pub-time-dist
          [pubs]
          (->> pubs
               (map (comp t/hour :ts))
               frequencies
               (sort-by first >)
               (map (fn [[k v]] [k (/ v (count pubs))]))))]
  (plot/compose
    (plot/list-plot (pub-time-dist user-publications) :plot-size 600 :joined true :color "green" :plot-range [:all [0 0.1]])
    (plot/list-plot (pub-time-dist source-publications) :joined true :color "red")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"8150592e-d94d-4e5b-b78c-1ba5b7dfa203","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,0.1]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"8150592e-d94d-4e5b-b78c-1ba5b7dfa203","values":[{"x":23,"y":0.03478784654859503},{"x":22,"y":0.04636945365792603},{"x":21,"y":0.04834470242192878},{"x":20,"y":0.05061330496276363},{"x":19,"y":0.05620658364102885},{"x":18,"y":0.05953517116215032},{"x":17,"y":0.05845171787971713},{"x":16,"y":0.05587020464359472},{"x":15,"y":0.06112319294073471},{"x":14,"y":0.06517147506101759},{"x":13,"y":0.0642327429751549},{"x":12,"y":0.06584032167219477},{"x":11,"y":0.06510498153826898},{"x":10,"y":0.06221838037424119},{"x":9,"y":0.06042696664371988},{"x":8,"y":0.04647114963389449},{"x":7,"y":0.02496245071656549},{"x":6,"y":0.01135474685524751},{"x":5,"y":0.006289504975280055},{"x":4,"y":0.005413355028474873},{"x":3,"y":0.005691063270542587},{"x":2,"y":0.008769322235434007},{"x":1,"y":0.01367419738406659},{"x":0,"y":0.02307716377745791}]},{"name":"b684cc53-f482-4b48-81eb-2a9151d0f0fe","values":[{"x":23,"y":0.01589254588331795},{"x":22,"y":0.03019583717830411},{"x":21,"y":0.03388700912539731},{"x":20,"y":0.03650158925458833},{"x":19,"y":0.04819030042038347},{"x":18,"y":0.06326258587101405},{"x":17,"y":0.07172152158310265},{"x":16,"y":0.07074746231928637},{"x":15,"y":0.07136265764380191},{"x":14,"y":0.07192658669127448},{"x":13,"y":0.06444171024300215},{"x":12,"y":0.0715164564749308},{"x":11,"y":0.07008100071772788},{"x":10,"y":0.06751768686557982},{"x":9,"y":0.0662360299395058},{"x":8,"y":0.05629037219317133},{"x":7,"y":0.0377319799036194},{"x":6,"y":0.01932738644519635},{"x":5,"y":0.009740592638162618},{"x":4,"y":0.00538295908951092},{"x":3,"y":0.004408899825694658},{"x":2,"y":0.003896237055265047},{"x":1,"y":0.004306367271608736},{"x":0,"y":0.005434225366553881}]}],"marks":[{"type":"line","from":{"data":"8150592e-d94d-4e5b-b78c-1ba5b7dfa203"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"b684cc53-f482-4b48-81eb-2a9151d0f0fe"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"8150592e-d94d-4e5b-b78c-1ba5b7dfa203\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 0.1]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"8150592e-d94d-4e5b-b78c-1ba5b7dfa203\", :values ({:x 23, :y 4447/127832} {:x 22, :y 11855/255664} {:x 21, :y 1545/31958} {:x 20, :y 3235/63916} {:x 19, :y 7185/127832} {:x 18, :y 15221/255664} {:x 17, :y 934/15979} {:x 16, :y 3571/63916} {:x 15, :y 15627/255664} {:x 14, :y 8331/127832} {:x 13, :y 8211/127832} {:x 12, :y 16833/255664} {:x 11, :y 16645/255664} {:x 10, :y 15907/255664} {:x 9, :y 15449/255664} {:x 8, :y 11881/255664} {:x 7, :y 3191/127832} {:x 6, :y 2903/255664} {:x 5, :y 201/31958} {:x 4, :y 173/31958} {:x 3, :y 1455/255664} {:x 2, :y 59/6728} {:x 1, :y 23/1682} {:x 0, :y 1475/63916})} {:name \"b684cc53-f482-4b48-81eb-2a9151d0f0fe\", :values ({:x 23, :y 155/9753} {:x 22, :y 589/19506} {:x 21, :y 661/19506} {:x 20, :y 356/9753} {:x 19, :y 470/9753} {:x 18, :y 617/9753} {:x 17, :y 1399/19506} {:x 16, :y 230/3251} {:x 15, :y 232/3251} {:x 14, :y 1403/19506} {:x 13, :y 419/6502} {:x 12, :y 465/6502} {:x 11, :y 1367/19506} {:x 10, :y 439/6502} {:x 9, :y 646/9753} {:x 8, :y 183/3251} {:x 7, :y 368/9753} {:x 6, :y 377/19506} {:x 5, :y 95/9753} {:x 4, :y 35/6502} {:x 3, :y 43/9753} {:x 2, :y 38/9753} {:x 1, :y 14/3251} {:x 0, :y 53/9753})}), :marks ({:type \"line\", :from {:data \"8150592e-d94d-4e5b-b78c-1ba5b7dfa203\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"b684cc53-f482-4b48-81eb-2a9151d0f0fe\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ### Post-day vs Count
;; **

;; @@
(letfn [(pub-time-dist
          [pubs]
          (->> pubs
               (map (comp t/day :ts))
               frequencies
               (sort-by first >)
               (map (fn [[k v]] [k (/ v (count pubs))]))))]
  (plot/compose
    (plot/list-plot (pub-time-dist user-publications) :joined true :color "green" :plot-size 600 :plot-range [:all [0 0.05]])
    (plot/list-plot (pub-time-dist source-publications) :joined true :color "red")))
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"404d7747-d7b0-47a5-9295-c575fa275bc8","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,0.05]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"404d7747-d7b0-47a5-9295-c575fa275bc8","values":[{"x":31,"y":0.03808905438387884},{"x":30,"y":0.02617497966080481},{"x":29,"y":0.03307074910820452},{"x":28,"y":0.03820248451092058},{"x":27,"y":0.03182692909443645},{"x":26,"y":0.03264831966956631},{"x":25,"y":0.03004724951498842},{"x":24,"y":0.02531056386507291},{"x":23,"y":0.02524015895863321},{"x":22,"y":0.03025846423430753},{"x":21,"y":0.02939795982226673},{"x":20,"y":0.0338060892421303},{"x":19,"y":0.04348285249389824},{"x":18,"y":0.02823627886601164},{"x":17,"y":0.02746182489517492},{"x":16,"y":0.02795074785656174},{"x":15,"y":0.03556230051943175},{"x":14,"y":0.03694693034607923},{"x":13,"y":0.03892217911008198},{"x":12,"y":0.04144111020714688},{"x":11,"y":0.02722714187370924},{"x":10,"y":0.02942925089179548},{"x":9,"y":0.0238750860504412},{"x":8,"y":0.03199902997684461},{"x":7,"y":0.0416405907753927},{"x":6,"y":0.03661446273233619},{"x":5,"y":0.0342363414481507},{"x":4,"y":0.03462356843356906},{"x":3,"y":0.0324331935665561},{"x":2,"y":0.02357390950622692},{"x":1,"y":0.03027019838538081}]},{"name":"9e8a4c15-6779-4e07-a4fd-70cbb657b8cb","values":[{"x":31,"y":0.03552752999077207},{"x":30,"y":0.02747872449502717},{"x":29,"y":0.03552752999077207},{"x":28,"y":0.04106428791141187},{"x":27,"y":0.03532246488260023},{"x":26,"y":0.03983389726238081},{"x":25,"y":0.03583512765302984},{"x":24,"y":0.02450528042653542},{"x":23,"y":0.02553060596739465},{"x":22,"y":0.0352199323285143},{"x":21,"y":0.03563006254485799},{"x":20,"y":0.0352199323285143},{"x":19,"y":0.03803957756587717},{"x":18,"y":0.03075976622577668},{"x":17,"y":0.02265969445298882},{"x":16,"y":0.02353122116271916},{"x":15,"y":0.03809084384292013},{"x":14,"y":0.03916743566082231},{"x":13,"y":0.03542499743668615},{"x":12,"y":0.03409207423356916},{"x":11,"y":0.02978570696196042},{"x":10,"y":0.02383881882497693},{"x":9,"y":0.02306982466933251},{"x":8,"y":0.03419460678765508},{"x":7,"y":0.03450220444991285},{"x":6,"y":0.03557879626781503},{"x":5,"y":0.03368194401722547},{"x":4,"y":0.03363067774018251},{"x":3,"y":0.02496667691992208},{"x":2,"y":0.0213780375269148},{"x":1,"y":0.03691171947093202}]}],"marks":[{"type":"line","from":{"data":"404d7747-d7b0-47a5-9295-c575fa275bc8"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"9e8a4c15-6779-4e07-a4fd-70cbb657b8cb"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"404d7747-d7b0-47a5-9295-c575fa275bc8\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 0.05]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"404d7747-d7b0-47a5-9295-c575fa275bc8\", :values ({:x 31, :y 4869/127832} {:x 30, :y 1673/63916} {:x 29, :y 445/13456} {:x 28, :y 9767/255664} {:x 27, :y 8137/255664} {:x 26, :y 8347/255664} {:x 25, :y 3841/127832} {:x 24, :y 6471/255664} {:x 23, :y 6453/255664} {:x 22, :y 967/31958} {:x 21, :y 1879/63916} {:x 20, :y 8643/255664} {:x 19, :y 11117/255664} {:x 18, :y 7219/255664} {:x 17, :y 7021/255664} {:x 16, :y 3573/127832} {:x 15, :y 2273/63916} {:x 14, :y 4723/127832} {:x 13, :y 9951/255664} {:x 12, :y 10595/255664} {:x 11, :y 6961/255664} {:x 10, :y 99/3364} {:x 9, :y 763/31958} {:x 8, :y 8181/255664} {:x 7, :y 5323/127832} {:x 6, :y 9361/255664} {:x 5, :y 8753/255664} {:x 4, :y 2213/63916} {:x 3, :y 2073/63916} {:x 2, :y 6027/255664} {:x 1, :y 7739/255664})} {:name \"9e8a4c15-6779-4e07-a4fd-70cbb657b8cb\", :values ({:x 31, :y 231/6502} {:x 30, :y 268/9753} {:x 29, :y 231/6502} {:x 28, :y 267/6502} {:x 27, :y 689/19506} {:x 26, :y 259/6502} {:x 25, :y 233/6502} {:x 24, :y 239/9753} {:x 23, :y 83/3251} {:x 22, :y 229/6502} {:x 21, :y 695/19506} {:x 20, :y 229/6502} {:x 19, :y 371/9753} {:x 18, :y 100/3251} {:x 17, :y 221/9753} {:x 16, :y 153/6502} {:x 15, :y 743/19506} {:x 14, :y 382/9753} {:x 13, :y 691/19506} {:x 12, :y 665/19506} {:x 11, :y 581/19506} {:x 10, :y 155/6502} {:x 9, :y 75/3251} {:x 8, :y 667/19506} {:x 7, :y 673/19506} {:x 6, :y 347/9753} {:x 5, :y 219/6502} {:x 4, :y 328/9753} {:x 3, :y 487/19506} {:x 2, :y 139/6502} {:x 1, :y 120/3251})}), :marks ({:type \"line\", :from {:data \"404d7747-d7b0-47a5-9295-c575fa275bc8\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"9e8a4c15-6779-4e07-a4fd-70cbb657b8cb\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ### Publication Types
;; **

;; @@
(let [user-type-freq (->> (mc/find-maps @db "publications")
                          (map :type)
                          frequencies)
      source-type-freq (->> source-publications
                          (map :type)
                          frequencies)]
  (plot/compose
    (plot/bar-chart (keys user-type-freq) (vals user-type-freq) :plot-size 600)
    (plot/bar-chart (keys source-type-freq) (vals source-type-freq) :colour "green" )))
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1","values":[{"x":"source","y":15682},{"x":"retweet","y":137833},{"x":"unrelated","y":585},{"x":"reply","y":51629},{"x":"share","y":69441}]},{"name":"54bb9496-3edd-4874-9124-3ba7a1b01909","values":[{"x":"source","y":15682},{"x":"retweet","y":2867},{"x":"reply","y":376},{"x":"unrelated","y":581}]}],"marks":[{"type":"rect","from":{"data":"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}},{"type":"rect","from":{"data":"54bb9496-3edd-4874-9124-3ba7a1b01909"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"green"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1\", :values ({:x \"source\", :y 15682} {:x \"retweet\", :y 137833} {:x \"unrelated\", :y 585} {:x \"reply\", :y 51629} {:x \"share\", :y 69441})} {:name \"54bb9496-3edd-4874-9124-3ba7a1b01909\", :values ({:x \"source\", :y 15682} {:x \"retweet\", :y 2867} {:x \"reply\", :y 376} {:x \"unrelated\", :y 581})}), :marks ({:type \"rect\", :from {:data \"67acb2e7-ae7f-40c3-bc5f-e80d264c6ad1\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}} {:type \"rect\", :from {:data \"54bb9496-3edd-4874-9124-3ba7a1b01909\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"green\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}})}}"}
;; <=

;; **
;;; ### Post Delays
;; **

;; @@
(def all-delays
  (let [users (map :_id (mc/find-maps @db "users" {:screen_name {$in news-accounts}}))]
    (->> (mc/find-maps @db "publications" {:user {$in users}
                                           :ts {$lt (t/date-time 2014 9 1)}})
         (pmap (comp :delays analyzer/analyze-delays analyzer/full-reaction-tree :_id)))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/all-delays</span>","value":"#'unsightly-reserve/all-delays"}
;; <=

;; @@
(short-metrics (->> all-delays flatten (remove #(= 0 %)) (pmap (comp float #(/ % 60)))))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"html","content":"<span class='clj-double'>255.12439145997513</span>","value":"255.12439145997513"}],"value":"[:mean 255.12439145997513]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:std</span>","value":":std"},{"type":"html","content":"<span class='clj-double'>2973.8437219054367</span>","value":"2973.8437219054367"}],"value":"[:std 2973.8437219054367]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:quantiles</span>","value":":quantiles"},{"type":"html","content":"<span class='clj-unkown'>(0.01666666753590107 6.166666507720947 25.950000762939453 105.91666412353516 180445.3125)</span>","value":"(0.01666666753590107 6.166666507720947 25.950000762939453 105.91666412353516 180445.3125)"}],"value":"[:quantiles (0.01666666753590107 6.166666507720947 25.950000762939453 105.91666412353516 180445.3125)]"}],"value":"{:mean 255.12439145997513, :std 2973.8437219054367, :quantiles (0.01666666753590107 6.166666507720947 25.950000762939453 105.91666412353516 180445.3125)}"}
;; <=

;; @@
(quantile (->> all-delays flatten (remove #(= 0 %)) (pmap (comp float #(/ % 60)))) :probs [0.0 0.05 0.25 0.5 0.75 0.95 1.0])
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(0.01666666753590107 0.9333333373069763 6.166666507720947 25.950000762939453 105.91666412353516 807.5566528320296 180445.3125)</span>","value":"(0.01666666753590107 0.9333333373069763 6.166666507720947 25.950000762939453 105.91666412353516 807.5566528320296 180445.3125)"}
;; <=

;; @@
(def avg-size-delays
    (->> all-delays
         (map #(map vector (range (count %)) %))
         (apply concat)
         (group-by first)
         (map (fn [[size coll]] [size ((comp float #(/ % 3600) /)  (reduce + (map (fn [[k v]] v) coll)) (count coll))]))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/avg-size-delays</span>","value":"#'unsightly-reserve/avg-size-delays"}
;; <=

;; @@
(plot/list-plot (sort-by first < avg-size-delays) :symbol-size 20 :plot-size 600)
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"5b146e96-15a4-4566-a929-756ada2bb49c","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"5b146e96-15a4-4566-a929-756ada2bb49c","field":"data.y"}}],"marks":[{"type":"symbol","from":{"data":"5b146e96-15a4-4566-a929-756ada2bb49c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}}],"data":[{"name":"5b146e96-15a4-4566-a929-756ada2bb49c","values":[{"x":0,"y":0.0},{"x":1,"y":0.9228554368019104},{"x":2,"y":1.6491451263427734},{"x":3,"y":2.174469232559204},{"x":4,"y":2.636385440826416},{"x":5,"y":3.340106248855591},{"x":6,"y":3.5059854984283447},{"x":7,"y":3.7040088176727295},{"x":8,"y":4.07981538772583},{"x":9,"y":4.4655866622924805},{"x":10,"y":4.8981194496154785},{"x":11,"y":4.384584903717041},{"x":12,"y":5.684123992919922},{"x":13,"y":5.604371070861816},{"x":14,"y":6.45647668838501},{"x":15,"y":5.974170684814453},{"x":16,"y":6.324690341949463},{"x":17,"y":7.200855731964111},{"x":18,"y":8.090619087219238},{"x":19,"y":8.475643157958984},{"x":20,"y":9.338476181030273},{"x":21,"y":9.324824333190918},{"x":22,"y":11.235406875610352},{"x":23,"y":11.69651985168457},{"x":24,"y":11.798053741455078},{"x":25,"y":11.121397972106934},{"x":26,"y":6.980435848236084},{"x":27,"y":8.570024490356445},{"x":28,"y":8.977987289428711},{"x":29,"y":10.615166664123535},{"x":30,"y":7.784656524658203},{"x":31,"y":8.225046157836914},{"x":32,"y":8.21677303314209},{"x":33,"y":6.720060348510742},{"x":34,"y":6.597111225128174},{"x":35,"y":7.889795303344727},{"x":36,"y":9.415874481201172},{"x":37,"y":8.077350616455078},{"x":38,"y":8.496847152709961},{"x":39,"y":8.355594635009766},{"x":40,"y":10.87581729888916},{"x":41,"y":8.004899978637695},{"x":42,"y":8.424546241760254},{"x":43,"y":8.605813980102539},{"x":44,"y":12.386615753173828},{"x":45,"y":8.428210258483887},{"x":46,"y":11.137494087219238},{"x":47,"y":12.603658676147461},{"x":48,"y":9.719401359558105},{"x":49,"y":13.485665321350098},{"x":50,"y":8.555304527282715},{"x":51,"y":8.514449119567871},{"x":52,"y":12.974648475646973},{"x":53,"y":18.014245986938477},{"x":54,"y":16.35365867614746},{"x":55,"y":16.17875099182129},{"x":56,"y":10.773046493530273},{"x":57,"y":13.826480865478516},{"x":58,"y":20.324974060058594},{"x":59,"y":13.609641075134277},{"x":60,"y":20.271432876586914},{"x":61,"y":21.40566062927246},{"x":62,"y":13.444865226745605},{"x":63,"y":12.799922943115234},{"x":64,"y":15.006525993347168},{"x":65,"y":15.481472969055176},{"x":66,"y":15.367849349975586},{"x":67,"y":17.191463470458984},{"x":68,"y":19.119279861450195},{"x":69,"y":15.265217781066895},{"x":70,"y":17.339160919189453},{"x":71,"y":17.80970001220703},{"x":72,"y":15.035157203674316},{"x":73,"y":14.638605117797852},{"x":74,"y":16.224109649658203},{"x":75,"y":20.806732177734375},{"x":76,"y":20.65973663330078},{"x":77,"y":14.61441707611084},{"x":78,"y":9.463318824768066},{"x":79,"y":9.623549461364746},{"x":80,"y":12.673148155212402},{"x":81,"y":9.06894588470459},{"x":82,"y":6.187222003936768},{"x":83,"y":6.960588455200195},{"x":84,"y":7.846274375915527},{"x":85,"y":8.77253246307373},{"x":86,"y":16.080392837524414},{"x":87,"y":12.604818344116211},{"x":88,"y":8.110899925231934},{"x":89,"y":6.131368160247803},{"x":90,"y":6.349732875823975},{"x":91,"y":6.555266857147217},{"x":92,"y":7.4380998611450195},{"x":93,"y":9.802810668945312},{"x":94,"y":9.979629516601562},{"x":95,"y":7.216261386871338},{"x":96,"y":8.411123275756836},{"x":97,"y":9.494087219238281},{"x":98,"y":10.920763969421387},{"x":99,"y":12.503263473510742},{"x":100,"y":11.053096771240234},{"x":101,"y":11.374944686889648},{"x":102,"y":8.149955749511719},{"x":103,"y":9.888684272766113},{"x":104,"y":10.60635757446289},{"x":105,"y":9.162561416625977},{"x":106,"y":14.862808227539062},{"x":107,"y":8.237058639526367},{"x":108,"y":12.894771575927734},{"x":109,"y":13.00217342376709},{"x":110,"y":9.79296875},{"x":111,"y":10.658507347106934},{"x":112,"y":16.171058654785156},{"x":113,"y":17.59486198425293},{"x":114,"y":9.32060718536377},{"x":115,"y":9.161736488342285},{"x":116,"y":9.883020401000977},{"x":117,"y":14.281006813049316},{"x":118,"y":9.96078109741211},{"x":119,"y":10.584704399108887},{"x":120,"y":12.347430229187012},{"x":121,"y":21.447185516357422},{"x":122,"y":18.177976608276367},{"x":123,"y":16.700000762939453},{"x":124,"y":11.027383804321289},{"x":125,"y":12.5391206741333},{"x":126,"y":9.356499671936035},{"x":127,"y":9.402000427246094},{"x":128,"y":11.322999954223633},{"x":129,"y":16.537805557250977},{"x":130,"y":18.04336166381836},{"x":131,"y":18.11102867126465},{"x":132,"y":21.831111907958984},{"x":133,"y":18.952083587646484},{"x":134,"y":18.990528106689453},{"x":135,"y":19.096694946289062},{"x":136,"y":13.46589469909668},{"x":137,"y":13.502963066101074},{"x":138,"y":11.330184936523438},{"x":139,"y":11.957191467285156},{"x":140,"y":17.86894989013672},{"x":141,"y":26.569414138793945},{"x":142,"y":14.181249618530273},{"x":143,"y":14.564409255981445},{"x":144,"y":6.866944313049316},{"x":145,"y":7.309444427490234},{"x":146,"y":7.9247918128967285},{"x":147,"y":9.312812805175781},{"x":148,"y":7.570173740386963},{"x":149,"y":5.610138893127441},{"x":150,"y":8.664340019226074},{"x":151,"y":6.288055419921875},{"x":152,"y":9.824687957763672},{"x":153,"y":10.374444007873535},{"x":154,"y":41.69388961791992},{"x":155,"y":4.697896957397461},{"x":156,"y":4.908254146575928},{"x":157,"y":3.795158624649048},{"x":158,"y":4.426825523376465},{"x":159,"y":5.421627044677734},{"x":160,"y":4.560396671295166},{"x":161,"y":5.035079479217529},{"x":162,"y":5.812023639678955},{"x":163,"y":5.409841060638428},{"x":164,"y":4.4911112785339355},{"x":165,"y":6.484801769256592},{"x":166,"y":6.086864948272705},{"x":167,"y":2.6110317707061768},{"x":168,"y":2.8415873050689697},{"x":169,"y":2.8985185623168945},{"x":170,"y":4.220555782318115},{"x":171,"y":2.7286574840545654},{"x":172,"y":3.118333339691162},{"x":173,"y":2.8356945514678955},{"x":174,"y":3.160601854324341},{"x":175,"y":3.2396297454833984},{"x":176,"y":3.2959258556365967},{"x":177,"y":3.712916612625122},{"x":178,"y":4.488749980926514},{"x":179,"y":3.181527853012085},{"x":180,"y":3.4040277004241943},{"x":181,"y":3.304490804672241},{"x":182,"y":3.3672685623168945},{"x":183,"y":3.6700000762939453},{"x":184,"y":33.77851867675781},{"x":185,"y":8.847389221191406},{"x":186,"y":9.058666229248047},{"x":187,"y":9.570500373840332},{"x":188,"y":11.752555847167969},{"x":189,"y":21.610332489013672},{"x":190,"y":12.153555870056152},{"x":191,"y":12.316666603088379},{"x":192,"y":12.483833312988281},{"x":193,"y":12.726888656616211},{"x":194,"y":16.623443603515625},{"x":195,"y":16.901222229003906},{"x":196,"y":20.945207595825195},{"x":197,"y":32.61347198486328},{"x":198,"y":17.15176010131836},{"x":199,"y":17.12953758239746},{"x":200,"y":2.7354166507720947},{"x":201,"y":2.501666784286499},{"x":202,"y":3.598750114440918},{"x":203,"y":4.356389045715332},{"x":204,"y":2.480555534362793},{"x":205,"y":2.5222222805023193},{"x":206,"y":2.6472222805023193}]}],"width":600,"height":370.82818603515625,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"5b146e96-15a4-4566-a929-756ada2bb49c\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"5b146e96-15a4-4566-a929-756ada2bb49c\", :field \"data.y\"}}], :marks [{:type \"symbol\", :from {:data \"5b146e96-15a4-4566-a929-756ada2bb49c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}}], :data [{:name \"5b146e96-15a4-4566-a929-756ada2bb49c\", :values ({:x 0, :y 0.0} {:x 1, :y 0.92285544} {:x 2, :y 1.6491451} {:x 3, :y 2.1744692} {:x 4, :y 2.6363854} {:x 5, :y 3.3401062} {:x 6, :y 3.5059855} {:x 7, :y 3.7040088} {:x 8, :y 4.0798154} {:x 9, :y 4.4655867} {:x 10, :y 4.8981194} {:x 11, :y 4.384585} {:x 12, :y 5.684124} {:x 13, :y 5.604371} {:x 14, :y 6.4564767} {:x 15, :y 5.9741707} {:x 16, :y 6.3246903} {:x 17, :y 7.2008557} {:x 18, :y 8.090619} {:x 19, :y 8.475643} {:x 20, :y 9.338476} {:x 21, :y 9.324824} {:x 22, :y 11.235407} {:x 23, :y 11.69652} {:x 24, :y 11.798054} {:x 25, :y 11.121398} {:x 26, :y 6.980436} {:x 27, :y 8.5700245} {:x 28, :y 8.977987} {:x 29, :y 10.615167} {:x 30, :y 7.7846565} {:x 31, :y 8.225046} {:x 32, :y 8.216773} {:x 33, :y 6.7200603} {:x 34, :y 6.597111} {:x 35, :y 7.8897953} {:x 36, :y 9.4158745} {:x 37, :y 8.077351} {:x 38, :y 8.496847} {:x 39, :y 8.355595} {:x 40, :y 10.875817} {:x 41, :y 8.0049} {:x 42, :y 8.424546} {:x 43, :y 8.605814} {:x 44, :y 12.386616} {:x 45, :y 8.42821} {:x 46, :y 11.137494} {:x 47, :y 12.603659} {:x 48, :y 9.719401} {:x 49, :y 13.485665} {:x 50, :y 8.555305} {:x 51, :y 8.514449} {:x 52, :y 12.974648} {:x 53, :y 18.014246} {:x 54, :y 16.353659} {:x 55, :y 16.178751} {:x 56, :y 10.7730465} {:x 57, :y 13.826481} {:x 58, :y 20.324974} {:x 59, :y 13.609641} {:x 60, :y 20.271433} {:x 61, :y 21.40566} {:x 62, :y 13.444865} {:x 63, :y 12.799923} {:x 64, :y 15.006526} {:x 65, :y 15.481473} {:x 66, :y 15.367849} {:x 67, :y 17.191463} {:x 68, :y 19.11928} {:x 69, :y 15.265218} {:x 70, :y 17.33916} {:x 71, :y 17.8097} {:x 72, :y 15.035157} {:x 73, :y 14.638605} {:x 74, :y 16.22411} {:x 75, :y 20.806732} {:x 76, :y 20.659737} {:x 77, :y 14.614417} {:x 78, :y 9.463319} {:x 79, :y 9.623549} {:x 80, :y 12.673148} {:x 81, :y 9.068946} {:x 82, :y 6.187222} {:x 83, :y 6.9605885} {:x 84, :y 7.8462744} {:x 85, :y 8.772532} {:x 86, :y 16.080393} {:x 87, :y 12.604818} {:x 88, :y 8.1109} {:x 89, :y 6.131368} {:x 90, :y 6.349733} {:x 91, :y 6.555267} {:x 92, :y 7.4381} {:x 93, :y 9.802811} {:x 94, :y 9.9796295} {:x 95, :y 7.2162614} {:x 96, :y 8.411123} {:x 97, :y 9.494087} {:x 98, :y 10.920764} {:x 99, :y 12.503263} {:x 100, :y 11.053097} {:x 101, :y 11.374945} {:x 102, :y 8.149956} {:x 103, :y 9.888684} {:x 104, :y 10.606358} {:x 105, :y 9.162561} {:x 106, :y 14.862808} {:x 107, :y 8.237059} {:x 108, :y 12.894772} {:x 109, :y 13.002173} {:x 110, :y 9.792969} {:x 111, :y 10.658507} {:x 112, :y 16.171059} {:x 113, :y 17.594862} {:x 114, :y 9.320607} {:x 115, :y 9.1617365} {:x 116, :y 9.88302} {:x 117, :y 14.281007} {:x 118, :y 9.960781} {:x 119, :y 10.584704} {:x 120, :y 12.34743} {:x 121, :y 21.447186} {:x 122, :y 18.177977} {:x 123, :y 16.7} {:x 124, :y 11.027384} {:x 125, :y 12.539121} {:x 126, :y 9.3565} {:x 127, :y 9.402} {:x 128, :y 11.323} {:x 129, :y 16.537806} {:x 130, :y 18.043362} {:x 131, :y 18.111029} {:x 132, :y 21.831112} {:x 133, :y 18.952084} {:x 134, :y 18.990528} {:x 135, :y 19.096695} {:x 136, :y 13.465895} {:x 137, :y 13.502963} {:x 138, :y 11.330185} {:x 139, :y 11.957191} {:x 140, :y 17.86895} {:x 141, :y 26.569414} {:x 142, :y 14.18125} {:x 143, :y 14.564409} {:x 144, :y 6.8669443} {:x 145, :y 7.3094444} {:x 146, :y 7.924792} {:x 147, :y 9.312813} {:x 148, :y 7.5701737} {:x 149, :y 5.610139} {:x 150, :y 8.66434} {:x 151, :y 6.2880554} {:x 152, :y 9.824688} {:x 153, :y 10.374444} {:x 154, :y 41.69389} {:x 155, :y 4.697897} {:x 156, :y 4.908254} {:x 157, :y 3.7951586} {:x 158, :y 4.4268255} {:x 159, :y 5.421627} {:x 160, :y 4.5603967} {:x 161, :y 5.0350795} {:x 162, :y 5.8120236} {:x 163, :y 5.409841} {:x 164, :y 4.4911113} {:x 165, :y 6.484802} {:x 166, :y 6.086865} {:x 167, :y 2.6110318} {:x 168, :y 2.8415873} {:x 169, :y 2.8985186} {:x 170, :y 4.220556} {:x 171, :y 2.7286575} {:x 172, :y 3.1183333} {:x 173, :y 2.8356946} {:x 174, :y 3.1606019} {:x 175, :y 3.2396297} {:x 176, :y 3.2959259} {:x 177, :y 3.7129166} {:x 178, :y 4.48875} {:x 179, :y 3.1815279} {:x 180, :y 3.4040277} {:x 181, :y 3.3044908} {:x 182, :y 3.3672686} {:x 183, :y 3.67} {:x 184, :y 33.77852} {:x 185, :y 8.847389} {:x 186, :y 9.058666} {:x 187, :y 9.5705} {:x 188, :y 11.752556} {:x 189, :y 21.610332} {:x 190, :y 12.153556} {:x 191, :y 12.316667} {:x 192, :y 12.483833} {:x 193, :y 12.726889} {:x 194, :y 16.623444} {:x 195, :y 16.901222} {:x 196, :y 20.945208} {:x 197, :y 32.613472} {:x 198, :y 17.15176} {:x 199, :y 17.129538} {:x 200, :y 2.7354167} {:x 201, :y 2.5016668} {:x 202, :y 3.59875} {:x 203, :y 4.356389} {:x 204, :y 2.4805555} {:x 205, :y 2.5222223} {:x 206, :y 2.6472223})}], :width 600, :height 370.8282, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(def delay-lm
  (let [delay-sizes (->> all-delays
  	                     (map #(pmap vector (range (count %)) %))
                         (apply concat)
                         (pmap (fn [[k v]] [k (/ v 60)])))]
  (linear-model (pmap first delay-sizes) (pmap second delay-sizes))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/delay-lm</span>","value":"#'unsightly-reserve/delay-lm"}
;; <=

;; @@
(mc/find-one-as-map @db "users" {:screen_name {$in news-accounts}})
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:_id</span>","value":":_id"},{"type":"html","content":"<span class='clj-unkown'>#&lt;ObjectId 5469e13c657a10b9eb99465e&gt;</span>","value":"#<ObjectId 5469e13c657a10b9eb99465e>"}],"value":"[:_id #<ObjectId 5469e13c657a10b9eb99465e>]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#&lt;DateTime 2007-05-03T10:42:42.000+02:00&gt;</span>","value":"#<DateTime 2007-05-03T10:42:42.000+02:00>"}],"value":"[:created_at #<DateTime 2007-05-03T10:42:42.000+02:00>]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:screen_name</span>","value":":screen_name"},{"type":"html","content":"<span class='clj-string'>&quot;tagesschau&quot;</span>","value":"\"tagesschau\""}],"value":"[:screen_name \"tagesschau\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>5734902</span>","value":"5734902"}],"value":"[:id 5734902]"}],"value":"{:_id #<ObjectId 5469e13c657a10b9eb99465e>, :created_at #<DateTime 2007-05-03T10:42:42.000+02:00>, :screen_name \"tagesschau\", :id 5734902}"}
;; <=

;; **
;;; ## Post Time
;; **

;; @@
(def source-ids (map :_id (mc/find-maps @db "users" {:screen_name {$in news-accounts}})))
(def source-publications (mc/find-maps @db "publications" {:user {$in source-ids}}))
(def user-publications (mc/find-maps @db "publications" {:user {$nin source-ids}}))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;unsightly-reserve/user-publications</span>","value":"#'unsightly-reserve/user-publications"}
;; <=

;; @@
(letfn [(ts-freq [pubs]
          (->> pubs
           (map (comp t/hour :ts))
           frequencies
           (map (fn [[k v]] [k (/ v (count pubs))]))
           (sort-by first)))]

  (compose
    (list-plot (ts-freq user-publications) :plot-size 800 :joined true :colour "green" :plot-range [:all [0 0.1]])
    (list-plot (ts-freq source-publications) :plot-size 800 :joined true :colour "red")))

;; @@
;; =>
;;; {"type":"vega","content":{"width":800,"height":494.4375915527344,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"38e181d6-f46f-477f-bc9a-e046ccdb3e40","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[0,0.1]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"38e181d6-f46f-477f-bc9a-e046ccdb3e40","values":[{"x":0,"y":0.02308330333808041},{"x":1,"y":0.01367783533388629},{"x":2,"y":0.008771655268470555},{"x":3,"y":0.005692577348628304},{"x":4,"y":0.005414795223712421},{"x":5,"y":0.006291178265700559},{"x":6,"y":0.01135776772719448},{"x":7,"y":0.02496909184807274},{"x":8,"y":0.0464835130440226},{"x":9,"y":0.06044304292711936},{"x":10,"y":0.06223493325404153},{"x":11,"y":0.06501666692749496},{"x":12,"y":0.0656974287547536},{"x":13,"y":0.06424983176575533},{"x":14,"y":0.06518881359645691},{"x":15,"y":0.06113945445155636},{"x":16,"y":0.05588506862392213},{"x":17,"y":0.05846726865835146},{"x":18,"y":0.05955101018795286},{"x":19,"y":0.05622153711325686},{"x":20,"y":0.0506267703719933},{"x":21,"y":0.04835756428113116},{"x":22,"y":0.04638179001236326},{"x":23,"y":0.03479710167608257}]},{"name":"e7186693-4376-4253-803e-51d92669100d","values":[{"x":0,"y":0.005436733856490742},{"x":1,"y":0.004308355131558701},{"x":2,"y":0.003898035595219777},{"x":3,"y":0.004410935015643432},{"x":4,"y":0.005385443914448377},{"x":5,"y":0.009745088988049443},{"x":6,"y":0.01933630814997179},{"x":7,"y":0.037749397343181},{"x":8,"y":0.05631635636251731},{"x":9,"y":0.06626660511873622},{"x":10,"y":0.06754885366979535},{"x":11,"y":0.06995948094578654},{"x":12,"y":0.07124172949684567},{"x":13,"y":0.06447145714725341},{"x":14,"y":0.07195978868543879},{"x":15,"y":0.07139559932297276},{"x":16,"y":0.07078012001846438},{"x":17,"y":0.07175462891726932},{"x":18,"y":0.06329178848027903},{"x":19,"y":0.04821254551982356},{"x":20,"y":0.03651843873416423},{"x":21,"y":0.03390265169000359},{"x":22,"y":0.03020977586295327},{"x":23,"y":0.0158998820331333}]}],"marks":[{"type":"line","from":{"data":"38e181d6-f46f-477f-bc9a-e046ccdb3e40"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"e7186693-4376-4253-803e-51d92669100d"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 800, :height 494.4376, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"38e181d6-f46f-477f-bc9a-e046ccdb3e40\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [0 0.1]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"38e181d6-f46f-477f-bc9a-e046ccdb3e40\", :values ({:x 0, :y 1475/63899} {:x 1, :y 874/63899} {:x 2, :y 1121/127798} {:x 3, :y 1455/255596} {:x 4, :y 346/63899} {:x 5, :y 402/63899} {:x 6, :y 2903/255596} {:x 7, :y 3191/127798} {:x 8, :y 11881/255596} {:x 9, :y 15449/255596} {:x 10, :y 15907/255596} {:x 11, :y 8309/127798} {:x 12, :y 4198/63899} {:x 13, :y 8211/127798} {:x 14, :y 8331/127798} {:x 15, :y 15627/255596} {:x 16, :y 3571/63899} {:x 17, :y 3736/63899} {:x 18, :y 15221/255596} {:x 19, :y 7185/127798} {:x 20, :y 3235/63899} {:x 21, :y 3090/63899} {:x 22, :y 11855/255596} {:x 23, :y 4447/127798})} {:name \"e7186693-4376-4253-803e-51d92669100d\", :values ({:x 0, :y 106/19497} {:x 1, :y 28/6499} {:x 2, :y 76/19497} {:x 3, :y 86/19497} {:x 4, :y 35/6499} {:x 5, :y 190/19497} {:x 6, :y 377/19497} {:x 7, :y 736/19497} {:x 8, :y 366/6499} {:x 9, :y 1292/19497} {:x 10, :y 439/6499} {:x 11, :y 1364/19497} {:x 12, :y 463/6499} {:x 13, :y 419/6499} {:x 14, :y 1403/19497} {:x 15, :y 464/6499} {:x 16, :y 460/6499} {:x 17, :y 1399/19497} {:x 18, :y 1234/19497} {:x 19, :y 940/19497} {:x 20, :y 712/19497} {:x 21, :y 661/19497} {:x 22, :y 589/19497} {:x 23, :y 310/19497})}), :marks ({:type \"line\", :from {:data \"38e181d6-f46f-477f-bc9a-e046ccdb3e40\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e7186693-4376-4253-803e-51d92669100d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; @@
(letfn [(hs-count [pubs]
          (->> pubs
           (map :hashtags)
           flatten
               (remove nil?)
           (into #{})
            count
           ))]

  (bar-chart ["sources" "users"] [(/ (hs-count source-publications) (count source-publications))
                                  (/ (hs-count user-publications) (count user-publications))]))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295","values":[{"x":"sources","y":0.2249063958557727},{"x":"users","y":0.06057215292884083}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"8cf0b8ed-bd18-4b8d-a6d4-bbfb6a913295\", :values ({:x \"sources\", :y 4385/19497} {:x \"users\", :y 7741/127798})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; @@
(let [type-freqs (->> (mc/find-maps @db "publications")
                      (map :type)
                      frequencies
                      (map (fn [[k v]] [k (/ v (mc/count @db "publications"))]))
                      (into {})
                      )]
  (bar-chart (keys type-freqs) (vals type-freqs)))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"ordinal","range":"width","domain":{"data":"9c4bbe19-df1c-4dce-9109-8921e88fbe1b","field":"data.x"}},{"name":"y","range":"height","nice":true,"domain":{"data":"9c4bbe19-df1c-4dce-9109-8921e88fbe1b","field":"data.y"}}],"marks":[{"type":"rect","from":{"data":"9c4bbe19-df1c-4dce-9109-8921e88fbe1b"},"properties":{"enter":{"y":{"scale":"y","field":"data.y"},"width":{"offset":-1,"scale":"x","band":true},"x":{"scale":"x","field":"data.x"},"y2":{"scale":"y","value":0}},"update":{"fill":{"value":"steelblue"},"opacity":{"value":1}},"hover":{"fill":{"value":"#FF29D2"}}}}],"data":[{"name":"9c4bbe19-df1c-4dce-9109-8921e88fbe1b","values":[{"x":"source","y":0.05698436528737554},{"x":"retweet","y":0.5009578578880597},{"x":"unrelated","y":0.002112013028321331},{"x":"reply","y":0.1875983758219947},{"x":"share","y":0.2523473879742487}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"ordinal\", :range \"width\", :domain {:data \"9c4bbe19-df1c-4dce-9109-8921e88fbe1b\", :field \"data.x\"}} {:name \"y\", :range \"height\", :nice true, :domain {:data \"9c4bbe19-df1c-4dce-9109-8921e88fbe1b\", :field \"data.y\"}}], :marks [{:type \"rect\", :from {:data \"9c4bbe19-df1c-4dce-9109-8921e88fbe1b\"}, :properties {:enter {:y {:scale \"y\", :field \"data.y\"}, :width {:offset -1, :scale \"x\", :band true}, :x {:scale \"x\", :field \"data.x\"}, :y2 {:scale \"y\", :value 0}}, :update {:fill {:value \"steelblue\"}, :opacity {:value 1}}, :hover {:fill {:value \"#FF29D2\"}}}}], :data [{:name \"9c4bbe19-df1c-4dce-9109-8921e88fbe1b\", :values ({:x \"source\", :y 15676/275093} {:x \"retweet\", :y 137810/275093} {:x \"unrelated\", :y 83/39299} {:x \"reply\", :y 51607/275093} {:x \"share\", :y 9917/39299})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; ## ggplot experiments
;; **

;; @@
(let [tweet-count (map #(mc/count @db "tweets" {:created_at {$gte % $lt (t/plus % (t/days 1))}}) dates)
      days (range  2 (inc (inc days-running)))
      dat {:x days :y tweet-count}]
    (gg4clj/view
  [[:<- :d (gg4clj/data-frame dat)]
   [:qplot :x :y 
    {:data :d 
     :geom [:c "point" "line"] 
     :ylab "day" 
     :xlab "count"
     :main "Daily tweet count"}]]))
;; @@
;; =>
;;; {"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"468pt\" height=\"289pt\" viewBox=\"0 0 468 289\" version=\"1.1\">\n<defs>\n<g>\n<symbol overflow=\"visible\" id=\"dbd72c8b-d330-4f37-9183-07dda93cb1ed\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d639ac98-08fd-4a8f-8e4e-85d4f90a541c\">\n<path style=\"stroke:none;\" d=\"M 4.921875 -1.921875 C 4.921875 -2.671875 4.53125 -3.203125 3.75 -3.578125 C 4.453125 -4 4.6875 -4.34375 4.6875 -4.984375 C 4.6875 -6.046875 3.84375 -6.796875 2.640625 -6.796875 C 1.4375 -6.796875 0.59375 -6.046875 0.59375 -4.984375 C 0.59375 -4.359375 0.828125 -4.015625 1.515625 -3.578125 C 0.734375 -3.203125 0.359375 -2.671875 0.359375 -1.921875 C 0.359375 -0.6875 1.296875 0.140625 2.640625 0.140625 C 3.984375 0.140625 4.921875 -0.6875 4.921875 -1.921875 Z M 3.8125 -4.96875 C 3.8125 -4.34375 3.34375 -3.921875 2.640625 -3.921875 C 1.921875 -3.921875 1.453125 -4.34375 1.453125 -4.984375 C 1.453125 -5.625 1.921875 -6.046875 2.640625 -6.046875 C 3.359375 -6.046875 3.8125 -5.625 3.8125 -4.96875 Z M 4.0625 -1.90625 C 4.0625 -1.109375 3.484375 -0.609375 2.625 -0.609375 C 1.796875 -0.609375 1.21875 -1.109375 1.21875 -1.90625 C 1.21875 -2.703125 1.796875 -3.203125 2.640625 -3.203125 C 3.484375 -3.203125 4.0625 -2.703125 4.0625 -1.90625 Z M 4.0625 -1.90625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\">\n<path style=\"stroke:none;\" d=\"M 4.859375 -3.265625 C 4.859375 -5.625 4.109375 -6.796875 2.640625 -6.796875 C 1.171875 -6.796875 0.40625 -5.609375 0.40625 -3.328125 C 0.40625 -1.03125 1.1875 0.140625 2.640625 0.140625 C 4.078125 0.140625 4.859375 -1.03125 4.859375 -3.265625 Z M 4 -3.34375 C 4 -1.421875 3.5625 -0.5625 2.625 -0.5625 C 1.734375 -0.5625 1.28125 -1.453125 1.28125 -3.3125 C 1.28125 -5.1875 1.734375 -6.046875 2.640625 -6.046875 C 3.546875 -6.046875 4 -5.171875 4 -3.34375 Z M 4 -3.34375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"5ee40210-39e4-4da7-92b9-89d47262aebf\">\n<path style=\"stroke:none;\" d=\"M 3.328125 0 L 3.328125 -6.796875 L 2.765625 -6.796875 C 2.46875 -5.75 2.28125 -5.609375 0.984375 -5.453125 L 0.984375 -4.84375 L 2.484375 -4.84375 L 2.484375 0 Z M 3.328125 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"e571ccc6-0d6e-48f3-a490-775ca39c0071\">\n<path style=\"stroke:none;\" d=\"M 4.90625 -4.8125 C 4.90625 -5.953125 4.015625 -6.796875 2.71875 -6.796875 C 1.328125 -6.796875 0.53125 -6.09375 0.484375 -4.4375 L 1.328125 -4.4375 C 1.390625 -5.578125 1.859375 -6.0625 2.703125 -6.0625 C 3.46875 -6.0625 4.03125 -5.515625 4.03125 -4.78125 C 4.03125 -4.25 3.71875 -3.796875 3.125 -3.4375 L 2.234375 -2.9375 C 0.8125 -2.140625 0.40625 -1.5 0.328125 0 L 4.859375 0 L 4.859375 -0.828125 L 1.28125 -0.828125 C 1.359375 -1.390625 1.671875 -1.75 2.5 -2.234375 L 3.46875 -2.75 C 4.40625 -3.265625 4.90625 -3.96875 4.90625 -4.8125 Z M 4.90625 -4.8125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"696c7771-561d-4311-b0ae-6f31fbee0cdb\">\n<path style=\"stroke:none;\" d=\"M 4.859375 -1.96875 C 4.859375 -2.796875 4.515625 -3.28125 3.703125 -3.5625 C 4.34375 -3.8125 4.65625 -4.25 4.65625 -4.9375 C 4.65625 -6.109375 3.875 -6.796875 2.578125 -6.796875 C 1.203125 -6.796875 0.484375 -6.046875 0.453125 -4.609375 L 1.296875 -4.609375 C 1.3125 -5.609375 1.734375 -6.0625 2.59375 -6.0625 C 3.34375 -6.0625 3.796875 -5.625 3.796875 -4.90625 C 3.796875 -4.171875 3.46875 -3.875 2.125 -3.875 L 2.125 -3.171875 L 2.578125 -3.171875 C 3.515625 -3.171875 3.984375 -2.71875 3.984375 -1.96875 C 3.984375 -1.109375 3.46875 -0.609375 2.578125 -0.609375 C 1.65625 -0.609375 1.203125 -1.0625 1.15625 -2.046875 L 0.3125 -2.046875 C 0.40625 -0.53125 1.15625 0.140625 2.546875 0.140625 C 3.953125 0.140625 4.859375 -0.6875 4.859375 -1.96875 Z M 4.859375 -1.96875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d6ba5428-8831-4d30-a0f2-c2923fdbd868\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"8111a541-6c91-4eef-8905-69ee3127da4c\">\n<path style=\"stroke:none;\" d=\"M 5.71875 -2.15625 L 4.71875 -2.15625 C 4.546875 -1.15625 4.03125 -0.75 3.1875 -0.75 C 2.078125 -0.75 1.421875 -1.59375 1.421875 -3.078125 C 1.421875 -4.65625 2.0625 -5.546875 3.15625 -5.546875 C 4 -5.546875 4.53125 -5.046875 4.640625 -4.171875 L 5.65625 -4.171875 C 5.53125 -5.71875 4.578125 -6.46875 3.171875 -6.46875 C 1.46875 -6.46875 0.375 -5.171875 0.375 -3.078125 C 0.375 -1.0625 1.453125 0.1875 3.15625 0.1875 C 4.65625 0.1875 5.609375 -0.71875 5.71875 -2.15625 Z M 5.71875 -2.15625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"0d8f648c-9882-404d-aa4b-d2062fa9c3c9\">\n<path style=\"stroke:none;\" d=\"M 6.125 -3.09375 C 6.125 -5.265625 5.078125 -6.46875 3.265625 -6.46875 C 1.5 -6.46875 0.4375 -5.25 0.4375 -3.140625 C 0.4375 -1.03125 1.484375 0.1875 3.28125 0.1875 C 5.046875 0.1875 6.125 -1.03125 6.125 -3.09375 Z M 5.078125 -3.109375 C 5.078125 -1.625 4.375 -0.75 3.28125 -0.75 C 2.15625 -0.75 1.46875 -1.625 1.46875 -3.140625 C 1.46875 -4.65625 2.15625 -5.546875 3.28125 -5.546875 C 4.40625 -5.546875 5.078125 -4.671875 5.078125 -3.109375 Z M 5.078125 -3.109375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"94f9e82d-61b9-46c5-9cb5-e2fc1b9905d9\">\n<path style=\"stroke:none;\" d=\"M 5.78125 0 L 5.78125 -6.28125 L 4.78125 -6.28125 L 4.78125 -2.8125 C 4.78125 -1.53125 4.109375 -0.703125 3.078125 -0.703125 C 2.28125 -0.703125 1.78125 -1.171875 1.78125 -1.9375 L 1.78125 -6.28125 L 0.78125 -6.28125 L 0.78125 -1.53125 C 0.78125 -0.484375 1.5625 0.1875 2.78125 0.1875 C 3.703125 0.1875 4.296875 -0.140625 4.890625 -0.96875 L 4.890625 0 Z M 5.78125 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"501b7f07-4af1-4793-bfe5-33385f815619\">\n<path style=\"stroke:none;\" d=\"M 5.84375 0 L 5.84375 -4.75 C 5.84375 -5.796875 5.0625 -6.46875 3.859375 -6.46875 C 2.921875 -6.46875 2.3125 -6.109375 1.765625 -5.234375 L 1.765625 -6.28125 L 0.84375 -6.28125 L 0.84375 0 L 1.84375 0 L 1.84375 -3.46875 C 1.84375 -4.75 2.53125 -5.59375 3.546875 -5.59375 C 4.34375 -5.59375 4.84375 -5.109375 4.84375 -4.359375 L 4.84375 0 Z M 5.84375 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"37cecfe4-bc90-4c12-a916-6ca98635432b\">\n<path style=\"stroke:none;\" d=\"M 3.046875 0 L 3.046875 -0.84375 C 2.921875 -0.796875 2.765625 -0.796875 2.5625 -0.796875 C 2.140625 -0.796875 2.015625 -0.90625 2.015625 -1.359375 L 2.015625 -5.46875 L 3.046875 -5.46875 L 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.90625 C 1.015625 -0.28125 1.453125 0.078125 2.234375 0.078125 C 2.46875 0.078125 2.71875 0.0625 3.046875 0 Z M 3.046875 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"983abad1-ea22-4f56-a559-83cb9a32c5f9\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"dc80ca57-c648-4648-8e61-fa9f94ef726a\">\n<path style=\"stroke:none;\" d=\"M 0 -5.9375 L -8.75 -5.9375 L -8.75 -4.9375 L -5.5 -4.9375 C -6.125 -4.53125 -6.46875 -3.859375 -6.46875 -3.015625 C -6.46875 -1.375 -5.203125 -0.3125 -3.203125 -0.3125 C -1.078125 -0.3125 0.1875 -1.359375 0.1875 -3.046875 C 0.1875 -3.90625 -0.140625 -4.515625 -0.921875 -5.046875 L 0 -5.046875 Z M -3.125 -4.9375 C -1.671875 -4.9375 -0.75 -4.25 -0.75 -3.1875 C -0.75 -2.09375 -1.6875 -1.359375 -3.140625 -1.359375 C -4.609375 -1.359375 -5.53125 -2.09375 -5.53125 -3.1875 C -5.53125 -4.265625 -4.578125 -4.9375 -3.125 -4.9375 Z M -3.125 -4.9375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"da61e376-a2cd-4596-9b66-7c12ccbf3300\">\n<path style=\"stroke:none;\" d=\"M -0.03125 -6.421875 L -0.78125 -6.421875 C -0.75 -6.3125 -0.75 -6.265625 -0.75 -6.203125 C -0.75 -5.859375 -0.9375 -5.65625 -1.25 -5.65625 L -4.75 -5.65625 C -5.875 -5.65625 -6.46875 -4.84375 -6.46875 -3.296875 C -6.46875 -1.78125 -5.875 -0.84375 -4.421875 -0.78125 L -4.421875 -1.78125 C -5.203125 -1.875 -5.546875 -2.328125 -5.546875 -3.265625 C -5.546875 -4.15625 -5.203125 -4.671875 -4.609375 -4.671875 L -4.34375 -4.671875 C -3.921875 -4.671875 -3.75 -4.421875 -3.640625 -3.625 C -3.46875 -2.203125 -3.421875 -1.984375 -3.265625 -1.609375 C -2.96875 -0.875 -2.40625 -0.5 -1.625 -0.5 C -0.484375 -0.5 0.1875 -1.296875 0.1875 -2.5625 C 0.1875 -3.375 -0.15625 -4.15625 -0.75 -4.703125 C -0.265625 -4.8125 0.078125 -5.25 0.078125 -5.734375 C 0.078125 -5.9375 0.0625 -6.09375 -0.03125 -6.421875 Z M -2.171875 -4.671875 C -1.265625 -4.671875 -0.703125 -3.75 -0.703125 -2.78125 C -0.703125 -2 -0.96875 -1.546875 -1.65625 -1.546875 C -2.3125 -1.546875 -2.609375 -1.984375 -2.765625 -3.0625 C -2.90625 -4.109375 -2.953125 -4.328125 -3.109375 -4.671875 Z M -2.171875 -4.671875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"62e3b26d-5a64-4e0f-a331-5ce407dbe9bf\">\n<path style=\"stroke:none;\" d=\"M -6.28125 -5.734375 L -6.28125 -4.65625 L -1.390625 -2.921875 L -6.28125 -1.3125 L -6.28125 -0.234375 L 0.03125 -2.359375 L 1.015625 -1.984375 C 1.46875 -1.8125 1.625 -1.609375 1.625 -1.171875 C 1.625 -1.03125 1.609375 -0.859375 1.5625 -0.640625 L 2.453125 -0.640625 C 2.5625 -0.859375 2.609375 -1.0625 2.609375 -1.3125 C 2.609375 -2.03125 2.21875 -2.609375 1.3125 -2.9375 Z M -6.28125 -5.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"917d2d88-ffde-48b2-86da-c5c5d01f9807\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"f5b8052c-b8ea-4553-b50d-5e3072f3eaa6\">\n<path style=\"stroke:none;\" d=\"M 9.609375 -5.265625 C 9.609375 -8.515625 8 -10.5 5.328125 -10.5 L 1.28125 -10.5 L 1.28125 0 L 5.328125 0 C 7.984375 0 9.609375 -1.984375 9.609375 -5.265625 Z M 8.265625 -5.25 C 8.265625 -2.59375 7.171875 -1.1875 5.09375 -1.1875 L 2.625 -1.1875 L 2.625 -9.328125 L 5.09375 -9.328125 C 7.171875 -9.328125 8.265625 -7.921875 8.265625 -5.25 Z M 8.265625 -5.25 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"5d074dbf-8f1e-429a-8b30-c4a10ea08679\">\n<path style=\"stroke:none;\" d=\"M 7.703125 -0.03125 L 7.703125 -0.9375 C 7.578125 -0.90625 7.515625 -0.90625 7.453125 -0.90625 C 7.03125 -0.90625 6.796875 -1.125 6.796875 -1.5 L 6.796875 -5.703125 C 6.796875 -7.046875 5.8125 -7.765625 3.96875 -7.765625 C 2.125 -7.765625 1.015625 -7.0625 0.9375 -5.3125 L 2.140625 -5.3125 C 2.25 -6.234375 2.796875 -6.65625 3.921875 -6.65625 C 5 -6.65625 5.609375 -6.25 5.609375 -5.53125 L 5.609375 -5.21875 C 5.609375 -4.703125 5.296875 -4.5 4.34375 -4.375 C 2.65625 -4.15625 2.390625 -4.109375 1.9375 -3.921875 C 1.046875 -3.5625 0.609375 -2.875 0.609375 -1.953125 C 0.609375 -0.59375 1.5625 0.21875 3.078125 0.21875 C 4.046875 0.21875 4.984375 -0.1875 5.640625 -0.890625 C 5.78125 -0.3125 6.296875 0.09375 6.890625 0.09375 C 7.125 0.09375 7.3125 0.078125 7.703125 -0.03125 Z M 5.609375 -2.609375 C 5.609375 -1.53125 4.515625 -0.828125 3.34375 -0.828125 C 2.40625 -0.828125 1.859375 -1.171875 1.859375 -1.984375 C 1.859375 -2.78125 2.390625 -3.125 3.671875 -3.3125 C 4.9375 -3.484375 5.203125 -3.546875 5.609375 -3.734375 Z M 5.609375 -2.609375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d6ec8a4d-9c4e-47fd-8fe2-72be588f70dd\">\n<path style=\"stroke:none;\" d=\"M 2.203125 0 L 2.203125 -7.546875 L 1.015625 -7.546875 L 1.015625 0 Z M 2.359375 -8.6875 L 2.359375 -10.1875 L 0.859375 -10.1875 L 0.859375 -8.6875 Z M 2.359375 -8.6875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"75134c1a-a9dc-4126-89cd-9b341276b30c\">\n<path style=\"stroke:none;\" d=\"M 2.171875 0 L 2.171875 -10.5 L 0.984375 -10.5 L 0.984375 0 Z M 2.171875 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"6acb9b6f-f404-4c93-9a01-164fae4e71e1\">\n<path style=\"stroke:none;\" d=\"M 6.890625 -7.546875 L 5.59375 -7.546875 L 3.5 -1.671875 L 1.5625 -7.546875 L 0.28125 -7.546875 L 2.84375 0.03125 L 2.375 1.21875 C 2.171875 1.75 1.9375 1.953125 1.40625 1.953125 C 1.234375 1.953125 1.03125 1.9375 0.78125 1.875 L 0.78125 2.953125 C 1.015625 3.078125 1.265625 3.140625 1.578125 3.140625 C 2.4375 3.140625 3.125 2.671875 3.53125 1.578125 Z M 6.890625 -7.546875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"912faad5-cdb2-4afc-9c18-fcacc48d8d9c\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"96221737-75c2-4193-beb6-8c57fe127a45\">\n<path style=\"stroke:none;\" d=\"M 3.65625 0 L 3.65625 -1.015625 C 3.5 -0.96875 3.3125 -0.953125 3.078125 -0.953125 C 2.5625 -0.953125 2.421875 -1.09375 2.421875 -1.625 L 2.421875 -6.5625 L 3.65625 -6.5625 L 3.65625 -7.546875 L 2.421875 -7.546875 L 2.421875 -9.625 L 1.21875 -9.625 L 1.21875 -7.546875 L 0.203125 -7.546875 L 0.203125 -6.5625 L 1.21875 -6.5625 L 1.21875 -1.09375 C 1.21875 -0.328125 1.75 0.09375 2.671875 0.09375 C 2.96875 0.09375 3.25 0.078125 3.65625 0 Z M 3.65625 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"cc6b862e-4d32-4bf0-8d6b-df509e11720d\">\n<path style=\"stroke:none;\" d=\"M 10.203125 -7.546875 L 8.84375 -7.546875 L 7.34375 -1.671875 L 5.859375 -7.546875 L 4.390625 -7.546875 L 2.953125 -1.671875 L 1.40625 -7.546875 L 0.09375 -7.546875 L 2.28125 0 L 3.625 0 L 5.078125 -5.921875 L 6.609375 0 L 7.984375 0 Z M 10.203125 -7.546875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"f221d37a-1aea-4952-a61b-5205a6117d06\">\n<path style=\"stroke:none;\" d=\"M 7.390625 -3.421875 C 7.390625 -4.53125 7.296875 -5.21875 7.09375 -5.78125 C 6.59375 -7.015625 5.453125 -7.765625 4.03125 -7.765625 C 1.9375 -7.765625 0.578125 -6.203125 0.578125 -3.734375 C 0.578125 -1.25 1.890625 0.21875 4 0.21875 C 5.734375 0.21875 6.921875 -0.765625 7.234375 -2.296875 L 6.015625 -2.296875 C 5.6875 -1.296875 5.015625 -0.890625 4.046875 -0.890625 C 2.796875 -0.890625 1.859375 -1.703125 1.828125 -3.421875 Z M 6.109375 -4.5 C 6.109375 -4.5 6.109375 -4.4375 6.09375 -4.40625 L 1.859375 -4.40625 C 1.953125 -5.75 2.8125 -6.65625 4.015625 -6.65625 C 5.203125 -6.65625 6.109375 -5.671875 6.109375 -4.5 Z M 6.109375 -4.5 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"18f7ffda-c89a-450d-b5e1-d0f741987a3f\">\n<path style=\"stroke:none;\" d=\"M 6.875 -2.59375 L 5.65625 -2.59375 C 5.453125 -1.390625 4.84375 -0.890625 3.8125 -0.890625 C 2.5 -0.890625 1.703125 -1.921875 1.703125 -3.703125 C 1.703125 -5.59375 2.484375 -6.65625 3.78125 -6.65625 C 4.796875 -6.65625 5.4375 -6.0625 5.578125 -5.015625 L 6.78125 -5.015625 C 6.640625 -6.859375 5.484375 -7.765625 3.796875 -7.765625 C 1.765625 -7.765625 0.453125 -6.203125 0.453125 -3.703125 C 0.453125 -1.265625 1.75 0.21875 3.78125 0.21875 C 5.59375 0.21875 6.734375 -0.859375 6.875 -2.59375 Z M 6.875 -2.59375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c9b69189-4727-4663-9d3d-d6bfbc9f2baf\">\n<path style=\"stroke:none;\" d=\"M 7.34375 -3.71875 C 7.34375 -6.328125 6.09375 -7.765625 3.921875 -7.765625 C 1.796875 -7.765625 0.515625 -6.3125 0.515625 -3.78125 C 0.515625 -1.234375 1.78125 0.21875 3.9375 0.21875 C 6.046875 0.21875 7.34375 -1.234375 7.34375 -3.71875 Z M 6.09375 -3.734375 C 6.09375 -1.953125 5.265625 -0.890625 3.9375 -0.890625 C 2.59375 -0.890625 1.765625 -1.9375 1.765625 -3.78125 C 1.765625 -5.59375 2.59375 -6.65625 3.9375 -6.65625 C 5.28125 -6.65625 6.09375 -5.609375 6.09375 -3.734375 Z M 6.09375 -3.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"256437f8-0baf-4f0a-b2c7-fb9338791472\">\n<path style=\"stroke:none;\" d=\"M 6.9375 0 L 6.9375 -7.546875 L 5.75 -7.546875 L 5.75 -3.390625 C 5.75 -1.84375 4.9375 -0.828125 3.6875 -0.828125 C 2.734375 -0.828125 2.125 -1.40625 2.125 -2.3125 L 2.125 -7.546875 L 0.9375 -7.546875 L 0.9375 -1.84375 C 0.9375 -0.59375 1.875 0.21875 3.34375 0.21875 C 4.453125 0.21875 5.15625 -0.171875 5.859375 -1.171875 L 5.859375 0 Z M 6.9375 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"99e0aadc-b3b1-4ee8-8883-d8721bc24a53\">\n<path style=\"stroke:none;\" d=\"M 7.015625 0 L 7.015625 -5.703125 C 7.015625 -6.953125 6.078125 -7.765625 4.625 -7.765625 C 3.5 -7.765625 2.78125 -7.328125 2.125 -6.28125 L 2.125 -7.546875 L 1.015625 -7.546875 L 1.015625 0 L 2.203125 0 L 2.203125 -4.15625 C 2.203125 -5.703125 3.046875 -6.71875 4.265625 -6.71875 C 5.21875 -6.71875 5.8125 -6.140625 5.8125 -5.234375 L 5.8125 0 Z M 7.015625 0 \"/>\n</symbol>\n</g>\n<clipPath id=\"c45c7e94-1d61-4a39-a854-3f8ae1fb0edb\">\n  <path d=\"M 57.488281 32.601562 L 454 32.601562 L 454 252 L 57.488281 252 Z M 57.488281 32.601562 \"/>\n</clipPath>\n<clipPath id=\"c49137b0-b66b-406a-84d1-9485f239f6aa\">\n  <path d=\"M 57.488281 233 L 454 233 L 454 235 L 57.488281 235 Z M 57.488281 233 \"/>\n</clipPath>\n<clipPath id=\"96a543b0-7f48-4a49-8eec-93371ad5a488\">\n  <path d=\"M 57.488281 161 L 454 161 L 454 163 L 57.488281 163 Z M 57.488281 161 \"/>\n</clipPath>\n<clipPath id=\"125a18d3-74fb-4caa-b10a-3943733067e9\">\n  <path d=\"M 57.488281 90 L 454 90 L 454 91 L 57.488281 91 Z M 57.488281 90 \"/>\n</clipPath>\n<clipPath id=\"4a42758e-656f-46ff-81fd-815a4274a2a9\">\n  <path d=\"M 111 32.601562 L 112 32.601562 L 112 252 L 111 252 Z M 111 32.601562 \"/>\n</clipPath>\n<clipPath id=\"2760a568-0608-43f2-aaa1-a8404104480c\">\n  <path d=\"M 231 32.601562 L 232 32.601562 L 232 252 L 231 252 Z M 231 32.601562 \"/>\n</clipPath>\n<clipPath id=\"729eb88e-feb2-4357-b13c-363d60eb3e28\">\n  <path d=\"M 351 32.601562 L 352 32.601562 L 352 252 L 351 252 Z M 351 32.601562 \"/>\n</clipPath>\n<clipPath id=\"9243b79a-981a-4026-afb6-ac42073a0866\">\n  <path d=\"M 57.488281 197 L 454.601562 197 L 454.601562 199 L 57.488281 199 Z M 57.488281 197 \"/>\n</clipPath>\n<clipPath id=\"13f5e15b-2840-4b52-a5a3-e7cecadd96ec\">\n  <path d=\"M 57.488281 125 L 454.601562 125 L 454.601562 127 L 57.488281 127 Z M 57.488281 125 \"/>\n</clipPath>\n<clipPath id=\"3d14d9a7-90e7-4cd5-bad3-a5c38961ba67\">\n  <path d=\"M 57.488281 54 L 454.601562 54 L 454.601562 56 L 57.488281 56 Z M 57.488281 54 \"/>\n</clipPath>\n<clipPath id=\"1f2f9827-a776-4806-ba45-16e9d9868448\">\n  <path d=\"M 170 32.601562 L 173 32.601562 L 173 252.515625 L 170 252.515625 Z M 170 32.601562 \"/>\n</clipPath>\n<clipPath id=\"3b3e3c0a-3a47-4bcd-a077-bcacaddab0c2\">\n  <path d=\"M 291 32.601562 L 293 32.601562 L 293 252.515625 L 291 252.515625 Z M 291 32.601562 \"/>\n</clipPath>\n<clipPath id=\"cbfbed04-d5e4-4ce3-9406-94c36dbbef97\">\n  <path d=\"M 411 32.601562 L 413 32.601562 L 413 252.515625 L 411 252.515625 Z M 411 32.601562 \"/>\n</clipPath>\n</defs>\n<g id=\"30c4b561-c24e-4d48-9cd5-6cad2ac0cc1b\">\n<rect x=\"0\" y=\"0\" width=\"468\" height=\"289\" style=\"fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;\"/>\n<rect x=\"0\" y=\"0\" width=\"468\" height=\"289\" style=\"fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;\"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 0 289 L 468 289 L 468 0 L 0 0 Z M 0 289 \"/>\n<g clip-path=\"url(#c45c7e94-1d61-4a39-a854-3f8ae1fb0edb)\" clip-rule=\"nonzero\">\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(89.803922%,89.803922%,89.803922%);fill-opacity:1;\" d=\"M 57.488281 251.511719 L 453.601562 251.511719 L 453.601562 32.597656 L 57.488281 32.597656 Z M 57.488281 251.511719 \"/>\n</g>\n<g clip-path=\"url(#c49137b0-b66b-406a-84d1-9485f239f6aa)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 233.765625 L 453.601562 233.765625 \"/>\n</g>\n<g clip-path=\"url(#96a543b0-7f48-4a49-8eec-93371ad5a488)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 162.214844 L 453.601562 162.214844 \"/>\n</g>\n<g clip-path=\"url(#125a18d3-74fb-4caa-b10a-3943733067e9)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 90.667969 L 453.601562 90.667969 \"/>\n</g>\n<g clip-path=\"url(#4a42758e-656f-46ff-81fd-815a4274a2a9)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 111.503906 251.511719 L 111.503906 32.601562 \"/>\n</g>\n<g clip-path=\"url(#2760a568-0608-43f2-aaa1-a8404104480c)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 231.535156 251.511719 L 231.535156 32.601562 \"/>\n</g>\n<g clip-path=\"url(#729eb88e-feb2-4357-b13c-363d60eb3e28)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 351.570312 251.511719 L 351.570312 32.601562 \"/>\n</g>\n<g clip-path=\"url(#9243b79a-981a-4026-afb6-ac42073a0866)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 197.988281 L 453.601562 197.988281 \"/>\n</g>\n<g clip-path=\"url(#13f5e15b-2840-4b52-a5a3-e7cecadd96ec)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 126.441406 L 453.601562 126.441406 \"/>\n</g>\n<g clip-path=\"url(#3d14d9a7-90e7-4cd5-bad3-a5c38961ba67)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 54.894531 L 453.601562 54.894531 \"/>\n</g>\n<g clip-path=\"url(#1f2f9827-a776-4806-ba45-16e9d9868448)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 171.519531 251.511719 L 171.519531 32.601562 \"/>\n</g>\n<g clip-path=\"url(#3b3e3c0a-3a47-4bcd-a077-bcacaddab0c2)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 291.554688 251.511719 L 291.554688 32.601562 \"/>\n</g>\n<g clip-path=\"url(#cbfbed04-d5e4-4ce3-9406-94c36dbbef97)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 411.589844 251.511719 L 411.589844 32.601562 \"/>\n</g>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 77.617188 170.300781 C 77.617188 173.136719 73.367188 173.136719 73.367188 170.300781 C 73.367188 167.464844 77.617188 167.464844 77.617188 170.300781 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 89.621094 241.527344 C 89.621094 244.363281 85.371094 244.363281 85.371094 241.527344 C 85.371094 238.691406 89.621094 238.691406 89.621094 241.527344 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 101.625 157.0625 C 101.625 159.898438 97.371094 159.898438 97.371094 157.0625 C 97.371094 154.230469 101.625 154.230469 101.625 157.0625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 113.628906 136.53125 C 113.628906 139.363281 109.375 139.363281 109.375 136.53125 C 109.375 133.695312 113.628906 133.695312 113.628906 136.53125 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 125.632812 129.695312 C 125.632812 132.53125 121.378906 132.53125 121.378906 129.695312 C 121.378906 126.863281 125.632812 126.863281 125.632812 129.695312 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 137.636719 82.1875 C 137.636719 85.023438 133.382812 85.023438 133.382812 82.1875 C 133.382812 79.355469 137.636719 79.355469 137.636719 82.1875 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 149.636719 97.140625 C 149.636719 99.976562 145.386719 99.976562 145.386719 97.140625 C 145.386719 94.308594 149.636719 94.308594 149.636719 97.140625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 161.640625 157.101562 C 161.640625 159.933594 157.390625 159.933594 157.390625 157.101562 C 157.390625 154.265625 161.640625 154.265625 161.640625 157.101562 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 173.644531 241.5625 C 173.644531 244.398438 169.394531 244.398438 169.394531 241.5625 C 169.394531 238.726562 173.644531 238.726562 173.644531 241.5625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 185.648438 188.1875 C 185.648438 191.023438 181.398438 191.023438 181.398438 188.1875 C 181.398438 185.351562 185.648438 185.351562 185.648438 188.1875 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 197.652344 200.316406 C 197.652344 203.148438 193.398438 203.148438 193.398438 200.316406 C 193.398438 197.480469 197.652344 197.480469 197.652344 200.316406 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 209.65625 48.882812 C 209.65625 51.71875 205.402344 51.71875 205.402344 48.882812 C 205.402344 46.046875 209.65625 46.046875 209.65625 48.882812 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 221.660156 84.476562 C 221.660156 87.3125 217.40625 87.3125 217.40625 84.476562 C 217.40625 81.644531 221.660156 81.644531 221.660156 84.476562 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 233.664062 110.523438 C 233.664062 113.355469 229.410156 113.355469 229.410156 110.523438 C 229.410156 107.6875 233.664062 107.6875 233.664062 110.523438 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 245.664062 117.570312 C 245.664062 120.402344 241.414062 120.402344 241.414062 117.570312 C 241.414062 114.734375 245.664062 114.734375 245.664062 117.570312 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 257.667969 204.859375 C 257.667969 207.691406 253.417969 207.691406 253.417969 204.859375 C 253.417969 202.023438 257.667969 202.023438 257.667969 204.859375 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 269.671875 207.683594 C 269.671875 210.519531 265.421875 210.519531 265.421875 207.683594 C 265.421875 204.851562 269.671875 204.851562 269.671875 207.683594 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 281.675781 197.132812 C 281.675781 199.964844 277.425781 199.964844 277.425781 197.132812 C 277.425781 194.296875 281.675781 194.296875 281.675781 197.132812 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 293.679688 42.550781 C 293.679688 45.386719 289.425781 45.386719 289.425781 42.550781 C 289.425781 39.714844 293.679688 39.714844 293.679688 42.550781 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 305.683594 140.144531 C 305.683594 142.976562 301.429688 142.976562 301.429688 140.144531 C 301.429688 137.308594 305.683594 137.308594 305.683594 140.144531 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 317.6875 182.285156 C 317.6875 185.121094 313.433594 185.121094 313.433594 182.285156 C 313.433594 179.449219 317.6875 179.449219 317.6875 182.285156 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 329.691406 169.121094 C 329.691406 171.953125 325.4375 171.953125 325.4375 169.121094 C 325.4375 166.285156 329.691406 166.285156 329.691406 169.121094 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 341.691406 231.007812 C 341.691406 233.84375 337.441406 233.84375 337.441406 231.007812 C 337.441406 228.175781 341.691406 228.175781 341.691406 231.007812 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 353.695312 228.753906 C 353.695312 231.589844 349.445312 231.589844 349.445312 228.753906 C 349.445312 225.921875 353.695312 225.921875 353.695312 228.753906 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 365.699219 178.3125 C 365.699219 181.148438 361.449219 181.148438 361.449219 178.3125 C 361.449219 175.480469 365.699219 175.480469 365.699219 178.3125 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 377.703125 148.835938 C 377.703125 151.671875 373.453125 151.671875 373.453125 148.835938 C 373.453125 146 377.703125 146 377.703125 148.835938 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 389.707031 154.308594 C 389.707031 157.144531 385.457031 157.144531 385.457031 154.308594 C 385.457031 151.476562 389.707031 151.476562 389.707031 154.308594 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 401.710938 90.453125 C 401.710938 93.285156 397.457031 93.285156 397.457031 90.453125 C 397.457031 87.617188 401.710938 87.617188 401.710938 90.453125 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 413.714844 150.625 C 413.714844 153.460938 409.460938 153.460938 409.460938 150.625 C 409.460938 147.789062 413.714844 147.789062 413.714844 150.625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 425.71875 216.878906 C 425.71875 219.714844 421.464844 219.714844 421.464844 216.878906 C 421.464844 214.042969 425.71875 214.042969 425.71875 216.878906 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 437.722656 98.464844 C 437.722656 101.300781 433.46875 101.300781 433.46875 98.464844 C 433.46875 95.632812 437.722656 95.632812 437.722656 98.464844 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:1;\" d=\"M 75.492188 170.300781 L 87.496094 241.527344 L 99.5 157.0625 L 111.503906 136.53125 L 123.503906 129.695312 L 135.507812 82.1875 L 147.511719 97.140625 L 159.515625 157.101562 L 171.519531 241.5625 L 183.523438 188.1875 L 195.527344 200.316406 L 207.53125 48.882812 L 219.53125 84.476562 L 231.535156 110.523438 L 243.539062 117.570312 L 255.542969 204.859375 L 267.546875 207.683594 L 279.550781 197.132812 L 291.554688 42.550781 L 303.558594 140.144531 L 315.558594 182.285156 L 327.5625 169.121094 L 339.566406 231.007812 L 351.570312 228.753906 L 363.574219 178.3125 L 375.578125 148.835938 L 387.582031 154.308594 L 399.585938 90.453125 L 411.589844 150.625 L 423.589844 216.878906 L 435.59375 98.464844 \"/>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#d639ac98-08fd-4a8f-8e4e-85d4f90a541c\" x=\"28.398438\" y=\"200.507812\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"33.732422\" y=\"200.507812\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"39.066406\" y=\"200.507812\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"44.400391\" y=\"200.507812\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#5ee40210-39e4-4da7-92b9-89d47262aebf\" x=\"23.398438\" y=\"128.960938\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"28.732422\" y=\"128.960938\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"34.066406\" y=\"128.960938\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"39.400391\" y=\"128.960938\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"44.734375\" y=\"128.960938\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#5ee40210-39e4-4da7-92b9-89d47262aebf\" x=\"23.398438\" y=\"57.414062\"/>\n  <use xlink:href=\"#e571ccc6-0d6e-48f3-a490-775ca39c0071\" x=\"28.732422\" y=\"57.414062\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"34.066406\" y=\"57.414062\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"39.400391\" y=\"57.414062\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"44.734375\" y=\"57.414062\"/>\n</g>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 197.988281 L 57.488281 197.988281 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 126.441406 L 57.488281 126.441406 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 54.894531 L 57.488281 54.894531 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 171.519531 255.765625 L 171.519531 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 291.554688 255.765625 L 291.554688 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 411.589844 255.765625 L 411.589844 251.511719 \"/>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#5ee40210-39e4-4da7-92b9-89d47262aebf\" x=\"166.019531\" y=\"264.621094\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"171.353516\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#e571ccc6-0d6e-48f3-a490-775ca39c0071\" x=\"286.054688\" y=\"264.621094\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"291.388672\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#696c7771-561d-4311-b0ae-6f31fbee0cdb\" x=\"406.089844\" y=\"264.621094\"/>\n  <use xlink:href=\"#1f1704b0-e1b0-41b7-86ce-c4977f5bfc6d\" x=\"411.423828\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#8111a541-6c91-4eef-8905-69ee3127da4c\" x=\"240.542969\" y=\"277.975586\"/>\n  <use xlink:href=\"#0d8f648c-9882-404d-aa4b-d2062fa9c3c9\" x=\"246.542969\" y=\"277.975586\"/>\n  <use xlink:href=\"#94f9e82d-61b9-46c5-9cb5-e2fc1b9905d9\" x=\"253.214844\" y=\"277.975586\"/>\n  <use xlink:href=\"#501b7f07-4af1-4793-bfe5-33385f815619\" x=\"259.886719\" y=\"277.975586\"/>\n  <use xlink:href=\"#37cecfe4-bc90-4c12-a916-6ca98635432b\" x=\"266.558594\" y=\"277.975586\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#dc80ca57-c648-4648-8e61-fa9f94ef726a\" x=\"19.577148\" y=\"152.058594\"/>\n  <use xlink:href=\"#da61e376-a2cd-4596-9b66-7c12ccbf3300\" x=\"19.577148\" y=\"145.386719\"/>\n  <use xlink:href=\"#62e3b26d-5a64-4e0f-a331-5ce407dbe9bf\" x=\"19.577148\" y=\"139.014648\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#f5b8052c-b8ea-4553-b50d-5e3072f3eaa6\" x=\"200.542969\" y=\"28.530273\"/>\n  <use xlink:href=\"#5d074dbf-8f1e-429a-8b30-c4a10ea08679\" x=\"210.944336\" y=\"28.530273\"/>\n  <use xlink:href=\"#d6ec8a4d-9c4e-47fd-8fe2-72be588f70dd\" x=\"218.954102\" y=\"28.530273\"/>\n  <use xlink:href=\"#75134c1a-a9dc-4126-89cd-9b341276b30c\" x=\"222.152344\" y=\"28.530273\"/>\n  <use xlink:href=\"#6acb9b6f-f404-4c93-9a01-164fae4e71e1\" x=\"225.279297\" y=\"28.530273\"/>\n  <use xlink:href=\"#912faad5-cdb2-4afc-9c18-fcacc48d8d9c\" x=\"232.482422\" y=\"28.530273\"/>\n  <use xlink:href=\"#96221737-75c2-4193-beb6-8c57fe127a45\" x=\"236.487305\" y=\"28.530273\"/>\n  <use xlink:href=\"#cc6b862e-4d32-4bf0-8d6b-df509e11720d\" x=\"240.492188\" y=\"28.530273\"/>\n  <use xlink:href=\"#f221d37a-1aea-4952-a61b-5205a6117d06\" x=\"250.75\" y=\"28.530273\"/>\n  <use xlink:href=\"#f221d37a-1aea-4952-a61b-5205a6117d06\" x=\"258.759766\" y=\"28.530273\"/>\n  <use xlink:href=\"#96221737-75c2-4193-beb6-8c57fe127a45\" x=\"266.625977\" y=\"28.530273\"/>\n  <use xlink:href=\"#912faad5-cdb2-4afc-9c18-fcacc48d8d9c\" x=\"270.630859\" y=\"28.530273\"/>\n  <use xlink:href=\"#18f7ffda-c89a-450d-b5e1-d0f741987a3f\" x=\"274.635742\" y=\"28.530273\"/>\n  <use xlink:href=\"#c9b69189-4727-4663-9d3d-d6bfbc9f2baf\" x=\"281.838867\" y=\"28.530273\"/>\n  <use xlink:href=\"#256437f8-0baf-4f0a-b2c7-fb9338791472\" x=\"289.848633\" y=\"28.530273\"/>\n  <use xlink:href=\"#99e0aadc-b3b1-4ee8-8883-d8721bc24a53\" x=\"297.858398\" y=\"28.530273\"/>\n  <use xlink:href=\"#96221737-75c2-4193-beb6-8c57fe127a45\" x=\"305.868164\" y=\"28.530273\"/>\n</g>\n</g>\n</svg>\n","value":"#gg4clj.core.GGView{:plot-command [[:<- :d [:data.frame {:y [:c 8774 6783 9144 9718 9909 11237 10819 9143 6782 8274 7935 12168 11173 10445 10248 7808 7729 8024 12345 9617 8439 8807 7077 7140 8550 9374 9221 11006 9324 7472 10782], :x [:c 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32]}]] [:qplot :x :y {:ylab \"day\", :xlab \"count\", :geom [:c \"point\" \"line\"], :main \"Daily tweet count\", :data :d}]], :options {}}"}
;; <=

;; @@
(let [type-freqs (->> (mc/find-maps @db "publications")
                      (map :type)
                      frequencies
                      (into {})
                      )
      dat {:types (keys type-freqs) :counts (vals type-freqs)}]
  (gg4clj/view
    [[:<- :d (gg4clj/data-frame dat)]
     (gg4clj/r+
       [:ggplot :d [:aes :types :counts]]
       [:geom_bar {:stat "identity" :fill "steelblue"}]
       [:xlab "Tweet types"]
       [:ylab "Counts"]
       [:ggtitle "Tweet type distribution"])]))
;; @@
;; =>
;;; {"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"468pt\" height=\"289pt\" viewBox=\"0 0 468 289\" version=\"1.1\">\n<defs>\n<g>\n<symbol overflow=\"visible\" id=\"4239a1b0-2bae-4074-8da7-76ff8e3abdf1\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"1ec1708b-47a3-4264-a8da-ba007e86e568\">\n<path style=\"stroke:none;\" d=\"M 4.859375 -3.265625 C 4.859375 -5.625 4.109375 -6.796875 2.640625 -6.796875 C 1.171875 -6.796875 0.40625 -5.609375 0.40625 -3.328125 C 0.40625 -1.03125 1.1875 0.140625 2.640625 0.140625 C 4.078125 0.140625 4.859375 -1.03125 4.859375 -3.265625 Z M 4 -3.34375 C 4 -1.421875 3.5625 -0.5625 2.625 -0.5625 C 1.734375 -0.5625 1.28125 -1.453125 1.28125 -3.3125 C 1.28125 -5.1875 1.734375 -6.046875 2.640625 -6.046875 C 3.546875 -6.046875 4 -5.171875 4 -3.34375 Z M 4 -3.34375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"5544cee2-d337-4bba-a0b5-8139af452f8d\">\n<path style=\"stroke:none;\" d=\"M 4.921875 -2.28125 C 4.921875 -3.015625 4.859375 -3.46875 4.71875 -3.84375 C 4.390625 -4.671875 3.625 -5.171875 2.6875 -5.171875 C 1.28125 -5.171875 0.390625 -4.140625 0.390625 -2.484375 C 0.390625 -0.828125 1.25 0.140625 2.671875 0.140625 C 3.8125 0.140625 4.609375 -0.515625 4.8125 -1.53125 L 4.015625 -1.53125 C 3.796875 -0.859375 3.34375 -0.59375 2.703125 -0.59375 C 1.859375 -0.59375 1.234375 -1.125 1.21875 -2.28125 Z M 4.0625 -3 C 4.0625 -3 4.0625 -2.953125 4.0625 -2.9375 L 1.234375 -2.9375 C 1.3125 -3.828125 1.875 -4.4375 2.671875 -4.4375 C 3.46875 -4.4375 4.0625 -3.78125 4.0625 -3 Z M 4.0625 -3 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"94ae1a02-b483-46d8-bccd-f5b375ff8912\">\n<path style=\"stroke:none;\" d=\"M 4.953125 -2.078125 L 4.953125 -2.71875 L 3.125 -2.71875 L 3.125 -4.546875 L 2.46875 -4.546875 L 2.46875 -2.71875 L 0.65625 -2.71875 L 0.65625 -2.078125 L 2.46875 -2.078125 L 2.46875 -0.25 L 3.125 -0.25 L 3.125 -2.078125 Z M 4.953125 -2.078125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"f74d9527-f73e-4cda-ae97-85c07f58aa19\">\n<path style=\"stroke:none;\" d=\"M 4.921875 -2.25 C 4.921875 -3.59375 4.03125 -4.484375 2.71875 -4.484375 C 2.25 -4.484375 1.859375 -4.359375 1.46875 -4.0625 L 1.734375 -5.828125 L 4.5625 -5.828125 L 4.5625 -6.65625 L 1.0625 -6.65625 L 0.546875 -3.09375 L 1.328125 -3.09375 C 1.71875 -3.5625 2.046875 -3.734375 2.578125 -3.734375 C 3.484375 -3.734375 4.0625 -3.140625 4.0625 -2.140625 C 4.0625 -1.15625 3.484375 -0.609375 2.578125 -0.609375 C 1.828125 -0.609375 1.375 -0.984375 1.1875 -1.75 L 0.328125 -1.75 C 0.609375 -0.390625 1.375 0.140625 2.59375 0.140625 C 3.96875 0.140625 4.921875 -0.8125 4.921875 -2.25 Z M 4.921875 -2.25 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"e335d5f5-573b-4500-a0e5-618264a8bf7f\">\n<path style=\"stroke:none;\" d=\"M 4.984375 -1.625 L 4.984375 -2.390625 L 3.984375 -2.390625 L 3.984375 -6.796875 L 3.359375 -6.796875 L 0.265625 -2.515625 L 0.265625 -1.625 L 3.140625 -1.625 L 3.140625 0 L 3.984375 0 L 3.984375 -1.625 Z M 3.140625 -2.390625 L 1 -2.390625 L 3.140625 -5.359375 Z M 3.140625 -2.390625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c940b667-fb58-4158-ba79-93a3362b3d0f\">\n<path style=\"stroke:none;\" d=\"M 3.328125 0 L 3.328125 -6.796875 L 2.765625 -6.796875 C 2.46875 -5.75 2.28125 -5.609375 0.984375 -5.453125 L 0.984375 -4.84375 L 2.484375 -4.84375 L 2.484375 0 Z M 3.328125 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"f84f676c-a090-44d7-83d1-de7764f81084\">\n<path style=\"stroke:none;\" d=\"M 3.078125 -4.328125 L 3.078125 -5.140625 C 2.9375 -5.15625 2.875 -5.171875 2.765625 -5.171875 C 2.25 -5.171875 1.859375 -4.859375 1.40625 -4.109375 L 1.40625 -5.03125 L 0.671875 -5.03125 L 0.671875 0 L 1.46875 0 L 1.46875 -2.609375 C 1.46875 -3.734375 1.84375 -4.3125 3.078125 -4.328125 Z M 3.078125 -4.328125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"eca7bbcd-055e-4482-9a37-5fd2a13a5124\">\n<path style=\"stroke:none;\" d=\"M 5.015625 -2.46875 C 5.015625 -4.15625 4.1875 -5.171875 2.859375 -5.171875 C 2.171875 -5.171875 1.625 -4.859375 1.25 -4.265625 L 1.25 -5.03125 L 0.53125 -5.03125 L 0.53125 2.09375 L 1.328125 2.09375 L 1.328125 -0.609375 C 1.75 -0.09375 2.21875 0.140625 2.875 0.140625 C 4.15625 0.140625 5.015625 -0.859375 5.015625 -2.46875 Z M 4.1875 -2.484375 C 4.1875 -1.34375 3.59375 -0.609375 2.71875 -0.609375 C 1.875 -0.609375 1.328125 -1.296875 1.328125 -2.46875 C 1.328125 -3.65625 1.875 -4.421875 2.71875 -4.421875 C 3.609375 -4.421875 4.1875 -3.6875 4.1875 -2.484375 Z M 4.1875 -2.484375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"7f0b6e16-be51-4f83-9290-13da1861978f\">\n<path style=\"stroke:none;\" d=\"M 1.453125 0 L 1.453125 -7 L 0.65625 -7 L 0.65625 0 Z M 1.453125 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"95e99112-5ce0-43d0-b302-c5d4a8b5bef0\">\n<path style=\"stroke:none;\" d=\"M 4.578125 -5.03125 L 3.71875 -5.03125 L 2.328125 -1.109375 L 1.046875 -5.03125 L 0.1875 -5.03125 L 1.890625 0.015625 L 1.578125 0.8125 C 1.453125 1.171875 1.28125 1.3125 0.9375 1.3125 C 0.828125 1.3125 0.6875 1.28125 0.515625 1.25 L 0.515625 1.96875 C 0.6875 2.046875 0.84375 2.09375 1.0625 2.09375 C 1.625 2.09375 2.078125 1.78125 2.34375 1.0625 Z M 4.578125 -5.03125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"827eb35e-f0b0-497f-a149-a3b80578daea\">\n<path style=\"stroke:none;\" d=\"M 2.4375 0 L 2.4375 -0.671875 C 2.328125 -0.640625 2.203125 -0.640625 2.046875 -0.640625 C 1.703125 -0.640625 1.609375 -0.734375 1.609375 -1.078125 L 1.609375 -4.375 L 2.4375 -4.375 L 2.4375 -5.03125 L 1.609375 -5.03125 L 1.609375 -6.40625 L 0.8125 -6.40625 L 0.8125 -5.03125 L 0.140625 -5.03125 L 0.140625 -4.375 L 0.8125 -4.375 L 0.8125 -0.734375 C 0.8125 -0.21875 1.15625 0.0625 1.78125 0.0625 C 1.96875 0.0625 2.171875 0.046875 2.4375 0 Z M 2.4375 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"dd4bd14e-a44e-4e67-a597-515b886c2892\">\n<path style=\"stroke:none;\" d=\"M 6.796875 -5.03125 L 5.890625 -5.03125 L 4.890625 -1.109375 L 3.90625 -5.03125 L 2.921875 -5.03125 L 1.96875 -1.109375 L 0.9375 -5.03125 L 0.0625 -5.03125 L 1.515625 0 L 2.421875 0 L 3.390625 -3.9375 L 4.40625 0 L 5.3125 0 Z M 6.796875 -5.03125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c228fdc6-e829-4364-9773-5ef0af4294b4\">\n<path style=\"stroke:none;\" d=\"M 4.40625 -1.40625 C 4.40625 -2.15625 3.984375 -2.53125 2.984375 -2.765625 L 2.21875 -2.953125 C 1.5625 -3.109375 1.28125 -3.3125 1.28125 -3.671875 C 1.28125 -4.140625 1.703125 -4.4375 2.34375 -4.4375 C 3 -4.4375 3.34375 -4.15625 3.359375 -3.625 L 4.203125 -3.625 C 4.1875 -4.609375 3.546875 -5.171875 2.375 -5.171875 C 1.203125 -5.171875 0.453125 -4.5625 0.453125 -3.640625 C 0.453125 -2.84375 0.859375 -2.46875 2.046875 -2.1875 L 2.796875 -2 C 3.34375 -1.875 3.5625 -1.703125 3.5625 -1.34375 C 3.5625 -0.875 3.09375 -0.59375 2.390625 -0.59375 C 1.671875 -0.59375 1.28125 -0.765625 1.171875 -1.53125 L 0.328125 -1.53125 C 0.359375 -0.375 1.015625 0.140625 2.328125 0.140625 C 3.59375 0.140625 4.40625 -0.4375 4.40625 -1.40625 Z M 4.40625 -1.40625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"56345e2a-833d-451b-8453-689ae85e2ba3\">\n<path style=\"stroke:none;\" d=\"M 4.65625 0 L 4.65625 -3.796875 C 4.65625 -4.640625 4.0625 -5.171875 3.078125 -5.171875 C 2.375 -5.171875 1.9375 -4.953125 1.46875 -4.34375 L 1.46875 -7 L 0.671875 -7 L 0.671875 0 L 1.46875 0 L 1.46875 -2.765625 C 1.46875 -3.796875 2 -4.46875 2.828125 -4.46875 C 3.390625 -4.46875 3.859375 -4.140625 3.859375 -3.484375 L 3.859375 0 Z M 4.65625 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"a34b3849-a188-45ef-a90d-2d2a4e7ed5f2\">\n<path style=\"stroke:none;\" d=\"M 5.125 -0.015625 L 5.125 -0.625 C 5.046875 -0.609375 5.015625 -0.609375 4.953125 -0.609375 C 4.6875 -0.609375 4.53125 -0.75 4.53125 -1 L 4.53125 -3.796875 C 4.53125 -4.6875 3.875 -5.171875 2.640625 -5.171875 C 1.421875 -5.171875 0.671875 -4.703125 0.625 -3.546875 L 1.421875 -3.546875 C 1.5 -4.15625 1.859375 -4.4375 2.609375 -4.4375 C 3.328125 -4.4375 3.734375 -4.15625 3.734375 -3.6875 L 3.734375 -3.46875 C 3.734375 -3.140625 3.53125 -3 2.890625 -2.921875 C 1.765625 -2.765625 1.59375 -2.734375 1.28125 -2.609375 C 0.703125 -2.375 0.40625 -1.921875 0.40625 -1.3125 C 0.40625 -0.390625 1.03125 0.140625 2.046875 0.140625 C 2.703125 0.140625 3.3125 -0.125 3.765625 -0.59375 C 3.84375 -0.21875 4.1875 0.0625 4.578125 0.0625 C 4.75 0.0625 4.875 0.046875 5.125 -0.015625 Z M 3.734375 -1.734375 C 3.734375 -1.015625 3 -0.5625 2.21875 -0.5625 C 1.609375 -0.5625 1.234375 -0.78125 1.234375 -1.328125 C 1.234375 -1.859375 1.59375 -2.078125 2.453125 -2.203125 C 3.296875 -2.328125 3.46875 -2.359375 3.734375 -2.484375 Z M 3.734375 -1.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"30919c26-c3e4-4141-bb06-0a854c981eb4\">\n<path style=\"stroke:none;\" d=\"M 4.890625 -2.46875 C 4.890625 -4.21875 4.0625 -5.171875 2.609375 -5.171875 C 1.203125 -5.171875 0.34375 -4.203125 0.34375 -2.515625 C 0.34375 -0.828125 1.1875 0.140625 2.625 0.140625 C 4.03125 0.140625 4.890625 -0.828125 4.890625 -2.46875 Z M 4.0625 -2.484375 C 4.0625 -1.3125 3.5 -0.59375 2.625 -0.59375 C 1.734375 -0.59375 1.1875 -1.296875 1.1875 -2.515625 C 1.1875 -3.71875 1.734375 -4.4375 2.625 -4.4375 C 3.515625 -4.4375 4.0625 -3.734375 4.0625 -2.484375 Z M 4.0625 -2.484375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"e19c0a67-e978-4a98-9048-3385cbff0ab1\">\n<path style=\"stroke:none;\" d=\"M 4.625 0 L 4.625 -5.03125 L 3.828125 -5.03125 L 3.828125 -2.25 C 3.828125 -1.234375 3.296875 -0.5625 2.453125 -0.5625 C 1.828125 -0.5625 1.421875 -0.9375 1.421875 -1.546875 L 1.421875 -5.03125 L 0.625 -5.03125 L 0.625 -1.234375 C 0.625 -0.390625 1.25 0.140625 2.21875 0.140625 C 2.96875 0.140625 3.4375 -0.109375 3.90625 -0.78125 L 3.90625 0 Z M 4.625 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"aecab7fb-93e9-4428-b663-f1fe2055735f\">\n<path style=\"stroke:none;\" d=\"M 4.578125 -1.734375 L 3.765625 -1.734375 C 3.640625 -0.921875 3.21875 -0.59375 2.546875 -0.59375 C 1.65625 -0.59375 1.125 -1.28125 1.125 -2.46875 C 1.125 -3.71875 1.65625 -4.4375 2.515625 -4.4375 C 3.1875 -4.4375 3.609375 -4.03125 3.71875 -3.34375 L 4.515625 -3.34375 C 4.421875 -4.5625 3.65625 -5.171875 2.53125 -5.171875 C 1.1875 -5.171875 0.296875 -4.140625 0.296875 -2.46875 C 0.296875 -0.84375 1.15625 0.140625 2.515625 0.140625 C 3.71875 0.140625 4.484375 -0.578125 4.578125 -1.734375 Z M 4.578125 -1.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"6272d0a9-daee-442e-bc8e-e3aad3963079\">\n<path style=\"stroke:none;\" d=\"M 4.671875 0 L 4.671875 -3.796875 C 4.671875 -4.640625 4.046875 -5.171875 3.078125 -5.171875 C 2.328125 -5.171875 1.859375 -4.890625 1.40625 -4.1875 L 1.40625 -5.03125 L 0.671875 -5.03125 L 0.671875 0 L 1.46875 0 L 1.46875 -2.765625 C 1.46875 -3.796875 2.03125 -4.46875 2.84375 -4.46875 C 3.46875 -4.46875 3.875 -4.09375 3.875 -3.484375 L 3.875 0 Z M 4.671875 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"417ca0ae-a537-49dc-8dc3-8d11e8a062b9\">\n<path style=\"stroke:none;\" d=\"M 4.75 0 L 4.75 -7 L 3.953125 -7 L 3.953125 -4.390625 C 3.609375 -4.90625 3.078125 -5.171875 2.40625 -5.171875 C 1.109375 -5.171875 0.25 -4.15625 0.25 -2.5625 C 0.25 -0.859375 1.078125 0.140625 2.4375 0.140625 C 3.125 0.140625 3.609375 -0.109375 4.03125 -0.734375 L 4.03125 0 Z M 3.953125 -2.5 C 3.953125 -1.328125 3.390625 -0.609375 2.546875 -0.609375 C 1.671875 -0.609375 1.078125 -1.34375 1.078125 -2.515625 C 1.078125 -3.6875 1.671875 -4.421875 2.546875 -4.421875 C 3.40625 -4.421875 3.953125 -3.65625 3.953125 -2.5 Z M 3.953125 -2.5 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c75b1d58-ccb7-426a-872a-fe62845dd02f\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d55d0c1b-171d-413b-9161-48ec8ca168b6\">\n<path style=\"stroke:none;\" d=\"M 7.109375 -7.765625 L 7.109375 -8.75 L 0.25 -8.75 L 0.25 -7.765625 L 3.125 -7.765625 L 3.125 0 L 4.25 0 L 4.25 -7.765625 Z M 7.109375 -7.765625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c67c45ec-e9c2-4a81-b2c0-9fe5a69b680d\">\n<path style=\"stroke:none;\" d=\"M 8.5 -6.28125 L 7.375 -6.28125 L 6.125 -1.390625 L 4.890625 -6.28125 L 3.65625 -6.28125 L 2.453125 -1.390625 L 1.171875 -6.28125 L 0.078125 -6.28125 L 1.890625 0 L 3.03125 0 L 4.234375 -4.9375 L 5.515625 0 L 6.640625 0 Z M 8.5 -6.28125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"3d57da22-a204-4e41-90b8-f7b8e1a4f755\">\n<path style=\"stroke:none;\" d=\"M 6.15625 -2.859375 C 6.15625 -3.765625 6.078125 -4.34375 5.90625 -4.8125 C 5.5 -5.84375 4.53125 -6.46875 3.359375 -6.46875 C 1.609375 -6.46875 0.484375 -5.171875 0.484375 -3.109375 C 0.484375 -1.046875 1.578125 0.1875 3.34375 0.1875 C 4.78125 0.1875 5.765625 -0.640625 6.03125 -1.90625 L 5.015625 -1.90625 C 4.734375 -1.078125 4.171875 -0.75 3.375 -0.75 C 2.328125 -0.75 1.546875 -1.421875 1.53125 -2.859375 Z M 5.09375 -3.75 C 5.09375 -3.75 5.09375 -3.703125 5.078125 -3.671875 L 1.546875 -3.671875 C 1.625 -4.78125 2.34375 -5.546875 3.34375 -5.546875 C 4.328125 -5.546875 5.09375 -4.734375 5.09375 -3.75 Z M 5.09375 -3.75 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"67db2ff6-397d-4336-a4b4-c9bdf6ae435f\">\n<path style=\"stroke:none;\" d=\"M 3.046875 0 L 3.046875 -0.84375 C 2.921875 -0.796875 2.765625 -0.796875 2.5625 -0.796875 C 2.140625 -0.796875 2.015625 -0.90625 2.015625 -1.359375 L 2.015625 -5.46875 L 3.046875 -5.46875 L 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.90625 C 1.015625 -0.28125 1.453125 0.078125 2.234375 0.078125 C 2.46875 0.078125 2.71875 0.0625 3.046875 0 Z M 3.046875 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"a435b3da-eebb-4b5d-ab81-342b59dbf448\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d962f2fc-4f97-4377-be33-009ff360f388\">\n<path style=\"stroke:none;\" d=\"M 5.734375 -6.28125 L 4.65625 -6.28125 L 2.921875 -1.390625 L 1.3125 -6.28125 L 0.234375 -6.28125 L 2.359375 0.03125 L 1.984375 1.015625 C 1.8125 1.46875 1.609375 1.625 1.171875 1.625 C 1.03125 1.625 0.859375 1.609375 0.640625 1.5625 L 0.640625 2.453125 C 0.859375 2.5625 1.0625 2.609375 1.3125 2.609375 C 2.03125 2.609375 2.609375 2.21875 2.9375 1.3125 Z M 5.734375 -6.28125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"430a80ef-b0da-4a2e-82ac-6b1928f336f3\">\n<path style=\"stroke:none;\" d=\"M 6.28125 -3.078125 C 6.28125 -5.203125 5.25 -6.46875 3.578125 -6.46875 C 2.71875 -6.46875 2.046875 -6.078125 1.578125 -5.34375 L 1.578125 -6.28125 L 0.65625 -6.28125 L 0.65625 2.609375 L 1.65625 2.609375 L 1.65625 -0.75 C 2.1875 -0.109375 2.765625 0.1875 3.59375 0.1875 C 5.203125 0.1875 6.28125 -1.078125 6.28125 -3.078125 Z M 5.234375 -3.109375 C 5.234375 -1.6875 4.5 -0.75 3.40625 -0.75 C 2.359375 -0.75 1.65625 -1.625 1.65625 -3.09375 C 1.65625 -4.578125 2.359375 -5.53125 3.40625 -5.53125 C 4.515625 -5.53125 5.234375 -4.609375 5.234375 -3.109375 Z M 5.234375 -3.109375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"272e5da5-ae1e-4df9-a87b-800c3c4f88ea\">\n<path style=\"stroke:none;\" d=\"M 5.515625 -1.765625 C 5.515625 -2.703125 4.984375 -3.171875 3.734375 -3.46875 L 2.765625 -3.703125 C 1.953125 -3.890625 1.609375 -4.15625 1.609375 -4.59375 C 1.609375 -5.171875 2.125 -5.546875 2.9375 -5.546875 C 3.75 -5.546875 4.171875 -5.203125 4.203125 -4.53125 L 5.25 -4.53125 C 5.25 -5.765625 4.421875 -6.46875 2.96875 -6.46875 C 1.515625 -6.46875 0.5625 -5.71875 0.5625 -4.546875 C 0.5625 -3.5625 1.0625 -3.09375 2.5625 -2.734375 L 3.484375 -2.515625 C 4.1875 -2.34375 4.46875 -2.140625 4.46875 -1.6875 C 4.46875 -1.09375 3.875 -0.75 3 -0.75 C 2.09375 -0.75 1.59375 -0.953125 1.46875 -1.921875 L 0.40625 -1.921875 C 0.453125 -0.46875 1.265625 0.1875 2.921875 0.1875 C 4.5 0.1875 5.515625 -0.546875 5.515625 -1.765625 Z M 5.515625 -1.765625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"964dad27-ec5c-4d1f-9853-37c48d04bf3b\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"ae3d873f-c4a0-44f1-a2c5-608b07feb771\">\n<path style=\"stroke:none;\" d=\"M -3.1875 -8.125 L -3.1875 -6.96875 C -1.53125 -6.703125 -0.765625 -6.015625 -0.765625 -4.53125 C -0.765625 -2.796875 -2.09375 -1.6875 -4.28125 -1.6875 C -6.53125 -1.6875 -7.984375 -2.75 -7.984375 -4.4375 C -7.984375 -5.8125 -7.375 -6.53125 -6.03125 -6.796875 L -6.03125 -7.9375 C -7.953125 -7.59375 -8.96875 -6.484375 -8.96875 -4.578125 C -8.96875 -1.921875 -6.828125 -0.578125 -4.265625 -0.578125 C -1.71875 -0.578125 0.21875 -1.953125 0.21875 -4.53125 C 0.21875 -6.65625 -0.90625 -7.859375 -3.1875 -8.125 Z M -3.1875 -8.125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"6f995963-83e0-476c-93c2-906407651758\">\n<path style=\"stroke:none;\" d=\"M -3.09375 -6.125 C -5.265625 -6.125 -6.46875 -5.078125 -6.46875 -3.265625 C -6.46875 -1.5 -5.25 -0.4375 -3.140625 -0.4375 C -1.03125 -0.4375 0.1875 -1.484375 0.1875 -3.28125 C 0.1875 -5.046875 -1.03125 -6.125 -3.09375 -6.125 Z M -3.109375 -5.078125 C -1.625 -5.078125 -0.75 -4.375 -0.75 -3.28125 C -0.75 -2.15625 -1.625 -1.46875 -3.140625 -1.46875 C -4.65625 -1.46875 -5.546875 -2.15625 -5.546875 -3.28125 C -5.546875 -4.40625 -4.671875 -5.078125 -3.109375 -5.078125 Z M -3.109375 -5.078125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"10e3a2f2-d97d-4406-bb57-e9e687bae42a\">\n<path style=\"stroke:none;\" d=\"M 0 -5.78125 L -6.28125 -5.78125 L -6.28125 -4.78125 L -2.8125 -4.78125 C -1.53125 -4.78125 -0.703125 -4.109375 -0.703125 -3.078125 C -0.703125 -2.28125 -1.171875 -1.78125 -1.9375 -1.78125 L -6.28125 -1.78125 L -6.28125 -0.78125 L -1.53125 -0.78125 C -0.484375 -0.78125 0.1875 -1.5625 0.1875 -2.78125 C 0.1875 -3.703125 -0.140625 -4.296875 -0.96875 -4.890625 L 0 -4.890625 Z M 0 -5.78125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"97c718c8-acf2-4875-b09c-c3cdb5abf224\">\n<path style=\"stroke:none;\" d=\"M 0 -5.84375 L -4.75 -5.84375 C -5.796875 -5.84375 -6.46875 -5.0625 -6.46875 -3.859375 C -6.46875 -2.921875 -6.109375 -2.3125 -5.234375 -1.765625 L -6.28125 -1.765625 L -6.28125 -0.84375 L 0 -0.84375 L 0 -1.84375 L -3.46875 -1.84375 C -4.75 -1.84375 -5.59375 -2.53125 -5.59375 -3.546875 C -5.59375 -4.34375 -5.109375 -4.84375 -4.359375 -4.84375 L 0 -4.84375 Z M 0 -5.84375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"da7aeb91-39a9-44cd-8e5d-787ee92500a8\">\n<path style=\"stroke:none;\" d=\"M 0 -3.046875 L -0.84375 -3.046875 C -0.796875 -2.921875 -0.796875 -2.765625 -0.796875 -2.5625 C -0.796875 -2.140625 -0.90625 -2.015625 -1.359375 -2.015625 L -5.46875 -2.015625 L -5.46875 -3.046875 L -6.28125 -3.046875 L -6.28125 -2.015625 L -8.015625 -2.015625 L -8.015625 -1.015625 L -6.28125 -1.015625 L -6.28125 -0.171875 L -5.46875 -0.171875 L -5.46875 -1.015625 L -0.90625 -1.015625 C -0.28125 -1.015625 0.078125 -1.453125 0.078125 -2.234375 C 0.078125 -2.46875 0.0625 -2.71875 0 -3.046875 Z M 0 -3.046875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"dc4e0b8a-da68-4dda-abe3-d02d3c63289c\">\n<path style=\"stroke:none;\" d=\"M -1.765625 -5.515625 C -2.703125 -5.515625 -3.171875 -4.984375 -3.46875 -3.734375 L -3.703125 -2.765625 C -3.890625 -1.953125 -4.15625 -1.609375 -4.59375 -1.609375 C -5.171875 -1.609375 -5.546875 -2.125 -5.546875 -2.9375 C -5.546875 -3.75 -5.203125 -4.171875 -4.53125 -4.203125 L -4.53125 -5.25 C -5.765625 -5.25 -6.46875 -4.421875 -6.46875 -2.96875 C -6.46875 -1.515625 -5.71875 -0.5625 -4.546875 -0.5625 C -3.5625 -0.5625 -3.09375 -1.0625 -2.734375 -2.5625 L -2.515625 -3.484375 C -2.34375 -4.1875 -2.140625 -4.46875 -1.6875 -4.46875 C -1.09375 -4.46875 -0.75 -3.875 -0.75 -3 C -0.75 -2.09375 -0.953125 -1.59375 -1.921875 -1.46875 L -1.921875 -0.40625 C -0.46875 -0.453125 0.1875 -1.265625 0.1875 -2.921875 C 0.1875 -4.5 -0.546875 -5.515625 -1.765625 -5.515625 Z M -1.765625 -5.515625 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"b8cd3520-7cbf-4f7d-b44e-04db58262520\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"e832aa74-d3f8-4f6c-b9b3-b246b1d42ab7\">\n<path style=\"stroke:none;\" d=\"M 8.546875 -9.328125 L 8.546875 -10.5 L 0.296875 -10.5 L 0.296875 -9.328125 L 3.765625 -9.328125 L 3.765625 0 L 5.09375 0 L 5.09375 -9.328125 Z M 8.546875 -9.328125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"36c80d30-6874-429e-bc0b-6f3f00c44b4d\">\n<path style=\"stroke:none;\" d=\"M 10.203125 -7.546875 L 8.84375 -7.546875 L 7.34375 -1.671875 L 5.859375 -7.546875 L 4.390625 -7.546875 L 2.953125 -1.671875 L 1.40625 -7.546875 L 0.09375 -7.546875 L 2.28125 0 L 3.625 0 L 5.078125 -5.921875 L 6.609375 0 L 7.984375 0 Z M 10.203125 -7.546875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"fff257e1-53d3-476d-a5ef-ff1afaef60af\">\n<path style=\"stroke:none;\" d=\"M 7.390625 -3.421875 C 7.390625 -4.53125 7.296875 -5.21875 7.09375 -5.78125 C 6.59375 -7.015625 5.453125 -7.765625 4.03125 -7.765625 C 1.9375 -7.765625 0.578125 -6.203125 0.578125 -3.734375 C 0.578125 -1.25 1.890625 0.21875 4 0.21875 C 5.734375 0.21875 6.921875 -0.765625 7.234375 -2.296875 L 6.015625 -2.296875 C 5.6875 -1.296875 5.015625 -0.890625 4.046875 -0.890625 C 2.796875 -0.890625 1.859375 -1.703125 1.828125 -3.421875 Z M 6.109375 -4.5 C 6.109375 -4.5 6.109375 -4.4375 6.09375 -4.40625 L 1.859375 -4.40625 C 1.953125 -5.75 2.8125 -6.65625 4.015625 -6.65625 C 5.203125 -6.65625 6.109375 -5.671875 6.109375 -4.5 Z M 6.109375 -4.5 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"377c9152-1198-4fcb-b85b-257c355d950d\">\n<path style=\"stroke:none;\" d=\"M 3.65625 0 L 3.65625 -1.015625 C 3.5 -0.96875 3.3125 -0.953125 3.078125 -0.953125 C 2.5625 -0.953125 2.421875 -1.09375 2.421875 -1.625 L 2.421875 -6.5625 L 3.65625 -6.5625 L 3.65625 -7.546875 L 2.421875 -7.546875 L 2.421875 -9.625 L 1.21875 -9.625 L 1.21875 -7.546875 L 0.203125 -7.546875 L 0.203125 -6.5625 L 1.21875 -6.5625 L 1.21875 -1.09375 C 1.21875 -0.328125 1.75 0.09375 2.671875 0.09375 C 2.96875 0.09375 3.25 0.078125 3.65625 0 Z M 3.65625 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"e88aed7c-bb86-4051-a0a9-52ac9e0e5041\">\n<path style=\"stroke:none;\" d=\"\"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"03a1c16d-2b1c-4f23-8566-01e6ea4e83ba\">\n<path style=\"stroke:none;\" d=\"M 6.890625 -7.546875 L 5.59375 -7.546875 L 3.5 -1.671875 L 1.5625 -7.546875 L 0.28125 -7.546875 L 2.84375 0.03125 L 2.375 1.21875 C 2.171875 1.75 1.9375 1.953125 1.40625 1.953125 C 1.234375 1.953125 1.03125 1.9375 0.78125 1.875 L 0.78125 2.953125 C 1.015625 3.078125 1.265625 3.140625 1.578125 3.140625 C 2.4375 3.140625 3.125 2.671875 3.53125 1.578125 Z M 6.890625 -7.546875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"c08ecbb7-414c-4633-9b4c-49687f3b5458\">\n<path style=\"stroke:none;\" d=\"M 7.53125 -3.703125 C 7.53125 -6.234375 6.296875 -7.765625 4.296875 -7.765625 C 3.265625 -7.765625 2.453125 -7.296875 1.890625 -6.40625 L 1.890625 -7.546875 L 0.796875 -7.546875 L 0.796875 3.140625 L 1.984375 3.140625 L 1.984375 -0.90625 C 2.625 -0.125 3.328125 0.21875 4.3125 0.21875 C 6.25 0.21875 7.53125 -1.296875 7.53125 -3.703125 Z M 6.28125 -3.734375 C 6.28125 -2.015625 5.40625 -0.90625 4.09375 -0.90625 C 2.828125 -0.90625 1.984375 -1.9375 1.984375 -3.71875 C 1.984375 -5.484375 2.828125 -6.640625 4.09375 -6.640625 C 5.421875 -6.640625 6.28125 -5.53125 6.28125 -3.734375 Z M 6.28125 -3.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"d3f8b532-88e1-482e-a691-173bd8829f2c\">\n<path style=\"stroke:none;\" d=\"M 7.125 0 L 7.125 -10.5 L 5.9375 -10.5 L 5.9375 -6.59375 C 5.4375 -7.359375 4.625 -7.765625 3.609375 -7.765625 C 1.65625 -7.765625 0.375 -6.25 0.375 -3.84375 C 0.375 -1.296875 1.625 0.21875 3.65625 0.21875 C 4.703125 0.21875 5.421875 -0.171875 6.0625 -1.109375 L 6.0625 0 Z M 5.9375 -3.75 C 5.9375 -2 5.09375 -0.90625 3.828125 -0.90625 C 2.5 -0.90625 1.625 -2.015625 1.625 -3.78125 C 1.625 -5.53125 2.5 -6.640625 3.8125 -6.640625 C 5.109375 -6.640625 5.9375 -5.484375 5.9375 -3.75 Z M 5.9375 -3.75 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"5c789d46-0776-44a8-aab7-657b7127a311\">\n<path style=\"stroke:none;\" d=\"M 2.203125 0 L 2.203125 -7.546875 L 1.015625 -7.546875 L 1.015625 0 Z M 2.359375 -8.6875 L 2.359375 -10.1875 L 0.859375 -10.1875 L 0.859375 -8.6875 Z M 2.359375 -8.6875 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"25e4670d-60c5-4862-8480-0897e45e2d23\">\n<path style=\"stroke:none;\" d=\"M 6.609375 -2.125 C 6.609375 -3.234375 5.984375 -3.796875 4.484375 -4.15625 L 3.328125 -4.4375 C 2.34375 -4.671875 1.9375 -4.984375 1.9375 -5.515625 C 1.9375 -6.203125 2.546875 -6.65625 3.53125 -6.65625 C 4.5 -6.65625 5.015625 -6.234375 5.046875 -5.453125 L 6.3125 -5.453125 C 6.296875 -6.921875 5.3125 -7.765625 3.578125 -7.765625 C 1.8125 -7.765625 0.671875 -6.859375 0.671875 -5.453125 C 0.671875 -4.28125 1.28125 -3.71875 3.0625 -3.28125 L 4.1875 -3.015625 C 5.03125 -2.8125 5.359375 -2.5625 5.359375 -2.015625 C 5.359375 -1.3125 4.65625 -0.890625 3.59375 -0.890625 C 2.515625 -0.890625 1.921875 -1.15625 1.75 -2.3125 L 0.484375 -2.3125 C 0.546875 -0.5625 1.53125 0.21875 3.5 0.21875 C 5.40625 0.21875 6.609375 -0.65625 6.609375 -2.125 Z M 6.609375 -2.125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"fffdb66d-3a0c-4465-8ff4-77711c4a7e64\">\n<path style=\"stroke:none;\" d=\"M 4.625 -6.5 L 4.625 -7.71875 C 4.421875 -7.75 4.328125 -7.765625 4.15625 -7.765625 C 3.390625 -7.765625 2.796875 -7.296875 2.109375 -6.1875 L 2.109375 -7.546875 L 1.015625 -7.546875 L 1.015625 0 L 2.203125 0 L 2.203125 -3.921875 C 2.203125 -5.625 2.765625 -6.46875 4.625 -6.5 Z M 4.625 -6.5 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"9fbace35-8d2a-4704-980d-8382145819d5\">\n<path style=\"stroke:none;\" d=\"M 7.53125 -3.859375 C 7.53125 -6.3125 6.296875 -7.765625 4.3125 -7.765625 C 3.265625 -7.765625 2.53125 -7.375 1.96875 -6.53125 L 1.96875 -10.5 L 0.78125 -10.5 L 0.78125 0 L 1.859375 0 L 1.859375 -1.078125 C 2.4375 -0.203125 3.203125 0.21875 4.25 0.21875 C 6.234375 0.21875 7.53125 -1.40625 7.53125 -3.859375 Z M 6.28125 -3.78125 C 6.28125 -2.078125 5.390625 -0.90625 4.078125 -0.90625 C 2.8125 -0.90625 1.96875 -2.0625 1.96875 -3.78125 C 1.96875 -5.546875 2.8125 -6.703125 4.078125 -6.640625 C 5.421875 -6.640625 6.28125 -5.46875 6.28125 -3.78125 Z M 6.28125 -3.78125 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"ec69a5a7-7d18-45bf-8ed6-249e4d40aca1\">\n<path style=\"stroke:none;\" d=\"M 6.9375 0 L 6.9375 -7.546875 L 5.75 -7.546875 L 5.75 -3.390625 C 5.75 -1.84375 4.9375 -0.828125 3.6875 -0.828125 C 2.734375 -0.828125 2.125 -1.40625 2.125 -2.3125 L 2.125 -7.546875 L 0.9375 -7.546875 L 0.9375 -1.84375 C 0.9375 -0.59375 1.875 0.21875 3.34375 0.21875 C 4.453125 0.21875 5.15625 -0.171875 5.859375 -1.171875 L 5.859375 0 Z M 6.9375 0 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"6b5b5cff-cb86-4553-8bea-15b24ebed169\">\n<path style=\"stroke:none;\" d=\"M 7.34375 -3.71875 C 7.34375 -6.328125 6.09375 -7.765625 3.921875 -7.765625 C 1.796875 -7.765625 0.515625 -6.3125 0.515625 -3.78125 C 0.515625 -1.234375 1.78125 0.21875 3.9375 0.21875 C 6.046875 0.21875 7.34375 -1.234375 7.34375 -3.71875 Z M 6.09375 -3.734375 C 6.09375 -1.953125 5.265625 -0.890625 3.9375 -0.890625 C 2.59375 -0.890625 1.765625 -1.9375 1.765625 -3.78125 C 1.765625 -5.59375 2.59375 -6.65625 3.9375 -6.65625 C 5.28125 -6.65625 6.09375 -5.609375 6.09375 -3.734375 Z M 6.09375 -3.734375 \"/>\n</symbol>\n<symbol overflow=\"visible\" id=\"ecb563a1-2e1a-422b-a764-4f8eec8752b3\">\n<path style=\"stroke:none;\" d=\"M 7.015625 0 L 7.015625 -5.703125 C 7.015625 -6.953125 6.078125 -7.765625 4.625 -7.765625 C 3.5 -7.765625 2.78125 -7.328125 2.125 -6.28125 L 2.125 -7.546875 L 1.015625 -7.546875 L 1.015625 0 L 2.203125 0 L 2.203125 -4.15625 C 2.203125 -5.703125 3.046875 -6.71875 4.265625 -6.71875 C 5.21875 -6.71875 5.8125 -6.140625 5.8125 -5.234375 L 5.8125 0 Z M 7.015625 0 \"/>\n</symbol>\n</g>\n<clipPath id=\"e15ebfef-f43a-4aca-8e77-175de9c493f3\">\n  <path d=\"M 57.488281 32.601562 L 454 32.601562 L 454 252 L 57.488281 252 Z M 57.488281 32.601562 \"/>\n</clipPath>\n<clipPath id=\"d1d7d512-988b-42e7-a3f1-e94cb12d6e47\">\n  <path d=\"M 57.488281 205 L 454 205 L 454 206 L 57.488281 206 Z M 57.488281 205 \"/>\n</clipPath>\n<clipPath id=\"1f8e75b4-f1f0-4b17-a73d-49caddfc2fc2\">\n  <path d=\"M 57.488281 133 L 454 133 L 454 134 L 57.488281 134 Z M 57.488281 133 \"/>\n</clipPath>\n<clipPath id=\"849b6f00-d36a-43de-8904-32cd7362a67e\">\n  <path d=\"M 57.488281 60 L 454 60 L 454 62 L 57.488281 62 Z M 57.488281 60 \"/>\n</clipPath>\n<clipPath id=\"9fb047de-ac14-420c-a19a-27b54677b9de\">\n  <path d=\"M 57.488281 241 L 454.601562 241 L 454.601562 243 L 57.488281 243 Z M 57.488281 241 \"/>\n</clipPath>\n<clipPath id=\"3a218b27-2f23-43c6-ab02-a910dffad113\">\n  <path d=\"M 57.488281 168 L 454.601562 168 L 454.601562 170 L 57.488281 170 Z M 57.488281 168 \"/>\n</clipPath>\n<clipPath id=\"82dd16f4-5cc3-440e-8a9b-3f60494f8f0b\">\n  <path d=\"M 57.488281 96 L 454.601562 96 L 454.601562 98 L 57.488281 98 Z M 57.488281 96 \"/>\n</clipPath>\n<clipPath id=\"e4475e4e-d524-475e-9326-e192e19b128e\">\n  <path d=\"M 102 32.601562 L 104 32.601562 L 104 252.515625 L 102 252.515625 Z M 102 32.601562 \"/>\n</clipPath>\n<clipPath id=\"e50bf2e8-282b-4f8a-acb9-83d2b3576ae5\">\n  <path d=\"M 178 32.601562 L 180 32.601562 L 180 252.515625 L 178 252.515625 Z M 178 32.601562 \"/>\n</clipPath>\n<clipPath id=\"08f521df-115c-4c54-8b8b-5ded41766689\">\n  <path d=\"M 255 32.601562 L 257 32.601562 L 257 252.515625 L 255 252.515625 Z M 255 32.601562 \"/>\n</clipPath>\n<clipPath id=\"ea2b6033-fd64-4650-aeff-b3699c535d20\">\n  <path d=\"M 331 32.601562 L 333 32.601562 L 333 252.515625 L 331 252.515625 Z M 331 32.601562 \"/>\n</clipPath>\n<clipPath id=\"4e7d777b-247e-4bbb-a825-d487770c5eef\">\n  <path d=\"M 407 32.601562 L 409 32.601562 L 409 252.515625 L 407 252.515625 Z M 407 32.601562 \"/>\n</clipPath>\n</defs>\n<g id=\"f10fde46-2467-45cc-93bf-9e42c4479efe\">\n<rect x=\"0\" y=\"0\" width=\"468\" height=\"289\" style=\"fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;\"/>\n<rect x=\"0\" y=\"0\" width=\"468\" height=\"289\" style=\"fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;\"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 0 289 L 468 289 L 468 0 L 0 0 Z M 0 289 \"/>\n<g clip-path=\"url(#e15ebfef-f43a-4aca-8e77-175de9c493f3)\" clip-rule=\"nonzero\">\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(89.803922%,89.803922%,89.803922%);fill-opacity:1;\" d=\"M 57.488281 251.511719 L 453.601562 251.511719 L 453.601562 32.597656 L 57.488281 32.597656 Z M 57.488281 251.511719 \"/>\n</g>\n<g clip-path=\"url(#d1d7d512-988b-42e7-a3f1-e94cb12d6e47)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 205.464844 L 453.601562 205.464844 \"/>\n</g>\n<g clip-path=\"url(#1f8e75b4-f1f0-4b17-a73d-49caddfc2fc2)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 133.273438 L 453.601562 133.273438 \"/>\n</g>\n<g clip-path=\"url(#849b6f00-d36a-43de-8904-32cd7362a67e)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:0.531496;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(94.901961%,94.901961%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 61.078125 L 453.601562 61.078125 \"/>\n</g>\n<g clip-path=\"url(#9fb047de-ac14-420c-a19a-27b54677b9de)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 241.5625 L 453.601562 241.5625 \"/>\n</g>\n<g clip-path=\"url(#3a218b27-2f23-43c6-ab02-a910dffad113)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 169.371094 L 453.601562 169.371094 \"/>\n</g>\n<g clip-path=\"url(#82dd16f4-5cc3-440e-8a9b-3f60494f8f0b)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 57.488281 97.175781 L 453.601562 97.175781 \"/>\n</g>\n<g clip-path=\"url(#e4475e4e-d524-475e-9326-e192e19b128e)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 103.191406 251.511719 L 103.191406 32.601562 \"/>\n</g>\n<g clip-path=\"url(#e50bf2e8-282b-4f8a-acb9-83d2b3576ae5)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 179.367188 251.511719 L 179.367188 32.601562 \"/>\n</g>\n<g clip-path=\"url(#08f521df-115c-4c54-8b8b-5ded41766689)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 255.542969 251.511719 L 255.542969 32.601562 \"/>\n</g>\n<g clip-path=\"url(#ea2b6033-fd64-4650-aeff-b3699c535d20)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 331.71875 251.511719 L 331.71875 32.601562 \"/>\n</g>\n<g clip-path=\"url(#4e7d777b-247e-4bbb-a825-d487770c5eef)\" clip-rule=\"nonzero\">\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 407.894531 251.511719 L 407.894531 32.601562 \"/>\n</g>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(27.45098%,50.980392%,70.588235%);fill-opacity:1;\" d=\"M 68.914062 241.5625 L 137.472656 241.5625 L 137.472656 167.015625 L 68.914062 167.015625 Z M 68.914062 241.5625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(27.45098%,50.980392%,70.588235%);fill-opacity:1;\" d=\"M 145.089844 241.5625 L 213.648438 241.5625 L 213.648438 42.550781 L 145.089844 42.550781 Z M 145.089844 241.5625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(27.45098%,50.980392%,70.588235%);fill-opacity:1;\" d=\"M 221.265625 241.5625 L 289.824219 241.5625 L 289.824219 141.300781 L 221.265625 141.300781 Z M 221.265625 241.5625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(27.45098%,50.980392%,70.588235%);fill-opacity:1;\" d=\"M 297.441406 241.5625 L 366 241.5625 L 366 218.917969 L 297.441406 218.917969 Z M 297.441406 241.5625 \"/>\n<path style=\" stroke:none;fill-rule:nonzero;fill:rgb(27.45098%,50.980392%,70.588235%);fill-opacity:1;\" d=\"M 373.617188 241.5625 L 442.175781 241.5625 L 442.175781 240.71875 L 373.617188 240.71875 Z M 373.617188 241.5625 \"/>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#1ec1708b-47a3-4264-a8da-ba007e86e568\" x=\"23.398438\" y=\"244.082031\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"28.732422\" y=\"244.082031\"/>\n  <use xlink:href=\"#94ae1a02-b483-46d8-bccd-f5b375ff8912\" x=\"34.066406\" y=\"244.082031\"/>\n  <use xlink:href=\"#1ec1708b-47a3-4264-a8da-ba007e86e568\" x=\"39.668945\" y=\"244.082031\"/>\n  <use xlink:href=\"#1ec1708b-47a3-4264-a8da-ba007e86e568\" x=\"45.00293\" y=\"244.082031\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#f74d9527-f73e-4cda-ae97-85c07f58aa19\" x=\"23.398438\" y=\"171.890625\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"28.732422\" y=\"171.890625\"/>\n  <use xlink:href=\"#94ae1a02-b483-46d8-bccd-f5b375ff8912\" x=\"34.066406\" y=\"171.890625\"/>\n  <use xlink:href=\"#1ec1708b-47a3-4264-a8da-ba007e86e568\" x=\"39.668945\" y=\"171.890625\"/>\n  <use xlink:href=\"#e335d5f5-573b-4500-a0e5-618264a8bf7f\" x=\"45.00293\" y=\"171.890625\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#c940b667-fb58-4158-ba79-93a3362b3d0f\" x=\"23.398438\" y=\"99.695312\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"28.732422\" y=\"99.695312\"/>\n  <use xlink:href=\"#94ae1a02-b483-46d8-bccd-f5b375ff8912\" x=\"34.066406\" y=\"99.695312\"/>\n  <use xlink:href=\"#1ec1708b-47a3-4264-a8da-ba007e86e568\" x=\"39.668945\" y=\"99.695312\"/>\n  <use xlink:href=\"#f74d9527-f73e-4cda-ae97-85c07f58aa19\" x=\"45.00293\" y=\"99.695312\"/>\n</g>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 241.5625 L 57.488281 241.5625 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 169.371094 L 57.488281 169.371094 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 53.234375 97.175781 L 57.488281 97.175781 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 103.191406 255.765625 L 103.191406 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 179.367188 255.765625 L 179.367188 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 255.542969 255.765625 L 255.542969 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 331.71875 255.765625 L 331.71875 251.511719 \"/>\n<path style=\"fill:none;stroke-width:1.062992;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(49.803922%,49.803922%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 407.894531 255.765625 L 407.894531 251.511719 \"/>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#f84f676c-a090-44d7-83d1-de7764f81084\" x=\"92.691406\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"95.790039\" y=\"264.621094\"/>\n  <use xlink:href=\"#eca7bbcd-055e-4482-9a37-5fd2a13a5124\" x=\"101.124023\" y=\"264.621094\"/>\n  <use xlink:href=\"#7f0b6e16-be51-4f83-9290-13da1861978f\" x=\"106.458008\" y=\"264.621094\"/>\n  <use xlink:href=\"#95e99112-5ce0-43d0-b302-c5d4a8b5bef0\" x=\"108.540039\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#f84f676c-a090-44d7-83d1-de7764f81084\" x=\"163.367188\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"166.46582\" y=\"264.621094\"/>\n  <use xlink:href=\"#827eb35e-f0b0-497f-a149-a3b80578daea\" x=\"171.704102\" y=\"264.621094\"/>\n  <use xlink:href=\"#dd4bd14e-a44e-4e67-a597-515b886c2892\" x=\"174.371094\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"181.202148\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"186.536133\" y=\"264.621094\"/>\n  <use xlink:href=\"#827eb35e-f0b0-497f-a149-a3b80578daea\" x=\"191.774414\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#c228fdc6-e829-4364-9773-5ef0af4294b4\" x=\"243.542969\" y=\"264.621094\"/>\n  <use xlink:href=\"#56345e2a-833d-451b-8453-689ae85e2ba3\" x=\"248.339844\" y=\"264.621094\"/>\n  <use xlink:href=\"#a34b3849-a188-45ef-a90d-2d2a4e7ed5f2\" x=\"253.673828\" y=\"264.621094\"/>\n  <use xlink:href=\"#f84f676c-a090-44d7-83d1-de7764f81084\" x=\"259.007812\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"262.106445\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#c228fdc6-e829-4364-9773-5ef0af4294b4\" x=\"317.21875\" y=\"264.621094\"/>\n  <use xlink:href=\"#30919c26-c3e4-4141-bb06-0a854c981eb4\" x=\"322.015625\" y=\"264.621094\"/>\n  <use xlink:href=\"#e19c0a67-e978-4a98-9048-3385cbff0ab1\" x=\"327.349609\" y=\"264.621094\"/>\n  <use xlink:href=\"#f84f676c-a090-44d7-83d1-de7764f81084\" x=\"332.683594\" y=\"264.621094\"/>\n  <use xlink:href=\"#aecab7fb-93e9-4428-b663-f1fe2055735f\" x=\"335.830078\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"340.626953\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(49.803922%,49.803922%,49.803922%);fill-opacity:1;\">\n  <use xlink:href=\"#e19c0a67-e978-4a98-9048-3385cbff0ab1\" x=\"387.894531\" y=\"264.621094\"/>\n  <use xlink:href=\"#6272d0a9-daee-442e-bc8e-e3aad3963079\" x=\"393.228516\" y=\"264.621094\"/>\n  <use xlink:href=\"#f84f676c-a090-44d7-83d1-de7764f81084\" x=\"398.5625\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"401.661133\" y=\"264.621094\"/>\n  <use xlink:href=\"#7f0b6e16-be51-4f83-9290-13da1861978f\" x=\"406.995117\" y=\"264.621094\"/>\n  <use xlink:href=\"#a34b3849-a188-45ef-a90d-2d2a4e7ed5f2\" x=\"409.125\" y=\"264.621094\"/>\n  <use xlink:href=\"#827eb35e-f0b0-497f-a149-a3b80578daea\" x=\"414.458984\" y=\"264.621094\"/>\n  <use xlink:href=\"#5544cee2-d337-4bba-a0b5-8139af452f8d\" x=\"416.982422\" y=\"264.621094\"/>\n  <use xlink:href=\"#417ca0ae-a537-49dc-8dc3-8d11e8a062b9\" x=\"422.316406\" y=\"264.621094\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#d55d0c1b-171d-413b-9161-48ec8ca168b6\" x=\"223.542969\" y=\"277.975586\"/>\n  <use xlink:href=\"#c67c45ec-e9c2-4a81-b2c0-9fe5a69b680d\" x=\"229.735352\" y=\"277.975586\"/>\n  <use xlink:href=\"#3d57da22-a204-4e41-90b8-f7b8e1a4f755\" x=\"238.280273\" y=\"277.975586\"/>\n  <use xlink:href=\"#3d57da22-a204-4e41-90b8-f7b8e1a4f755\" x=\"244.952148\" y=\"277.975586\"/>\n  <use xlink:href=\"#67db2ff6-397d-4336-a4b4-c9bdf6ae435f\" x=\"251.504883\" y=\"277.975586\"/>\n  <use xlink:href=\"#a435b3da-eebb-4b5d-ab81-342b59dbf448\" x=\"254.84082\" y=\"277.975586\"/>\n  <use xlink:href=\"#67db2ff6-397d-4336-a4b4-c9bdf6ae435f\" x=\"258.176758\" y=\"277.975586\"/>\n  <use xlink:href=\"#d962f2fc-4f97-4377-be33-009ff360f388\" x=\"261.512695\" y=\"277.975586\"/>\n  <use xlink:href=\"#430a80ef-b0da-4a2e-82ac-6b1928f336f3\" x=\"267.512695\" y=\"277.975586\"/>\n  <use xlink:href=\"#3d57da22-a204-4e41-90b8-f7b8e1a4f755\" x=\"274.18457\" y=\"277.975586\"/>\n  <use xlink:href=\"#272e5da5-ae1e-4df9-a87b-800c3c4f88ea\" x=\"280.856445\" y=\"277.975586\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#ae3d873f-c4a0-44f1-a2c5-608b07feb771\" x=\"19.577148\" y=\"161.558594\"/>\n  <use xlink:href=\"#6f995963-83e0-476c-93c2-906407651758\" x=\"19.577148\" y=\"152.894531\"/>\n  <use xlink:href=\"#10e3a2f2-d97d-4406-bb57-e9e687bae42a\" x=\"19.577148\" y=\"146.222656\"/>\n  <use xlink:href=\"#97c718c8-acf2-4875-b09c-c3cdb5abf224\" x=\"19.577148\" y=\"139.550781\"/>\n  <use xlink:href=\"#da7aeb91-39a9-44cd-8e5d-787ee92500a8\" x=\"19.577148\" y=\"132.878906\"/>\n  <use xlink:href=\"#dc4e0b8a-da68-4dda-abe3-d02d3c63289c\" x=\"19.577148\" y=\"129.542969\"/>\n</g>\n<g style=\"fill:rgb(0%,0%,0%);fill-opacity:1;\">\n  <use xlink:href=\"#e832aa74-d3f8-4f6c-b9b3-b246b1d42ab7\" x=\"184.042969\" y=\"28.530273\"/>\n  <use xlink:href=\"#36c80d30-6874-429e-bc0b-6f3f00c44b4d\" x=\"191.476562\" y=\"28.530273\"/>\n  <use xlink:href=\"#fff257e1-53d3-476d-a5ef-ff1afaef60af\" x=\"201.734375\" y=\"28.530273\"/>\n  <use xlink:href=\"#fff257e1-53d3-476d-a5ef-ff1afaef60af\" x=\"209.744141\" y=\"28.530273\"/>\n  <use xlink:href=\"#377c9152-1198-4fcb-b85b-257c355d950d\" x=\"217.610352\" y=\"28.530273\"/>\n  <use xlink:href=\"#e88aed7c-bb86-4051-a0a9-52ac9e0e5041\" x=\"221.615234\" y=\"28.530273\"/>\n  <use xlink:href=\"#377c9152-1198-4fcb-b85b-257c355d950d\" x=\"225.620117\" y=\"28.530273\"/>\n  <use xlink:href=\"#03a1c16d-2b1c-4f23-8566-01e6ea4e83ba\" x=\"229.625\" y=\"28.530273\"/>\n  <use xlink:href=\"#c08ecbb7-414c-4633-9b4c-49687f3b5458\" x=\"236.828125\" y=\"28.530273\"/>\n  <use xlink:href=\"#fff257e1-53d3-476d-a5ef-ff1afaef60af\" x=\"244.837891\" y=\"28.530273\"/>\n  <use xlink:href=\"#e88aed7c-bb86-4051-a0a9-52ac9e0e5041\" x=\"252.847656\" y=\"28.530273\"/>\n  <use xlink:href=\"#d3f8b532-88e1-482e-a691-173bd8829f2c\" x=\"256.852539\" y=\"28.530273\"/>\n  <use xlink:href=\"#5c789d46-0776-44a8-aab7-657b7127a311\" x=\"264.862305\" y=\"28.530273\"/>\n  <use xlink:href=\"#25e4670d-60c5-4862-8480-0897e45e2d23\" x=\"268.060547\" y=\"28.530273\"/>\n  <use xlink:href=\"#377c9152-1198-4fcb-b85b-257c355d950d\" x=\"275.192383\" y=\"28.530273\"/>\n  <use xlink:href=\"#fffdb66d-3a0c-4465-8ff4-77711c4a7e64\" x=\"279.197266\" y=\"28.530273\"/>\n  <use xlink:href=\"#5c789d46-0776-44a8-aab7-657b7127a311\" x=\"283.994141\" y=\"28.530273\"/>\n  <use xlink:href=\"#9fbace35-8d2a-4704-980d-8382145819d5\" x=\"287.192383\" y=\"28.530273\"/>\n  <use xlink:href=\"#ec69a5a7-7d18-45bf-8ed6-249e4d40aca1\" x=\"295.202148\" y=\"28.530273\"/>\n  <use xlink:href=\"#377c9152-1198-4fcb-b85b-257c355d950d\" x=\"303.211914\" y=\"28.530273\"/>\n  <use xlink:href=\"#5c789d46-0776-44a8-aab7-657b7127a311\" x=\"307.216797\" y=\"28.530273\"/>\n  <use xlink:href=\"#6b5b5cff-cb86-4553-8bea-15b24ebed169\" x=\"310.415039\" y=\"28.530273\"/>\n  <use xlink:href=\"#ecb563a1-2e1a-422b-a764-4f8eec8752b3\" x=\"318.424805\" y=\"28.530273\"/>\n</g>\n</g>\n</svg>\n","value":"#gg4clj.core.GGView{:plot-command [[:<- :d [:data.frame {:counts [:c 15682 137833 585 51629 69441], :types [:c \"source\" \"retweet\" \"unrelated\" \"reply\" \"share\"]}]] [:+ [:+ [:+ [:+ [:ggplot :d [:aes :types :counts]] [:geom_bar {:stat \"identity\", :fill \"steelblue\"}]] [:xlab \"Tweet types\"]] [:ylab \"Counts\"]] [:ggtitle \"Tweet type distribution\"]]], :options {}}"}
;; <=

;; @@

;; @@
